/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var Utils;
(function (Utils) {
    function copyStringToClipboard(content) {
        var el = document.createElement('textarea');
        el.value = content;
        el.setAttribute('readonly', '');
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
    }
    Utils.copyStringToClipboard = copyStringToClipboard;
    function removeMd(md, options) {
        options = options || {};
        options.listUnicodeChar = options.hasOwnProperty('listUnicodeChar') ? options.listUnicodeChar : false;
        options.stripListLeaders = options.hasOwnProperty('stripListLeaders') ? options.stripListLeaders : true;
        options.gfm = options.hasOwnProperty('gfm') ? options.gfm : true;
        options.useImgAltText = options.hasOwnProperty('useImgAltText') ? options.useImgAltText : true;
        var output = md || '';
        output = output
            .replace(/^---[\s\S]*---\n*/g, "")
            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
            .replace(/\[\[(.*)\]\]/g, "$1")
            .replace(/```([^`])*```\n*/g, "")
            .replace(/\$([^$])*\$*/g, "")
            .replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, '');
        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + ' $1');
                else
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, '$1');
            }
            if (options.gfm) {
                output = output
                    // Header
                    .replace(/\n={2,}/g, '\n')
                    // Fenced codeblocks
                    .replace(/~{3}.*\n/g, '')
                    // Strikethrough
                    .replace(/~~/g, '')
                    // Fenced codeblocks
                    .replace(/`{3}.*\n/g, '');
            }
            output = output
                // Remove HTML tags
                .replace(/<[^>]*>/g, '')
                // Remove setext-style headers
                .replace(/^[=\-]{2,}\s*$/g, '')
                // Remove footnotes?
                .replace(/\[\^.+?\](\: .*?$)?/g, '')
                .replace(/\s{0,2}\[.*?\]: .*?$/g, '')
                // Remove images
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? '$1' : '')
                // Remove inline links
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, '$1')
                // Remove blockquotes
                .replace(/^\s{0,3}>\s?/g, '')
                // Remove reference-style links?
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, '')
                // Remove atx-style headers
                .replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm, '$1$2$3')
                // Remove emphasis (repeat the line to remove double emphasis)
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, '$2')
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, '$2')
                // Remove code blocks
                .replace(/(`{3,})(.*?)\1/gm, '$2')
                // Remove inline code
                .replace(/`(.+?)`/g, '$1')
                // Replace two or more newlines with exactly two? Not entirely sure this belongs here...
                .replace(/\n{2,}/g, '\n\n');
        }
        catch (e) {
            console.error(e);
            return md;
        }
        return output;
    }
    Utils.removeMd = removeMd;
})(Utils || (Utils = {}));

var Recipes;
(function (Recipes) {
    // Returns final response to a query 
    function runCommand(app, query) {
        return __awaiter(this, void 0, void 0, function* () {
            var recipePath = yield matchQuery(app, query);
            console.log('FOLLOWING', recipePath, 'USING', query);
            var output = followRecipe(app, recipePath, query);
            return output;
        });
    }
    Recipes.runCommand = runCommand;
    // Follows a specific recipe using a certain query
    function followRecipe(app, path, query) {
        return __awaiter(this, void 0, void 0, function* () {
            var recipeContents = yield getRecipeContents(app, path);
            var outputPattern = yield getOutputPattern(app, path);
            recipeContents = removeFrontMatter(recipeContents);
            var placeholders = yield getPlaceholders(app, recipeContents);
            var ingredients = yield getIngredients(query, placeholders);
            recipeContents = resolvePlaceholders(recipeContents, placeholders, ingredients);
            var codeBlocks = detectCodeBlocks(recipeContents);
            var [splitBlockList, blockTypes] = splitBlocks(recipeContents, codeBlocks);
            var [splitBlockList, textSoFar] = yield interpretBlocks(app, splitBlockList, blockTypes);
            var output = resolveOutputReferences(splitBlockList, textSoFar, outputPattern);
            var outputPlaceholders = yield getPlaceholders(app, output);
            var outputIngredients = yield getIngredients(query, outputPlaceholders);
            output = resolvePlaceholders(output, outputPlaceholders, outputIngredients);
            return output;
        });
    }
    Recipes.followRecipe = followRecipe;
    // Walk through blocks and take actions based on them
    function interpretBlocks(app, splitBlocks, blockTypes) {
        return __awaiter(this, void 0, void 0, function* () {
            var newText, textSoFar = "";
            for (let index = 0; index < splitBlocks.length; index++) {
                newText = resolveBodyReferences(splitBlocks, index, textSoFar);
                splitBlocks[index] = newText;
                switch (blockTypes[index]) {
                    case "text":
                        textSoFar = textSoFar.concat(newText);
                        break;
                    case "js":
                        splitBlocks[index] = yield waitEval(app, splitBlocks[index]);
                        textSoFar = textSoFar.concat(splitBlocks[index]);
                        break;
                    case "dual":
                        splitBlocks[index] = yield runCommand(app, newText);
                        textSoFar = textSoFar.concat(splitBlocks[index] + " ");
                }
            }
            return [splitBlocks, textSoFar];
        });
    }
    Recipes.interpretBlocks = interpretBlocks;
    // Wait for eval wrapper
    function waitEval(app, toEval) {
        return __awaiter(this, void 0, void 0, function* () {
            return eval(toEval);
        });
    }
    Recipes.waitEval = waitEval;
    // Fill in "#N" structures in recipe output based on reference code block output
    function resolveOutputReferences(splitBlocks, textSoFar, outputPattern) {
        outputPattern = outputPattern.replace("#0", textSoFar);
        for (let referencedCodeBlock = 1; referencedCodeBlock <= 10; referencedCodeBlock++) {
            outputPattern = outputPattern.replace("#" + referencedCodeBlock, splitBlocks[referencedCodeBlock * 2 - 1]);
        }
        return outputPattern;
    }
    Recipes.resolveOutputReferences = resolveOutputReferences;
    // Fill in "#N" structures in recipe body based on reference code block output
    function resolveBodyReferences(splitBlocks, reachedIndex, textSoFar) {
        var newText = splitBlocks[reachedIndex].trim() + " ";
        newText = newText.replace("#0", textSoFar);
        for (let referencedCodeBlock = 1; referencedCodeBlock <= reachedIndex / 2; referencedCodeBlock++) {
            newText = newText.replace("#" + referencedCodeBlock, splitBlocks[referencedCodeBlock * 2 - 1]);
        }
        return newText;
    }
    Recipes.resolveBodyReferences = resolveBodyReferences;
    // Get list of all blocks with type and contents
    function splitBlocks(recipeContents, codeBlocks) {
        var splitBlockList = [recipeContents], blockTypes = ["text"];
        for (let index = 0; index < codeBlocks.length; index++) {
            splitBlockList.push(codeBlocks[index]["contents"]);
            blockTypes.push(codeBlocks[index]["type"]);
            splitBlockList.push(splitBlockList[2 * index].slice(codeBlocks[index]["end"]));
            blockTypes.push("text");
            splitBlockList[2 * index] = splitBlockList[2 * index].slice(0, codeBlocks[index]["start"]);
            for (let indexFuture = index + 1; indexFuture < codeBlocks.length; indexFuture++) {
                codeBlocks[indexFuture]["start"] -= splitBlockList[2 * index].length + codeBlocks[index]["end"] - codeBlocks[index]["start"];
                codeBlocks[indexFuture]["end"] -= splitBlockList[2 * index].length + codeBlocks[index]["end"] - codeBlocks[index]["start"];
            }
        }
        splitBlockList.forEach((val, index, arr) => {
            arr[index] = val.trim() + " ";
        });
        return [splitBlockList, blockTypes];
    }
    Recipes.splitBlocks = splitBlocks;
    // Get a list of code blocks with details
    function detectCodeBlocks(recipeContents) {
        var m, res = [], re = RegExp(/\`\`\`(?<type>\w+)(?<contents>(?:\`[^\`]|[^\`])*)\`\`\`/, "g");
        do {
            m = re.exec(recipeContents);
            if (m) {
                res = res.concat({
                    type: m["groups"]["type"],
                    contents: m["groups"]["contents"].trim(),
                    start: m["index"],
                    end: m["index"] + m[0].length
                });
            }
        } while (m);
        return res;
    }
    Recipes.detectCodeBlocks = detectCodeBlocks;
    // Get list of ingredient names mentioned in a recipe
    function getPlaceholders(app, recipeContents) {
        return __awaiter(this, void 0, void 0, function* () {
            var re = /\*[^\*]*\*/g;
            var placeholders = recipeContents.match(re);
            if (placeholders != null) {
                placeholders.forEach((val, index, placeholders) => {
                    placeholders[index] = val.substring(1, val.length - 1);
                });
                return placeholders;
            }
            return [];
        });
    }
    Recipes.getPlaceholders = getPlaceholders;
    // Parse ingredients from the query
    function getIngredients(query, placeholders) {
        return __awaiter(this, void 0, void 0, function* () {
            var ingredients = [], res;
            for (let index = 0; index < placeholders.length; index++) {
                res = yield getIngredient(query, placeholders[index]);
                ingredients = ingredients.concat(res);
            }
            return ingredients;
        });
    }
    Recipes.getIngredients = getIngredients;
    // Parse one ingredient from the query
    function getIngredient(query, placeholder) {
        return __awaiter(this, void 0, void 0, function* () {
            if (placeholder == "quoted content") {
                var ingredient = RegExp(/"[\s\S]*"/g).exec(query)[0];
                ingredient = ingredient.substring(1, ingredient.length - 1);
                return ingredient;
            }
            var prompt = demoPrompt + query + " => \"";
            console.log(prompt);
            const rawResponse = yield fetch("http://127.0.0.1:5000/generate/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: prompt,
                    behavior: "parse_arguments",
                    pool: query
                }),
            });
            var content = yield rawResponse.json();
            content = content["output"][0];
            content = content.split('"')[0];
            return content;
        });
    }
    Recipes.getIngredient = getIngredient;
    // Get two parallel lists of query examples and the paths they originate from
    function getExamples(app) {
        var examples = [];
        var paths = [];
        app.vault.getMarkdownFiles().forEach((file) => {
            if (file.path.startsWith("dual-recipes")) {
                app.metadataCache
                    .getFileCache(file)
                    .frontmatter["examples"].forEach((example) => {
                    examples = examples.concat(example);
                    paths = paths.concat(file.path);
                });
            }
        });
        return [examples, paths];
    }
    Recipes.getExamples = getExamples;
    // Get contents of a recipe at a path
    function getRecipeContents(app, path) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = app.vault.getMarkdownFiles();
            for (let index = 0; index < markdownFiles.length; index++) {
                if (markdownFiles[index].path == path) {
                    return yield app.vault.cachedRead(markdownFiles[index]);
                }
            }
        });
    }
    Recipes.getRecipeContents = getRecipeContents;
    // Get output pattern of a recipe at a path
    function getOutputPattern(app, path) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = app.vault.getMarkdownFiles();
            for (let index = 0; index < markdownFiles.length; index++) {
                if (markdownFiles[index].path == path) {
                    return app.metadataCache
                        .getFileCache(markdownFiles[index])
                        .frontmatter["output"];
                }
            }
        });
    }
    Recipes.getOutputPattern = getOutputPattern;
    // Find closest recipe to a given query through examples
    function matchQuery(app, query) {
        return __awaiter(this, void 0, void 0, function* () {
            query = query.replace(/"[\s\S]*"/, '""');
            var examplePathPairs = getExamples(app);
            var examples = examplePathPairs[0], paths = examplePathPairs[1];
            const rawResponse = yield fetch("http://127.0.0.1:5000/extract/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    query: query,
                    documents: examples,
                    selected_candidates: 1,
                }),
            });
            var content = yield rawResponse.json();
            return paths[content["output"][0]];
        });
    }
    Recipes.matchQuery = matchQuery;
    // Substitute placeholders with ingredients in a recipe
    function resolvePlaceholders(recipeContents, placeholders, ingredients) {
        for (let index = 0; index < placeholders.length; index++) {
            var re = RegExp("\\*" + placeholders[index] + "\\*", "g");
            recipeContents = recipeContents.replace(re, ingredients[index]);
        }
        return recipeContents;
    }
    Recipes.resolvePlaceholders = resolvePlaceholders;
    function removeFrontMatter(recipeContents) {
        recipeContents = recipeContents.replace(/---[\s\S]*---/g, "");
        return recipeContents.trim();
    }
    Recipes.removeFrontMatter = removeFrontMatter;
    function getNotes(app) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = app.vault.getMarkdownFiles();
            var notes = [];
            for (let index = 0; index < markdownFiles.length; index++) {
                if (!markdownFiles[index].path.startsWith('dual-recipes')) {
                    var note = yield app.vault.cachedRead(markdownFiles[index]);
                    note = Utils.removeMd(note, {});
                    notes.push(note);
                }
            }
            return notes;
        });
    }
    Recipes.getNotes = getNotes;
    const demoPrompt = `Identify the person mentioned in the sentences below:

Einstein, what is relativity? => "Einstein"

Nietzsche, what is your philosophy all about? => " Nietzsche"

What shoud I do in this situation, Aristotle? => " Aristotle"

What does architecture mean for you, Le Corbusier? => "Le Corbusier"

Tell me, Gauss, how can I solve this? => "Gauss"

What does mathematics mean for you, Geoffrey Hinton? => " Geoffrey Hinton"

Carl Sagan, how would you describe this phenomenon? => " Carl Sagan"

Issac Newton, how would you describe this phenomenon? => "Isaac Newton"

I'm wondering, Asimov, what's the future like? => "Asimov"

Hey Euler, what is the most beautiful formula in mathematics? => " Euler"

`;
})(Recipes || (Recipes = {}));
/*
Come up with an application of blockchain in marketing => "blockchain"

What would be an interesting application of virtual reality in tourism? => "virtual reality"

Tell me an application of Internet of Things in transportation => "Internet of Things"

Come up with an application of self-driving cars in tourism => "self-driving cars"




Extract the first concept from each sentence below:

Combine the concepts life and toaster => "life"

Mix the concepts garden and books => " garden"

Merge the concepts freedom and derivative => " freedom"

Combine the words perception and robot => "perception"

Merge the concepts refraction and sound pattern => "refraction"

Combine the words autonomic arousal and neurons => " autonomic arousal"

Blend the words evolution and planets => " evolution"

Mix the concepts compound interest and intelligence => " compound interest"

Blend the concepts collaboration and mathematics => "collaboration"

Combine the concepts surface and flass => "surface"

Combine the concepts mind and machine => "mind"


*/

class ChatView extends obsidian.ItemView {
    constructor(leaf, customName) {
        super(leaf);
        this.customName = "";
        this.customName = customName;
    }
    getViewType() {
        return "chat";
    }
    getDisplayText() {
        return "Dual";
    }
    getIcon() {
        return "info";
    }
    sendMessage() {
        let input = document.getElementById("dual-input-box");
        let replied = false;
        if (input.value != "") {
            this.drawMessage(input.value, "right");
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                if (replied == false) {
                    this.setStatus("typing...");
                }
            });
            Recipes.runCommand(this.app, input.value).then((response) => {
                response.split("\n\n").forEach((res) => {
                    this.drawMessage(res, "left");
                });
                replied = true;
                this.setStatus("online");
            });
            input.value = "";
        }
    }
    makeRequest(query) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch("http://127.0.0.1:5000/query/" + encodeURIComponent(query));
            const responseJSON = yield response.json();
            return responseJSON;
        });
    }
    load() {
        super.load();
        this.draw();
    }
    draw() {
        const container = this.containerEl.children[1];
        const rootEl = document.createElement("div");
        const headerDiv = rootEl.createDiv({ cls: "nav-header" });
        const footerDiv = rootEl.createDiv({ cls: "nav-header" });
        let header = headerDiv.createEl("h3");
        header.appendText(this.customName);
        header.style.textAlign = "left";
        header.style.marginTop = "0px";
        header.style.marginBottom = "0px";
        header.style.position = "absolute";
        header.style.top = "15px";
        let status = headerDiv.createEl("h6");
        status.id = "status";
        status.appendText("online");
        status.style.textAlign = "left";
        status.style.marginTop = "0px";
        status.style.marginBottom = "5px";
        status.style.color = "grey";
        let conversationDiv = headerDiv.createDiv({ cls: "nav-header" });
        conversationDiv.id = "conversationDiv";
        conversationDiv.style.padding = "0";
        conversationDiv.style.backgroundColor = "var(--background-secondary-alt)";
        conversationDiv.style.position = "absolute";
        conversationDiv.style.left = "0";
        conversationDiv.style.width = "100%";
        conversationDiv.style.paddingLeft = "10px";
        conversationDiv.style.paddingRight = "10px";
        conversationDiv.style.overflowY = "scroll";
        conversationDiv.style.height = "calc(100% - 110px)";
        let input = footerDiv.createEl("input");
        input.id = "dual-input-box";
        input.type = "text";
        input.style.fontSize = "0.8em";
        input.style.paddingInlineStart = "2%";
        input.style.paddingInlineEnd = "2%";
        input.style.marginTop = "0px";
        input.style.marginBottom = "10px";
        input.style.maxWidth = "68%";
        input.style.minWidth = "68%";
        input.style.position = "absolute";
        input.style.bottom = "0";
        input.style.left = "5%";
        let button = footerDiv.createEl("button");
        button.appendText("Send");
        button.id = "send-button";
        button.style.alignItems = "left";
        button.style.paddingInlineStart = "2%";
        button.style.paddingInlineEnd = "2%";
        button.style.marginTop = "0px";
        button.style.marginBottom = "10px";
        button.style.width = "20%";
        button.style.position = "absolute";
        button.style.bottom = "0";
        button.style.left = "75%";
        this.registerDomEvent(button, "click", () => this.sendMessage());
        this.registerDomEvent(input, "keydown", (event) => {
            if (event.key == "Enter") {
                this.sendMessage();
            }
        });
        container.empty();
        container.appendChild(rootEl);
    }
    drawMessage(content, side) {
        let conversationDiv = (document.getElementById("conversationDiv"));
        let p = conversationDiv.createEl("p");
        p.appendText(content);
        p.style.userSelect = "text";
        p.style.textAlign = "left";
        p.style.fontSize = "0.8em";
        p.style.borderRadius = "5px";
        p.style.lineHeight = "18px";
        p.style.padding = "5px";
        if (side == "right") {
            p.style.backgroundColor = "var(--background-primary)";
        }
        else {
            p.style.backgroundColor = "var(--background-secondary)";
        }
        p.style.width = "90%";
        p.style.position = "relative";
        if (side == "right") {
            p.style.left = "10%";
        }
        conversationDiv.scrollBy(0, 1000);
    }
    setStatus(content) {
        let statusP = document.getElementById("status");
        statusP.setText(content);
    }
}

const DEFAULT_SETTINGS = {
    customName: "Dual",
};
class MyPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.registerView("chat", (leaf) => {
                return new ChatView(leaf, this.settings.customName);
            });
            this.app.workspace.layoutReady && this.initLeaf(this.app.workspace);
            this.registerEvent(this.app.workspace.on("layout-ready", () => this.initLeaf(this.app.workspace)));
            this.addSettingTab(new SampleSettingTab(this.app, this));
            this.addCommand({
                id: "focus-dual-input",
                name: "Focus Dual input box",
                callback: () => {
                    document.getElementById("dual-input-box").focus();
                },
            });
        });
    }
    initLeaf(workspace) {
        if (workspace.getLeavesOfType("chat").length == 0) {
            workspace.getRightLeaf(false).setViewState({
                type: "chat",
            });
        }
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.app = app;
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl("h3", {
            text: "Follow these instructions to set up your Dual:",
        });
        new obsidian.Setting(containerEl)
            .setName("RECIPE TEST")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("TEST")
            .setClass("mod-cta")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            console.log(yield Recipes.getIngredient("I was thing about this lately quite a lot. Where does life come from, Mr. Dawkins?", "technology"));
        })));
        new obsidian.Setting(containerEl)
            .setName("0. Install Python (3.8+).")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("Install Python")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://www.python.org/downloads/");
        }));
        new obsidian.Setting(containerEl)
            .setName("1. Copy snapshot.")
            .setDesc("Press the button to copy the entire vault as concatenated plain text.")
            .addButton((cb) => cb
            .setButtonText("Copy snapshot")
            .setClass("mod-cta")
            .onClick(() => {
            new obsidian.Notice("Loading files...");
            let concatenated = "";
            this.app.vault.getMarkdownFiles().forEach((element) => {
                this.app.vault.cachedRead(element).then((res) => {
                    res = res
                        .replace(/^---[\s\S]*---\n*/g, "")
                        .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
                        .replace(/\[\[(.*)\]\]/g, "$1")
                        .replace(/```([^`])*```\n*/g, "")
                        .replace(/\$([^$])*\$*/g, "");
                    concatenated = concatenated.concat(res, "\n\n");
                });
            });
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                concatenated = concatenated.slice(0, 5000000);
                concatenated = Utils.removeMd(concatenated, {});
                Utils.copyStringToClipboard(concatenated);
                new obsidian.Notice("Snapshot successfully copied to clipboard!");
            });
        }));
        new obsidian.Setting(containerEl)
            .setName("2. Derive the essence.")
            .setDesc("After following the online instructions, extract 'essence.zip' in '.obsidian/plugins/Dual/'.")
            .addButton((cb) => cb
            .setButtonText("Start alignment")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://colab.research.google.com/drive/1CObehan5gmYO-TvyyYq973a3h-_EYr9_?usp=sharing");
        }));
        new obsidian.Setting(containerEl)
            .setName("3. Configure the skeleton.")
            .setDesc("Run 'python3 -m pip install -r requirements.txt' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("4. Run the skeleton after you configured the essence.")
            .setDesc("Run 'python3 server.py --path /path/to/your/vault/' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("5. Restart Obsidian.")
            .setDesc("Head over to the right side panel to talk with your Dual!");
        containerEl.createEl("h3", {
            text: "Congratulations on setting up your Dual!",
        });
        new obsidian.Setting(containerEl)
            .setName("Custom name")
            .setDesc("Customize your Dual's name using the input box. Reload Obsidian for this to take effect.")
            .addText((text) => text
            .setPlaceholder("Dual")
            .setValue("")
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.customName = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName("Get involved!")
            .addButton((cb) => cb
            .setButtonText("Report bugs")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://github.com/Psionica/Dual/issues");
        }))
            .addButton((cb) => cb
            .setButtonText("Join Psionica")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://psionica.org/");
        }));
    }
}

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInV0aWxzLnRzIiwicmVjaXBlcy50cyIsInZpZXcudHMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcclxuICAgICAgICB0b1tqXSA9IGZyb21baV07XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJpdmF0ZU1hcC5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlTWFwLnNldChyZWNlaXZlciwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiIsImV4cG9ydCBtb2R1bGUgVXRpbHMge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjb3B5U3RyaW5nVG9DbGlwYm9hcmQgKGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBlbC52YWx1ZSA9IGNvbnRlbnQ7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICBlbC5zZWxlY3QoKTtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1kKG1kOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5saXN0VW5pY29kZUNoYXIgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdsaXN0VW5pY29kZUNoYXInKSA/IG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyIDogZmFsc2U7XG4gICAgICAgIG9wdGlvbnMuc3RyaXBMaXN0TGVhZGVycyA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3N0cmlwTGlzdExlYWRlcnMnKSA/IG9wdGlvbnMuc3RyaXBMaXN0TGVhZGVycyA6IHRydWU7XG4gICAgICAgIG9wdGlvbnMuZ2ZtID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZ2ZtJykgPyBvcHRpb25zLmdmbSA6IHRydWU7XG4gICAgICAgIG9wdGlvbnMudXNlSW1nQWx0VGV4dCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3VzZUltZ0FsdFRleHQnKSA/IG9wdGlvbnMudXNlSW1nQWx0VGV4dCA6IHRydWU7XG4gICAgXG4gICAgICAgIHZhciBvdXRwdXQgPSBtZCB8fCAnJztcbiAgICAgICAgb3V0cHV0ID0gb3V0cHV0XG4gICAgICAgICAgICAucmVwbGFjZSgvXi0tLVtcXHNcXFNdKi0tLVxcbiovZywgXCJcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFtbXlxcfFxcW1xcXV0qXFx8KFteXFx8XFxbXFxdXSopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFsoLiopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9gYGAoW15gXSkqYGBgXFxuKi9nLCBcIlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcJChbXiRdKSpcXCQqL2csIFwiXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXigtXFxzKj98XFwqXFxzKj98X1xccyo/KXszLH1cXHMqJC9nbSwgJycpXG4gICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgIGlmIChvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxpc3RVbmljb2RlQ2hhcilcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciArICcgJDEnKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCAnJDEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5nZm0pIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dFxuICAgICAgICAgICAgLy8gSGVhZGVyXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxuPXsyLH0vZywgJ1xcbicpXG4gICAgICAgICAgICAvLyBGZW5jZWQgY29kZWJsb2Nrc1xuICAgICAgICAgICAgLnJlcGxhY2UoL357M30uKlxcbi9nLCAnJylcbiAgICAgICAgICAgIC8vIFN0cmlrZXRocm91Z2hcbiAgICAgICAgICAgIC5yZXBsYWNlKC9+fi9nLCAnJylcbiAgICAgICAgICAgIC8vIEZlbmNlZCBjb2RlYmxvY2tzXG4gICAgICAgICAgICAucmVwbGFjZSgvYHszfS4qXFxuL2csICcnKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQgPSBvdXRwdXRcbiAgICAgICAgICAgIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgIC5yZXBsYWNlKC88W14+XSo+L2csICcnKVxuICAgICAgICAgICAgLy8gUmVtb3ZlIHNldGV4dC1zdHlsZSBoZWFkZXJzXG4gICAgICAgICAgICAucmVwbGFjZSgvXls9XFwtXXsyLH1cXHMqJC9nLCAnJylcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmb290bm90ZXM/XG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbXFxeLis/XFxdKFxcOiAuKj8kKT8vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxzezAsMn1cXFsuKj9cXF06IC4qPyQvZywgJycpXG4gICAgICAgICAgICAvLyBSZW1vdmUgaW1hZ2VzXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwhXFxbKC4qPylcXF1bXFxbXFwoXS4qP1tcXF1cXCldL2csIG9wdGlvbnMudXNlSW1nQWx0VGV4dCA/ICckMScgOiAnJylcbiAgICAgICAgICAgIC8vIFJlbW92ZSBpbmxpbmUgbGlua3NcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFsoLio/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZywgJyQxJylcbiAgICAgICAgICAgIC8vIFJlbW92ZSBibG9ja3F1b3Rlc1xuICAgICAgICAgICAgLnJlcGxhY2UoL15cXHN7MCwzfT5cXHM/L2csICcnKVxuICAgICAgICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZS1zdHlsZSBsaW5rcz9cbiAgICAgICAgICAgIC5yZXBsYWNlKC9eXFxzezEsMn1cXFsoLio/KVxcXTogKFxcUyspKCBcIi4qP1wiKT9cXHMqJC9nLCAnJylcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhdHgtc3R5bGUgaGVhZGVyc1xuICAgICAgICAgICAgLnJlcGxhY2UoL14oXFxuKT9cXHN7MCx9I3sxLDZ9XFxzK3wgezAsfShcXG4pP1xcc3swLH0jezAsfSB7MCx9KFxcbik/XFxzezAsfSQvZ20sICckMSQyJDMnKVxuICAgICAgICAgICAgLy8gUmVtb3ZlIGVtcGhhc2lzIChyZXBlYXQgdGhlIGxpbmUgdG8gcmVtb3ZlIGRvdWJsZSBlbXBoYXNpcylcbiAgICAgICAgICAgIC5yZXBsYWNlKC8oW1xcKl9dezEsM30pKFxcUy4qP1xcU3swLDF9KVxcMS9nLCAnJDInKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyhbXFwqX117MSwzfSkoXFxTLio/XFxTezAsMX0pXFwxL2csICckMicpXG4gICAgICAgICAgICAvLyBSZW1vdmUgY29kZSBibG9ja3NcbiAgICAgICAgICAgIC5yZXBsYWNlKC8oYHszLH0pKC4qPylcXDEvZ20sICckMicpXG4gICAgICAgICAgICAvLyBSZW1vdmUgaW5saW5lIGNvZGVcbiAgICAgICAgICAgIC5yZXBsYWNlKC9gKC4rPylgL2csICckMScpXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHR3byBvciBtb3JlIG5ld2xpbmVzIHdpdGggZXhhY3RseSB0d28/IE5vdCBlbnRpcmVseSBzdXJlIHRoaXMgYmVsb25ncyBoZXJlLi4uXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxuezIsfS9nLCAnXFxuXFxuJyk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybiBtZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwidXRpbHNcIjtcblxuZXhwb3J0IG1vZHVsZSBSZWNpcGVzIHtcblxuICAvLyBSZXR1cm5zIGZpbmFsIHJlc3BvbnNlIHRvIGEgcXVlcnkgXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Db21tYW5kKGFwcDogQXBwLCBxdWVyeTogc3RyaW5nKSB7XG4gICAgdmFyIHJlY2lwZVBhdGggPSBhd2FpdCBtYXRjaFF1ZXJ5KGFwcCwgcXVlcnkpO1xuICAgIGNvbnNvbGUubG9nKCdGT0xMT1dJTkcnLCByZWNpcGVQYXRoLCAnVVNJTkcnLCBxdWVyeSlcbiAgICB2YXIgb3V0cHV0ID0gZm9sbG93UmVjaXBlKGFwcCwgcmVjaXBlUGF0aCwgcXVlcnkpO1xuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gRm9sbG93cyBhIHNwZWNpZmljIHJlY2lwZSB1c2luZyBhIGNlcnRhaW4gcXVlcnlcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZvbGxvd1JlY2lwZShhcHA6IEFwcCwgcGF0aDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKSB7XG4gICAgdmFyIHJlY2lwZUNvbnRlbnRzOiBzdHJpbmcgPSBhd2FpdCBnZXRSZWNpcGVDb250ZW50cyhhcHAsIHBhdGgpO1xuICAgIHZhciBvdXRwdXRQYXR0ZXJuOiBzdHJpbmcgPSBhd2FpdCBnZXRPdXRwdXRQYXR0ZXJuKGFwcCwgcGF0aCk7XG4gICAgcmVjaXBlQ29udGVudHMgPSByZW1vdmVGcm9udE1hdHRlcihyZWNpcGVDb250ZW50cylcblxuICAgIHZhciBwbGFjZWhvbGRlcnM6IHN0cmluZ1tdID0gYXdhaXQgZ2V0UGxhY2Vob2xkZXJzKGFwcCwgcmVjaXBlQ29udGVudHMpO1xuICAgIHZhciBpbmdyZWRpZW50czogc3RyaW5nW10gPSBhd2FpdCBnZXRJbmdyZWRpZW50cyhxdWVyeSwgcGxhY2Vob2xkZXJzKTtcbiAgICByZWNpcGVDb250ZW50cyA9IHJlc29sdmVQbGFjZWhvbGRlcnMocmVjaXBlQ29udGVudHMsIHBsYWNlaG9sZGVycywgaW5ncmVkaWVudHMpO1xuXG4gICAgdmFyIGNvZGVCbG9ja3MgPSBkZXRlY3RDb2RlQmxvY2tzKHJlY2lwZUNvbnRlbnRzKVxuICAgIHZhciBbc3BsaXRCbG9ja0xpc3QsIGJsb2NrVHlwZXNdID0gc3BsaXRCbG9ja3MocmVjaXBlQ29udGVudHMsIGNvZGVCbG9ja3MpXG4gICAgdmFyIFtzcGxpdEJsb2NrTGlzdCwgdGV4dFNvRmFyXSA9IGF3YWl0IGludGVycHJldEJsb2NrcyhhcHAsIHNwbGl0QmxvY2tMaXN0LCBibG9ja1R5cGVzKVxuICAgIFxuICAgIHZhciBvdXRwdXQgPSByZXNvbHZlT3V0cHV0UmVmZXJlbmNlcyhzcGxpdEJsb2NrTGlzdCwgdGV4dFNvRmFyLCBvdXRwdXRQYXR0ZXJuKVxuICAgIHZhciBvdXRwdXRQbGFjZWhvbGRlcnM6IHN0cmluZ1tdID0gYXdhaXQgZ2V0UGxhY2Vob2xkZXJzKGFwcCwgb3V0cHV0KTtcbiAgICB2YXIgb3V0cHV0SW5ncmVkaWVudHM6IHN0cmluZ1tdID0gYXdhaXQgZ2V0SW5ncmVkaWVudHMocXVlcnksIG91dHB1dFBsYWNlaG9sZGVycyk7XG4gICAgb3V0cHV0ID0gcmVzb2x2ZVBsYWNlaG9sZGVycyhvdXRwdXQsIG91dHB1dFBsYWNlaG9sZGVycywgb3V0cHV0SW5ncmVkaWVudHMpO1xuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gV2FsayB0aHJvdWdoIGJsb2NrcyBhbmQgdGFrZSBhY3Rpb25zIGJhc2VkIG9uIHRoZW1cbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludGVycHJldEJsb2NrcyhhcHA6IEFwcCwgc3BsaXRCbG9ja3M6IHN0cmluZ1tdLCBibG9ja1R5cGVzOiBzdHJpbmdbXSk6IFByb21pc2U8W3N0cmluZ1tdLCBzdHJpbmddPiB7XG4gICAgdmFyIG5ld1RleHQsIHRleHRTb0Zhcjogc3RyaW5nID0gXCJcIjtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzcGxpdEJsb2Nrcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIG5ld1RleHQgPSByZXNvbHZlQm9keVJlZmVyZW5jZXMoc3BsaXRCbG9ja3MsIGluZGV4LCB0ZXh0U29GYXIpXG4gICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBuZXdUZXh0XG4gICAgICBcbiAgICAgIHN3aXRjaCAoYmxvY2tUeXBlc1tpbmRleF0pIHtcbiAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KG5ld1RleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwianNcIjpcbiAgICAgICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBhd2FpdCB3YWl0RXZhbChhcHAsIHNwbGl0QmxvY2tzW2luZGV4XSk7XG4gICAgICAgICAgdGV4dFNvRmFyID0gdGV4dFNvRmFyLmNvbmNhdChzcGxpdEJsb2Nrc1tpbmRleF0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZHVhbFwiOlxuICAgICAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IGF3YWl0IHJ1bkNvbW1hbmQoYXBwLCBuZXdUZXh0KTtcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KHNwbGl0QmxvY2tzW2luZGV4XSArIFwiIFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3NwbGl0QmxvY2tzLCB0ZXh0U29GYXJdO1xuICB9XG5cbiAgLy8gV2FpdCBmb3IgZXZhbCB3cmFwcGVyXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0RXZhbChhcHA6IEFwcCwgdG9FdmFsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBldmFsKHRvRXZhbCk7XG4gIH07XG5cbiAgLy8gRmlsbCBpbiBcIiNOXCIgc3RydWN0dXJlcyBpbiByZWNpcGUgb3V0cHV0IGJhc2VkIG9uIHJlZmVyZW5jZSBjb2RlIGJsb2NrIG91dHB1dFxuICBleHBvcnQgZnVuY3Rpb24gcmVzb2x2ZU91dHB1dFJlZmVyZW5jZXMoc3BsaXRCbG9ja3M6IHN0cmluZ1tdLCB0ZXh0U29GYXI6IHN0cmluZywgb3V0cHV0UGF0dGVybjogc3RyaW5nKSB7XG4gICAgb3V0cHV0UGF0dGVybiA9IG91dHB1dFBhdHRlcm4ucmVwbGFjZShcIiMwXCIsIHRleHRTb0ZhcilcblxuICAgIGZvciAobGV0IHJlZmVyZW5jZWRDb2RlQmxvY2sgPSAxOyByZWZlcmVuY2VkQ29kZUJsb2NrIDw9IDEwOyByZWZlcmVuY2VkQ29kZUJsb2NrKyspIHtcbiAgICAgIG91dHB1dFBhdHRlcm4gPSBvdXRwdXRQYXR0ZXJuLnJlcGxhY2UoXCIjXCIgKyByZWZlcmVuY2VkQ29kZUJsb2NrLCBzcGxpdEJsb2Nrc1tyZWZlcmVuY2VkQ29kZUJsb2NrICogMiAtIDFdKVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXRQYXR0ZXJuO1xuICB9XG5cbiAgLy8gRmlsbCBpbiBcIiNOXCIgc3RydWN0dXJlcyBpbiByZWNpcGUgYm9keSBiYXNlZCBvbiByZWZlcmVuY2UgY29kZSBibG9jayBvdXRwdXRcbiAgZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVCb2R5UmVmZXJlbmNlcyhzcGxpdEJsb2Nrczogc3RyaW5nW10sIHJlYWNoZWRJbmRleDogbnVtYmVyLCB0ZXh0U29GYXI6IHN0cmluZykge1xuICAgIHZhciBuZXdUZXh0ID0gc3BsaXRCbG9ja3NbcmVhY2hlZEluZGV4XS50cmltKCkgKyBcIiBcIjtcbiAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKFwiIzBcIiwgdGV4dFNvRmFyKVxuXG4gICAgZm9yIChsZXQgcmVmZXJlbmNlZENvZGVCbG9jayA9IDE7IHJlZmVyZW5jZWRDb2RlQmxvY2sgPD0gcmVhY2hlZEluZGV4IC8gMjsgcmVmZXJlbmNlZENvZGVCbG9jaysrKSB7XG4gICAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKFwiI1wiICsgcmVmZXJlbmNlZENvZGVCbG9jaywgc3BsaXRCbG9ja3NbcmVmZXJlbmNlZENvZGVCbG9jayAqIDIgLSAxXSlcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3VGV4dDtcbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIGFsbCBibG9ja3Mgd2l0aCB0eXBlIGFuZCBjb250ZW50c1xuICBleHBvcnQgZnVuY3Rpb24gc3BsaXRCbG9ja3MocmVjaXBlQ29udGVudHM6IHN0cmluZywgY29kZUJsb2NrczogW2NvZGVCbG9jazoge1widHlwZVwiOiBzdHJpbmcsIFwiY29udGVudHNcIjogc3RyaW5nLCBcInN0YXJ0XCI6IG51bWJlciwgXCJlbmRcIjogbnVtYmVyfV0pIHtcbiAgICB2YXIgc3BsaXRCbG9ja0xpc3QgPSBbcmVjaXBlQ29udGVudHNdLCBibG9ja1R5cGVzID0gW1widGV4dFwiXTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb2RlQmxvY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgc3BsaXRCbG9ja0xpc3QucHVzaChjb2RlQmxvY2tzW2luZGV4XVtcImNvbnRlbnRzXCJdKVxuICAgICAgYmxvY2tUeXBlcy5wdXNoKGNvZGVCbG9ja3NbaW5kZXhdW1widHlwZVwiXSlcblxuICAgICAgc3BsaXRCbG9ja0xpc3QucHVzaChzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLnNsaWNlKGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdKSlcbiAgICAgIGJsb2NrVHlwZXMucHVzaChcInRleHRcIilcblxuICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XSA9IHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0uc2xpY2UoMCwgY29kZUJsb2Nrc1tpbmRleF1bXCJzdGFydFwiXSlcblxuICAgICAgZm9yIChsZXQgaW5kZXhGdXR1cmUgPSBpbmRleCArIDE7IGluZGV4RnV0dXJlIDwgY29kZUJsb2Nrcy5sZW5ndGg7IGluZGV4RnV0dXJlKyspIHtcbiAgICAgICAgY29kZUJsb2Nrc1tpbmRleEZ1dHVyZV1bXCJzdGFydFwiXSAtPSBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLmxlbmd0aCArIGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdIC0gY29kZUJsb2Nrc1tpbmRleF1bXCJzdGFydFwiXTtcbiAgICAgICAgY29kZUJsb2Nrc1tpbmRleEZ1dHVyZV1bXCJlbmRcIl0gLT0gc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5sZW5ndGggKyBjb2RlQmxvY2tzW2luZGV4XVtcImVuZFwiXSAtIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3BsaXRCbG9ja0xpc3QuZm9yRWFjaCgodmFsLCBpbmRleCwgYXJyKSA9PiB7XG4gICAgICBhcnJbaW5kZXhdID0gdmFsLnRyaW0oKSArIFwiIFwiO1xuICAgIH0pXG5cbiAgICByZXR1cm4gW3NwbGl0QmxvY2tMaXN0LCBibG9ja1R5cGVzXVxuICB9XG5cbiAgLy8gR2V0IGEgbGlzdCBvZiBjb2RlIGJsb2NrcyB3aXRoIGRldGFpbHNcbiAgZXhwb3J0IGZ1bmN0aW9uIGRldGVjdENvZGVCbG9ja3MocmVjaXBlQ29udGVudHM6IHN0cmluZykge1xuICAgIHZhciBtLCByZXM6IGFueSA9IFtdLCByZSA9IFJlZ0V4cCgvXFxgXFxgXFxgKD88dHlwZT5cXHcrKSg/PGNvbnRlbnRzPig/OlxcYFteXFxgXXxbXlxcYF0pKilcXGBcXGBcXGAvLCBcImdcIilcblxuICAgIGRvIHtcbiAgICAgICAgbSA9IHJlLmV4ZWMocmVjaXBlQ29udGVudHMpO1xuICAgICAgICBpZiAobSkge1xuICAgICAgICAgICAgcmVzID0gcmVzLmNvbmNhdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogbVtcImdyb3Vwc1wiXVtcInR5cGVcIl0sXG4gICAgICAgICAgICAgICAgY29udGVudHM6IG1bXCJncm91cHNcIl1bXCJjb250ZW50c1wiXS50cmltKCksXG4gICAgICAgICAgICAgICAgc3RhcnQ6IG1bXCJpbmRleFwiXSxcbiAgICAgICAgICAgICAgICBlbmQ6IG1bXCJpbmRleFwiXSArIG1bMF0ubGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSB3aGlsZSAobSk7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLy8gR2V0IGxpc3Qgb2YgaW5ncmVkaWVudCBuYW1lcyBtZW50aW9uZWQgaW4gYSByZWNpcGVcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBsYWNlaG9sZGVycyhhcHA6IEFwcCwgcmVjaXBlQ29udGVudHM6IHN0cmluZykge1xuICAgIHZhciByZSA9IC9cXCpbXlxcKl0qXFwqL2c7XG4gICAgdmFyIHBsYWNlaG9sZGVycyA9IHJlY2lwZUNvbnRlbnRzLm1hdGNoKHJlKTtcblxuICAgIGlmIChwbGFjZWhvbGRlcnMgIT0gbnVsbCkge1xuICAgICAgcGxhY2Vob2xkZXJzLmZvckVhY2goKHZhbCwgaW5kZXgsIHBsYWNlaG9sZGVycykgPT4ge1xuICAgICAgICBwbGFjZWhvbGRlcnNbaW5kZXhdID0gdmFsLnN1YnN0cmluZygxLCB2YWwubGVuZ3RoIC0gMSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHBsYWNlaG9sZGVycztcbiAgICB9XG5cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIC8vIFBhcnNlIGluZ3JlZGllbnRzIGZyb20gdGhlIHF1ZXJ5XG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbmdyZWRpZW50cyhcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIHBsYWNlaG9sZGVyczogc3RyaW5nW11cbiAgKSB7XG4gICAgdmFyIGluZ3JlZGllbnRzOiBzdHJpbmdbXSA9IFtdLFxuICAgICAgcmVzO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBsYWNlaG9sZGVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJlcyA9IGF3YWl0IGdldEluZ3JlZGllbnQocXVlcnksIHBsYWNlaG9sZGVyc1tpbmRleF0pO1xuICAgICAgaW5ncmVkaWVudHMgPSBpbmdyZWRpZW50cy5jb25jYXQocmVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5ncmVkaWVudHM7XG4gIH1cblxuICAvLyBQYXJzZSBvbmUgaW5ncmVkaWVudCBmcm9tIHRoZSBxdWVyeVxuICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5ncmVkaWVudChxdWVyeTogc3RyaW5nLCBwbGFjZWhvbGRlcjogc3RyaW5nKSB7XG4gICAgaWYgKHBsYWNlaG9sZGVyID09IFwicXVvdGVkIGNvbnRlbnRcIikge1xuICAgICAgdmFyIGluZ3JlZGllbnQgPSBSZWdFeHAoL1wiW1xcc1xcU10qXCIvZykuZXhlYyhxdWVyeSlbMF1cbiAgICAgIGluZ3JlZGllbnQgPSBpbmdyZWRpZW50LnN1YnN0cmluZygxLCBpbmdyZWRpZW50Lmxlbmd0aCAtIDEpXG4gICAgICByZXR1cm4gaW5ncmVkaWVudFxuICAgIH1cblxuICAgIHZhciBwcm9tcHQ6IHN0cmluZyA9XG4gICAgICBkZW1vUHJvbXB0ICsgcXVlcnkgKyBcIiA9PiBcXFwiXCI7XG4gICAgY29uc29sZS5sb2cocHJvbXB0KVxuXG4gICAgY29uc3QgcmF3UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9nZW5lcmF0ZS9cIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgICAgYmVoYXZpb3I6IFwicGFyc2VfYXJndW1lbnRzXCIsXG4gICAgICAgIHBvb2w6IHF1ZXJ5XG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIHZhciBjb250ZW50ID0gYXdhaXQgcmF3UmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50W1wib3V0cHV0XCJdWzBdO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNwbGl0KCdcIicpWzBdO1xuICAgIFxuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgLy8gR2V0IHR3byBwYXJhbGxlbCBsaXN0cyBvZiBxdWVyeSBleGFtcGxlcyBhbmQgdGhlIHBhdGhzIHRoZXkgb3JpZ2luYXRlIGZyb21cbiAgZXhwb3J0IGZ1bmN0aW9uIGdldEV4YW1wbGVzKGFwcDogQXBwKSB7XG4gICAgdmFyIGV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHZhciBwYXRoczogc3RyaW5nW10gPSBbXTtcblxuICAgIGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiZHVhbC1yZWNpcGVzXCIpKSB7XG4gICAgICAgIGFwcC5tZXRhZGF0YUNhY2hlXG4gICAgICAgICAgLmdldEZpbGVDYWNoZShmaWxlKVxuICAgICAgICAgIC5mcm9udG1hdHRlcltcImV4YW1wbGVzXCJdLmZvckVhY2goKGV4YW1wbGU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgZXhhbXBsZXMgPSBleGFtcGxlcy5jb25jYXQoZXhhbXBsZSk7XG4gICAgICAgICAgICBwYXRocyA9IHBhdGhzLmNvbmNhdChmaWxlLnBhdGgpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFtleGFtcGxlcywgcGF0aHNdO1xuICB9XG5cbiAgLy8gR2V0IGNvbnRlbnRzIG9mIGEgcmVjaXBlIGF0IGEgcGF0aFxuICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjaXBlQ29udGVudHMoYXBwOiBBcHAsIHBhdGg6IHN0cmluZykge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gcGF0aCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQobWFya2Rvd25GaWxlc1tpbmRleF0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBvdXRwdXQgcGF0dGVybiBvZiBhIHJlY2lwZSBhdCBhIHBhdGhcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE91dHB1dFBhdHRlcm4oYXBwOiBBcHAsIHBhdGg6IHN0cmluZykge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gcGF0aCkge1xuICAgICAgICByZXR1cm4gYXBwLm1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAuZ2V0RmlsZUNhY2hlKG1hcmtkb3duRmlsZXNbaW5kZXhdKVxuICAgICAgICAgIC5mcm9udG1hdHRlcltcIm91dHB1dFwiXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmQgY2xvc2VzdCByZWNpcGUgdG8gYSBnaXZlbiBxdWVyeSB0aHJvdWdoIGV4YW1wbGVzXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXRjaFF1ZXJ5KGFwcDogQXBwLCBxdWVyeTogc3RyaW5nKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5yZXBsYWNlKC9cIltcXHNcXFNdKlwiLywgJ1wiXCInKVxuICAgIHZhciBleGFtcGxlUGF0aFBhaXJzID0gZ2V0RXhhbXBsZXMoYXBwKTtcbiAgICB2YXIgZXhhbXBsZXMgPSBleGFtcGxlUGF0aFBhaXJzWzBdLFxuICAgICAgcGF0aHMgPSBleGFtcGxlUGF0aFBhaXJzWzFdO1xuXG4gICAgY29uc3QgcmF3UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9leHRyYWN0L1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgZG9jdW1lbnRzOiBleGFtcGxlcyxcbiAgICAgICAgc2VsZWN0ZWRfY2FuZGlkYXRlczogMSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgdmFyIGNvbnRlbnQgPSBhd2FpdCByYXdSZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHBhdGhzW2NvbnRlbnRbXCJvdXRwdXRcIl1bMF1dO1xuICB9XG5cbiAgLy8gU3Vic3RpdHV0ZSBwbGFjZWhvbGRlcnMgd2l0aCBpbmdyZWRpZW50cyBpbiBhIHJlY2lwZVxuICBleHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVBsYWNlaG9sZGVycyhyZWNpcGVDb250ZW50czogc3RyaW5nLCBwbGFjZWhvbGRlcnM6IHN0cmluZ1tdLCBpbmdyZWRpZW50czogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGxhY2Vob2xkZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgcmUgPSBSZWdFeHAoXCJcXFxcKlwiICsgcGxhY2Vob2xkZXJzW2luZGV4XSArIFwiXFxcXCpcIiwgXCJnXCIpXG4gICAgICAgIHJlY2lwZUNvbnRlbnRzID0gcmVjaXBlQ29udGVudHMucmVwbGFjZShyZSwgaW5ncmVkaWVudHNbaW5kZXhdKVxuICAgIH1cblxuICAgIHJldHVybiByZWNpcGVDb250ZW50c1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyb250TWF0dGVyKHJlY2lwZUNvbnRlbnRzOiBzdHJpbmcpIHtcbiAgICByZWNpcGVDb250ZW50cyA9IHJlY2lwZUNvbnRlbnRzLnJlcGxhY2UoLy0tLVtcXHNcXFNdKi0tLS9nLCBcIlwiKVxuICAgIHJldHVybiByZWNpcGVDb250ZW50cy50cmltKCkgXG4gIH1cblxuICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZXMoYXBwOiBBcHApIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgdmFyIG5vdGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG1hcmtkb3duRmlsZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoIW1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGguc3RhcnRzV2l0aCgnZHVhbC1yZWNpcGVzJykpIHtcbiAgICAgICAgdmFyIG5vdGUgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChtYXJrZG93bkZpbGVzW2luZGV4XSk7XG4gICAgICAgIG5vdGUgPSBVdGlscy5yZW1vdmVNZChub3RlLCB7fSk7XG4gICAgICAgIG5vdGVzLnB1c2gobm90ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGVzXG4gIH1cblxuY29uc3QgZ2V0SW5ncmVkaWVudFByb21wdDogc3RyaW5nID0gYHF1ZXJ5OiBDb21lIHVwIHdpdGggYSB3cml0aW5nIHByb21wdCBhYm91dCBhbGllbnMgYW5kIHJvYm90cy5cbnRvcGljOiBcImFsaWVucyBhbmQgcm9ib3RzXCJcblxucXVlcnk6IEVpbnN0ZWluLCB3aGF0IGlzIGdlbmVyYWwgcmVsYXRpdml0eT9cbnBlcnNvbjogXCJFaW5zdGVpblwiXG5cbnF1ZXJ5OiBDb21lIHVwIHdpdGggYSBmaXR0aW5nIHRlcm0gZm9yIGEgbWV0YXBob3Igd2hpY2ggYnJpZGdlcyBkaXNwYXJhdGUgZmllbGRzLlxuZGVzY3JpcHRpb246IFwiYSBtZXRhcGhvciB3aGljaCBicmlkZ2VzIGRpc3BhcmF0ZSBmaWVsZHNcIlxuXG5xdWVyeTogV3JpdGUgYSBQeXRob24gcXVlcnkgd2hpY2ggcmV2ZXJzZXMgdGhlIGNvbnRlbnRzIG9mIGEgbGlzdC5cbmRlc2NyaXB0aW9uOiBcInJldmVyc2VzIHRoZSBjb250ZW50cyBvZiBhIGxpc3RcIlxuXG5xdWVyeTogSG93IGNvdWxkIG9uZSBvcGVyYXRpb25hbGl6ZSB3b3JraW5nIG1lbW9yeSBjYXBhY2l0eT9cbmNvbmNlcHQ6IFwid29ya2luZyBtZW1vcnkgY2FwYWNpdHlcIlxuXG5xdWVyeTogV2hhdCBzcGVjaWZpYyBvcGVyYXRpb25zIHNob3VsZCBJIHBlcmZvcm0gdG8gbW9kZWwgYW4gYWlycGxhbmUgaW4gQmxlbmRlcj9cbm9iamVjdDogXCJhaXJwbGFuZVwiXG5cbnF1ZXJ5OiBIb3cgY2FuIGZpcnN0LW9yZGVyIGxvZ2ljIGJlIHVzZWQgaW4gQUk/XG5xdWVyeTogXCJIb3cgY2FuIGZpcnN0LW9yZGVyIGxvZ2ljIGJlIHVzZWQgaW4gQUk/XCJcblxucXVlcnk6IFdoYXQncyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIGEgYnJpZGdlIGFuZCBhIG1ldGFwaG9yP1xucXVlcnk6IFwiV2hhdCdzIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gYSBicmlkZ2UgYW5kIGEgbWV0YXBob3I/XCJcblxucXVlcnk6IFdoYXQgd291bGQgYmUgYSB1c2VmdWwgYW5hbG9neSBmb3IgdW5kZXJzdGFuZGluZyBwdXBpbGxvbWV0cnk/XG5jb25jZXB0OiBcInB1cGlsbG9tZXRyeVwiXG5cbnF1ZXJ5OiBXaGF0IGFyZSBzb21lIHBvc3NpYmxlIGFwcGxpY2F0aW9ucyBvZiBicmFpbi1jb21wdXRlciBpbnRlcmZhY2VzP1xudGVjaG5vbG9neTogXCJicmFpbi1jb21wdXRlciBpbnRlcmZhY2VzXCJcblxucXVlcnk6IEhvdyBjYW4gSSBzYXkgXCJzcHJhbmRlbFwiIGluIFJvbWFuaWFuP1xubGFuZ3VhZ2U6IFwiUm9tYW5pYW5cIlxuXG5xdWVyeTogV2hhdCdzIHRoZSByZWxhdGlvbiBiZXR3ZWVuIG5ldXJvc2NpZW5jZSBhbmQgZHluYW1pY2FsIHN5c3RlbXM/XG5xdWVyeTogXCJXaGF0J3MgdGhlIHJlbGF0aW9uIGJldHdlZW4gbmV1cm9zY2llbmNlIGFuZCBkeW5hbWljYWwgc3lzdGVtcz9cIlxuXG5xdWVyeTogSG93IHdvdWxkIGEgc2Nob29sIGxvb2sgbGlrZSBpbiBWaWN0b3JpYW4gTG9uZG9uP1xuY29udGV4dDogXCJWaWN0b3JpYW4gTG9uZG9uXCJcblxucXVlcnk6IFRyYW5zbGF0ZSBcIklrIGJlbiBlZW4gb2xpZmFudFwiIGluIEVuZ2xpc2hcbnRhcmdldCBsYW5ndWFnZTogXCJFbmdsaXNoXCJcblxucXVlcnk6IFdoYXQgaXMgdGhlIHJvbGUgb2YgZ2VuZXRpYyBtYXRlcmlhbD9cbnF1ZXJ5OiBcIldoYXQgaXMgdGhlIHJvbGUgb2YgZ2VuZXRpYyBtYXRlcmlhbD9cIlxuXG5xdWVyeTogQ29tZSB1cCB3aXRoIGEgc2V0dGluZyBmb3IgYSBzY2llbmNlIGZpY3Rpb24gYm9vay5cbmdlbnJlOiBcInNjaWVuY2UgZmljdGlvblwiXG5cbnF1ZXJ5OiBXaGF0IGlzIGF1dG9ub21pYyBhcm91c2FsP1xucXVlcnk6IFwiV2hhdCBpcyBhdXRvbm9taWMgYXJvdXNhbD9cIlxuXG5xdWVyeTogVHJ5IHRvIGNvbWUgdXAgd2l0aCBhbiBleGVyY2lzZSBvbiB0aGVybW9keW5hbWljcy5cbnN1YmplY3Q6IFwidGhlcm1vZHluYW1pY3NcIlxuXG5xdWVyeTogV2hhdCdzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gcmVhbGlzbSBhbmQgaWRlYWxpc20/XG5xdWVyeTogXCJXaGF0J3MgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiByZWFsaXNtIGFuZCBpZGVhbGlzbT9cIlxuXG5xdWVyeTogQ29tZSB1cCB3aXRoIGEgcGFyYWxsZWwgZm9yOiBuZXVyb24sIGJyYWluLlxuc2VxdWVuY2U6IFwibmV1cm9uLCBicmFpblwiXG5cbnF1ZXJ5OiBEYXJ3aW4sIHdoYXQgaXMgdGhlIG9yaWdpbiBvZiBzcGVjaWVzP1xucGVyc29uOiBcIkRhcndpblwiXG5cbnF1ZXJ5OiBCbHVlIGlzIHRvIGNvbG9yIGFzIGNpcmNsZSBpcyB0by4uLlxucXVlcnk6IFwiQmx1ZSBpcyB0byBjb2xvciBhcyBjaXJjbGUgaXMgdG8uLi5cIlxuXG5xdWVyeTogV2hhdCBpcyB0aGUgbWVhbmluZyBvZiBsaWZlP1xucXVlcnk6IFwiV2hhdCBpcyB0aGUgbWVhbmluZyBvZiBsaWZlP1wiXG5cbnF1ZXJ5OiBNaXggdGhlIGNvbmNlcHRzIGJyYWluIGFuZCBzY2llbmNlXG5maXJzdCBjb25jZXB0OiBcImJyYWluXCJcblxucXVlcnk6IEhvdyBjYW4gd2UgYnVpbGQgYXJ0aWZpY2lhbCBnZW5lcmFsIGludGVsbGlnZW5jZT9cbnF1ZXJ5OiBcIkhvdyBjYW4gd2UgYnVpbGQgYXJ0aWZpY2lhbCBnZW5lcmFsIGludGVsbGlnZW5jZT9cIlxuXG5xdWVyeTogSXNhYWMgQXNpbW92LCBjb21lIHVwIHdpdGggYSB3cml0aW5nIHByb21wdCBhYm91dCBzcGFjZSBleHBsb3JhdGlvbi5cbnBlcnNvbjogXCJJc2FhYyBBc2ltb3ZcIlxuXG5xdWVyeTogV2h5IGlzIGNvbnNjaW91c25lc3MgYSB0aGluZz9cbnF1ZXJ5OiBcIldoeSBpcyBjb25zY2lvdXNuZXNzIGEgdGhpbmc/XCJcblxucXVlcnk6IEEgYm93bCBpcyB0byBhIHNvdXAgYXNcbnF1ZXJ5OiBcIkEgYm93bCBpcyB0byBhIHNvdXAgYXNcIlxuXG5xdWVyeTogSG93IGNhbiBhIGNvbnZlcnNhdGlvbmFsIGludGVyZmFjZSBiZSB1c2VkP1xucXVlcnk6IFwiSG93IGNhbiBhIGNvbnZlcnNhdGlvbmFsIGludGVyZmFjZSBiZSB1c2VkP1wiXG5cbnF1ZXJ5OiBNZXJnZSB0aGUgY29uY2VwdHMgaHVtYW4gYW5kIGNoYW9zLlxuc2Vjb25kIGNvbmNlcHQ6IFwiY2hhb3NcIlxuXG5xdWVyeTogSG93IGNhbiB2ZXJzaW9uIGNvbnRyb2wgaGVscFxucXVlcnk6IFwiSG93IGNhbiB2ZXJzaW9uIGNvbnRyb2wgaGVscD9cIlxuXG5xdWVyeTogQSB0cmVlIGlzIHRvIGEgYmFyayBhcyBhIHBlcnNvbiBpcyB0by4uLlxucXVlcnk6IFwiQSB0cmVlIGlzIHRvIGEgYmFyayBhcyBhIHBlcnNvbiBpcyB0by4uLlwiXG5cbnF1ZXJ5OiBDb21lIHVwIHdpdGggYW4gYW5hbG9neSBmb3I6IHN1biwgcGxhbmV0LCBzb2xhciBzeXN0ZW1cbnNlcXVlbmNlOiBcInN1biwgcGxhbmV0LCBzb2xhciBzeXN0ZW1cIlxuXG5xdWVyeTogTG9vayBmb3Igbm90ZXMgYWJvdXQgcHVwaWxsb21ldHJ5LlxudG9waWM6IFwicHVwaWxsb21ldHJ5XCJcblxucXVlcnk6IENvbWJpbmUgdGhlIGNvbmNlcHRzIGNvbXB1dGVyIGFuZCB2aXJ1cy5cbnNlY29uZCBjb25jZXB0OiBcInZpcnVzXCJcblxucXVlcnk6IFdoYXQgaXMgZXZvbHV0aW9uP1xucXVlcnk6IFwiV2hhdCBpcyBldm9sdXRpb24/XCJcblxucXVlcnk6IENvbWUgdXAgd2l0aCBhIGZpdHRpbmcgdGVybSBmb3IgYW4gaW5kaWNhdG9yIG9mIHJvYm90IGN1dGVuZXNzXG5kZXNjcmlwdGlvbjogXCJhbiBpbmRpY2F0b3Igb2Ygcm9ib3QgY3V0ZW5lc3NcIlxuXG5xdWVyeTogV2hhdCdzIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGJyYWluIGFuZCBhIHN0YWRpdW0/XG5xdWVyeTogXCJXaGF0J3MgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgYnJhaW4gYW5kIGEgc3RhZGl1bT9cIiBcblxucXVlcnk6IGA7XG5cbmNvbnN0IGRlbW9Qcm9tcHQ6IHN0cmluZyA9IGBJZGVudGlmeSB0aGUgcGVyc29uIG1lbnRpb25lZCBpbiB0aGUgc2VudGVuY2VzIGJlbG93OlxuXG5FaW5zdGVpbiwgd2hhdCBpcyByZWxhdGl2aXR5PyA9PiBcIkVpbnN0ZWluXCJcblxuTmlldHpzY2hlLCB3aGF0IGlzIHlvdXIgcGhpbG9zb3BoeSBhbGwgYWJvdXQ/ID0+IFwiIE5pZXR6c2NoZVwiXG5cbldoYXQgc2hvdWQgSSBkbyBpbiB0aGlzIHNpdHVhdGlvbiwgQXJpc3RvdGxlPyA9PiBcIiBBcmlzdG90bGVcIlxuXG5XaGF0IGRvZXMgYXJjaGl0ZWN0dXJlIG1lYW4gZm9yIHlvdSwgTGUgQ29yYnVzaWVyPyA9PiBcIkxlIENvcmJ1c2llclwiXG5cblRlbGwgbWUsIEdhdXNzLCBob3cgY2FuIEkgc29sdmUgdGhpcz8gPT4gXCJHYXVzc1wiXG5cbldoYXQgZG9lcyBtYXRoZW1hdGljcyBtZWFuIGZvciB5b3UsIEdlb2ZmcmV5IEhpbnRvbj8gPT4gXCIgR2VvZmZyZXkgSGludG9uXCJcblxuQ2FybCBTYWdhbiwgaG93IHdvdWxkIHlvdSBkZXNjcmliZSB0aGlzIHBoZW5vbWVub24/ID0+IFwiIENhcmwgU2FnYW5cIlxuXG5Jc3NhYyBOZXd0b24sIGhvdyB3b3VsZCB5b3UgZGVzY3JpYmUgdGhpcyBwaGVub21lbm9uPyA9PiBcIklzYWFjIE5ld3RvblwiXG5cbkknbSB3b25kZXJpbmcsIEFzaW1vdiwgd2hhdCdzIHRoZSBmdXR1cmUgbGlrZT8gPT4gXCJBc2ltb3ZcIlxuXG5IZXkgRXVsZXIsIHdoYXQgaXMgdGhlIG1vc3QgYmVhdXRpZnVsIGZvcm11bGEgaW4gbWF0aGVtYXRpY3M/ID0+IFwiIEV1bGVyXCJcblxuYDtcbn1cblxuLypcbkNvbWUgdXAgd2l0aCBhbiBhcHBsaWNhdGlvbiBvZiBibG9ja2NoYWluIGluIG1hcmtldGluZyA9PiBcImJsb2NrY2hhaW5cIlxuXG5XaGF0IHdvdWxkIGJlIGFuIGludGVyZXN0aW5nIGFwcGxpY2F0aW9uIG9mIHZpcnR1YWwgcmVhbGl0eSBpbiB0b3VyaXNtPyA9PiBcInZpcnR1YWwgcmVhbGl0eVwiXG5cblRlbGwgbWUgYW4gYXBwbGljYXRpb24gb2YgSW50ZXJuZXQgb2YgVGhpbmdzIGluIHRyYW5zcG9ydGF0aW9uID0+IFwiSW50ZXJuZXQgb2YgVGhpbmdzXCJcblxuQ29tZSB1cCB3aXRoIGFuIGFwcGxpY2F0aW9uIG9mIHNlbGYtZHJpdmluZyBjYXJzIGluIHRvdXJpc20gPT4gXCJzZWxmLWRyaXZpbmcgY2Fyc1wiXG5cblxuXG5cbkV4dHJhY3QgdGhlIGZpcnN0IGNvbmNlcHQgZnJvbSBlYWNoIHNlbnRlbmNlIGJlbG93OlxuXG5Db21iaW5lIHRoZSBjb25jZXB0cyBsaWZlIGFuZCB0b2FzdGVyID0+IFwibGlmZVwiXG5cbk1peCB0aGUgY29uY2VwdHMgZ2FyZGVuIGFuZCBib29rcyA9PiBcIiBnYXJkZW5cIlxuXG5NZXJnZSB0aGUgY29uY2VwdHMgZnJlZWRvbSBhbmQgZGVyaXZhdGl2ZSA9PiBcIiBmcmVlZG9tXCJcblxuQ29tYmluZSB0aGUgd29yZHMgcGVyY2VwdGlvbiBhbmQgcm9ib3QgPT4gXCJwZXJjZXB0aW9uXCJcblxuTWVyZ2UgdGhlIGNvbmNlcHRzIHJlZnJhY3Rpb24gYW5kIHNvdW5kIHBhdHRlcm4gPT4gXCJyZWZyYWN0aW9uXCJcblxuQ29tYmluZSB0aGUgd29yZHMgYXV0b25vbWljIGFyb3VzYWwgYW5kIG5ldXJvbnMgPT4gXCIgYXV0b25vbWljIGFyb3VzYWxcIlxuXG5CbGVuZCB0aGUgd29yZHMgZXZvbHV0aW9uIGFuZCBwbGFuZXRzID0+IFwiIGV2b2x1dGlvblwiXG5cbk1peCB0aGUgY29uY2VwdHMgY29tcG91bmQgaW50ZXJlc3QgYW5kIGludGVsbGlnZW5jZSA9PiBcIiBjb21wb3VuZCBpbnRlcmVzdFwiXG5cbkJsZW5kIHRoZSBjb25jZXB0cyBjb2xsYWJvcmF0aW9uIGFuZCBtYXRoZW1hdGljcyA9PiBcImNvbGxhYm9yYXRpb25cIlxuXG5Db21iaW5lIHRoZSBjb25jZXB0cyBzdXJmYWNlIGFuZCBmbGFzcyA9PiBcInN1cmZhY2VcIiBcblxuQ29tYmluZSB0aGUgY29uY2VwdHMgbWluZCBhbmQgbWFjaGluZSA9PiBcIm1pbmRcIlxuXG5cbiovIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgVGV4dEFyZWFDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFJlY2lwZXMgfSBmcm9tIFwicmVjaXBlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGF0VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgY3VzdG9tTmFtZSA9IFwiXCI7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgY3VzdG9tTmFtZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5jdXN0b21OYW1lID0gY3VzdG9tTmFtZTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY2hhdFwiO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJEdWFsXCI7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiaW5mb1wiO1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UoKTogdm9pZCB7XG4gICAgbGV0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWFsLWlucHV0LWJveFwiKTtcbiAgICBsZXQgcmVwbGllZCA9IGZhbHNlO1xuXG4gICAgaWYgKGlucHV0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgIHRoaXMuZHJhd01lc3NhZ2UoaW5wdXQudmFsdWUsIFwicmlnaHRcIik7XG5cbiAgICAgIGxldCB0eXBpbmdQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMClcbiAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChyZXBsaWVkID09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0dXMoXCJ0eXBpbmcuLi5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBSZWNpcGVzLnJ1bkNvbW1hbmQodGhpcy5hcHAsIGlucHV0LnZhbHVlKS50aGVuKChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgIHJlc3BvbnNlLnNwbGl0KFwiXFxuXFxuXCIpLmZvckVhY2goKHJlczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgdGhpcy5kcmF3TWVzc2FnZShyZXMsIFwibGVmdFwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVwbGllZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdHVzKFwib25saW5lXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBtYWtlUmVxdWVzdChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxKU09OPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL3F1ZXJ5L1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KVxuICAgICk7XG4gICAgY29uc3QgcmVzcG9uc2VKU09OID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXNwb25zZUpTT047XG4gIH1cblxuICBsb2FkKCk6IHZvaWQge1xuICAgIHN1cGVyLmxvYWQoKTtcbiAgICB0aGlzLmRyYXcoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhdygpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuXG4gICAgY29uc3Qgcm9vdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGNvbnN0IGhlYWRlckRpdiA9IHJvb3RFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmF2LWhlYWRlclwiIH0pO1xuICAgIGNvbnN0IGZvb3RlckRpdiA9IHJvb3RFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmF2LWhlYWRlclwiIH0pO1xuXG4gICAgbGV0IGhlYWRlciA9IGhlYWRlckRpdi5jcmVhdGVFbChcImgzXCIpO1xuICAgIGhlYWRlci5hcHBlbmRUZXh0KHRoaXMuY3VzdG9tTmFtZSk7XG4gICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgIGhlYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjBweFwiO1xuICAgIGhlYWRlci5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBweFwiO1xuICAgIGhlYWRlci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBoZWFkZXIuc3R5bGUudG9wID0gXCIxNXB4XCI7XG5cbiAgICBsZXQgc3RhdHVzID0gaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDZcIik7XG4gICAgc3RhdHVzLmlkID0gXCJzdGF0dXNcIjtcbiAgICBzdGF0dXMuYXBwZW5kVGV4dChcIm9ubGluZVwiKTtcbiAgICBzdGF0dXMuc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgc3RhdHVzLnN0eWxlLm1hcmdpblRvcCA9IFwiMHB4XCI7XG4gICAgc3RhdHVzLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNXB4XCI7XG4gICAgc3RhdHVzLnN0eWxlLmNvbG9yID0gXCJncmV5XCI7XG5cbiAgICBsZXQgY29udmVyc2F0aW9uRGl2ID0gaGVhZGVyRGl2LmNyZWF0ZURpdih7IGNsczogXCJuYXYtaGVhZGVyXCIgfSk7XG4gICAgY29udmVyc2F0aW9uRGl2LmlkID0gXCJjb252ZXJzYXRpb25EaXZcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUucGFkZGluZyA9IFwiMFwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdClcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY29udmVyc2F0aW9uRGl2LnN0eWxlLmxlZnQgPSBcIjBcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUucGFkZGluZ0xlZnQgPSBcIjEwcHhcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIxMHB4XCI7XG4gICAgY29udmVyc2F0aW9uRGl2LnN0eWxlLm92ZXJmbG93WSA9IFwic2Nyb2xsXCI7XG4gICAgY29udmVyc2F0aW9uRGl2LnN0eWxlLmhlaWdodCA9IFwiY2FsYygxMDAlIC0gMTEwcHgpXCI7XG5cbiAgICBsZXQgaW5wdXQgPSBmb290ZXJEaXYuY3JlYXRlRWwoXCJpbnB1dFwiKTtcbiAgICBpbnB1dC5pZCA9IFwiZHVhbC1pbnB1dC1ib3hcIjtcbiAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgaW5wdXQuc3R5bGUuZm9udFNpemUgPSBcIjAuOGVtXCI7XG4gICAgaW5wdXQuc3R5bGUucGFkZGluZ0lubGluZVN0YXJ0ID0gXCIyJVwiO1xuICAgIGlucHV0LnN0eWxlLnBhZGRpbmdJbmxpbmVFbmQgPSBcIjIlXCI7XG4gICAgaW5wdXQuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcbiAgICBpbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEwcHhcIjtcbiAgICBpbnB1dC5zdHlsZS5tYXhXaWR0aCA9IFwiNjglXCI7XG4gICAgaW5wdXQuc3R5bGUubWluV2lkdGggPSBcIjY4JVwiO1xuICAgIGlucHV0LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGlucHV0LnN0eWxlLmJvdHRvbSA9IFwiMFwiO1xuICAgIGlucHV0LnN0eWxlLmxlZnQgPSBcIjUlXCI7XG5cbiAgICBsZXQgYnV0dG9uID0gZm9vdGVyRGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi5hcHBlbmRUZXh0KFwiU2VuZFwiKTtcbiAgICBidXR0b24uaWQgPSBcInNlbmQtYnV0dG9uXCI7XG4gICAgYnV0dG9uLnN0eWxlLmFsaWduSXRlbXMgPSBcImxlZnRcIjtcbiAgICBidXR0b24uc3R5bGUucGFkZGluZ0lubGluZVN0YXJ0ID0gXCIyJVwiO1xuICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nSW5saW5lRW5kID0gXCIyJVwiO1xuICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSBcIjBweFwiO1xuICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEwcHhcIjtcbiAgICBidXR0b24uc3R5bGUud2lkdGggPSBcIjIwJVwiO1xuICAgIGJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBidXR0b24uc3R5bGUuYm90dG9tID0gXCIwXCI7XG4gICAgYnV0dG9uLnN0eWxlLmxlZnQgPSBcIjc1JVwiO1xuXG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGJ1dHRvbiwgXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNlbmRNZXNzYWdlKCkpO1xuICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChpbnB1dCwgXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PSBcIkVudGVyXCIpIHtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvb3RFbCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZywgc2lkZTogc3RyaW5nKTogdm9pZCB7XG4gICAgbGV0IGNvbnZlcnNhdGlvbkRpdiA9IDxIVE1MRGl2RWxlbWVudD4oXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnZlcnNhdGlvbkRpdlwiKVxuICAgICk7XG4gICAgbGV0IHAgPSBjb252ZXJzYXRpb25EaXYuY3JlYXRlRWwoXCJwXCIpO1xuICAgIHAuYXBwZW5kVGV4dChjb250ZW50KTtcbiAgICBwLnN0eWxlLnVzZXJTZWxlY3QgPSBcInRleHRcIjtcbiAgICBwLnN0eWxlLnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgIHAuc3R5bGUuZm9udFNpemUgPSBcIjAuOGVtXCI7XG4gICAgcC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiO1xuICAgIHAuc3R5bGUubGluZUhlaWdodCA9IFwiMThweFwiO1xuICAgIHAuc3R5bGUucGFkZGluZyA9IFwiNXB4XCI7XG5cbiAgICBpZiAoc2lkZSA9PSBcInJpZ2h0XCIpIHtcbiAgICAgIHAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSlcIjtcbiAgICB9XG5cbiAgICBwLnN0eWxlLndpZHRoID0gXCI5MCVcIjtcbiAgICBwLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXG4gICAgaWYgKHNpZGUgPT0gXCJyaWdodFwiKSB7XG4gICAgICBwLnN0eWxlLmxlZnQgPSBcIjEwJVwiO1xuICAgIH1cblxuICAgIGNvbnZlcnNhdGlvbkRpdi5zY3JvbGxCeSgwLCAxMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0U3RhdHVzKGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGxldCBzdGF0dXNQID0gPEhUTUxQYXJhZ3JhcGhFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpO1xuICAgIHN0YXR1c1Auc2V0VGV4dChjb250ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcclxuICBBcHAsXHJcbiAgTm90aWNlLFxyXG4gIFBsdWdpbixcclxuICBQbHVnaW5TZXR0aW5nVGFiLFxyXG4gIFNldHRpbmcsXHJcbiAgV29ya3NwYWNlLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgQ2hhdFZpZXcgZnJvbSBcInZpZXdcIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwidXRpbHNcIjtcclxuaW1wb3J0IHsgUmVjaXBlcyB9IGZyb20gXCJyZWNpcGVzXCI7XHJcblxyXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcbiAgY3VzdG9tTmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xyXG4gIGN1c3RvbU5hbWU6IFwiRHVhbFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xyXG5cclxuICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFwiY2hhdFwiLCAobGVhZikgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IENoYXRWaWV3KGxlYWYsIHRoaXMuc2V0dGluZ3MuY3VzdG9tTmFtZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UubGF5b3V0UmVhZHkgJiYgdGhpcy5pbml0TGVhZih0aGlzLmFwcC53b3Jrc3BhY2UpO1xyXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxyXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtcmVhZHlcIiwgKCkgPT5cclxuICAgICAgICB0aGlzLmluaXRMZWFmKHRoaXMuYXBwLndvcmtzcGFjZSlcclxuICAgICAgKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJmb2N1cy1kdWFsLWlucHV0XCIsXHJcbiAgICAgIG5hbWU6IFwiRm9jdXMgRHVhbCBpbnB1dCBib3hcIixcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1YWwtaW5wdXQtYm94XCIpLmZvY3VzKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGluaXRMZWFmKHdvcmtzcGFjZTogV29ya3NwYWNlKTogdm9pZCB7XHJcbiAgICBpZiAod29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImNoYXRcIikubGVuZ3RoID09IDApIHtcclxuICAgICAgd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICB0eXBlOiBcImNoYXRcIixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcclxuICAgICAgdGV4dDogXCJGb2xsb3cgdGhlc2UgaW5zdHJ1Y3Rpb25zIHRvIHNldCB1cCB5b3VyIER1YWw6XCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgIC5zZXROYW1lKFwiUkVDSVBFIFRFU1RcIilcclxuICAgIC5zZXREZXNjKFwiUHJlc3MgdGhlIGJ1dHRvbiB0byBoZWFkIG92ZXIgdG8gdGhlIGRvd25sb2FkIHBhZ2UuXCIpXHJcbiAgICAuYWRkQnV0dG9uKChjYikgPT5cclxuICAgICAgY2JcclxuICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlRFU1RcIilcclxuICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXHJcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYXdhaXQgUmVjaXBlcy5nZXRJbmdyZWRpZW50KFwiSSB3YXMgdGhpbmcgYWJvdXQgdGhpcyBsYXRlbHkgcXVpdGUgYSBsb3QuIFdoZXJlIGRvZXMgbGlmZSBjb21lIGZyb20sIE1yLiBEYXdraW5zP1wiLCBcInRlY2hub2xvZ3lcIikpXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiMC4gSW5zdGFsbCBQeXRob24gKDMuOCspLlwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlByZXNzIHRoZSBidXR0b24gdG8gaGVhZCBvdmVyIHRvIHRoZSBkb3dubG9hZCBwYWdlLlwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cclxuICAgICAgICBjYlxyXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJJbnN0YWxsIFB5dGhvblwiKVxyXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxyXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LnB5dGhvbi5vcmcvZG93bmxvYWRzL1wiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiMS4gQ29weSBzbmFwc2hvdC5cIilcclxuICAgICAgLnNldERlc2MoXHJcbiAgICAgICAgXCJQcmVzcyB0aGUgYnV0dG9uIHRvIGNvcHkgdGhlIGVudGlyZSB2YXVsdCBhcyBjb25jYXRlbmF0ZWQgcGxhaW4gdGV4dC5cIlxyXG4gICAgICApXHJcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxyXG4gICAgICAgIGNiXHJcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvcHkgc25hcHNob3RcIilcclxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcclxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShcIkxvYWRpbmcgZmlsZXMuLi5cIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29uY2F0ZW5hdGVkID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChlbGVtZW50KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcyA9IHJlc1xyXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXi0tLVtcXHNcXFNdKi0tLVxcbiovZywgXCJcIilcclxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1xcW1teXFx8XFxbXFxdXSpcXHwoW15cXHxcXFtcXF1dKilcXF1cXF0vZywgXCIkMVwiKVxyXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbXFxbKC4qKVxcXVxcXS9nLCBcIiQxXCIpXHJcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9gYGAoW15gXSkqYGBgXFxuKi9nLCBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkKFteJF0pKlxcJCovZywgXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gY29uY2F0ZW5hdGVkLmNvbmNhdChyZXMsIFwiXFxuXFxuXCIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb3B5UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMClcclxuICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBjb25jYXRlbmF0ZWQgPSBjb25jYXRlbmF0ZWQuc2xpY2UoMCwgNTAwMDAwMCk7XHJcbiAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gVXRpbHMucmVtb3ZlTWQoY29uY2F0ZW5hdGVkLCB7fSk7XHJcbiAgICAgICAgICAgICAgVXRpbHMuY29weVN0cmluZ1RvQ2xpcGJvYXJkKGNvbmNhdGVuYXRlZCk7XHJcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNuYXBzaG90IHN1Y2Nlc3NmdWxseSBjb3BpZWQgdG8gY2xpcGJvYXJkIVwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIjIuIERlcml2ZSB0aGUgZXNzZW5jZS5cIilcclxuICAgICAgLnNldERlc2MoXHJcbiAgICAgICAgXCJBZnRlciBmb2xsb3dpbmcgdGhlIG9ubGluZSBpbnN0cnVjdGlvbnMsIGV4dHJhY3QgJ2Vzc2VuY2UuemlwJyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC8nLlwiXHJcbiAgICAgIClcclxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XHJcbiAgICAgICAgY2JcclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiU3RhcnQgYWxpZ25tZW50XCIpXHJcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXHJcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFxyXG4gICAgICAgICAgICAgIFwiaHR0cHM6Ly9jb2xhYi5yZXNlYXJjaC5nb29nbGUuY29tL2RyaXZlLzFDT2JlaGFuNWdtWU8tVHZ5eVlxOTczYTNoLV9FWXI5Xz91c3A9c2hhcmluZ1wiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIjMuIENvbmZpZ3VyZSB0aGUgc2tlbGV0b24uXCIpXHJcbiAgICAgIC5zZXREZXNjKFxyXG4gICAgICAgIFwiUnVuICdweXRob24zIC1tIHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHQnIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NrZWxldG9uLycuXCJcclxuICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCI0LiBSdW4gdGhlIHNrZWxldG9uIGFmdGVyIHlvdSBjb25maWd1cmVkIHRoZSBlc3NlbmNlLlwiKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICBcIlJ1biAncHl0aG9uMyBzZXJ2ZXIucHkgLS1wYXRoIC9wYXRoL3RvL3lvdXIvdmF1bHQvJyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC9za2VsZXRvbi8nLlwiXHJcbiAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiNS4gUmVzdGFydCBPYnNpZGlhbi5cIilcclxuICAgICAgLnNldERlc2MoXCJIZWFkIG92ZXIgdG8gdGhlIHJpZ2h0IHNpZGUgcGFuZWwgdG8gdGFsayB3aXRoIHlvdXIgRHVhbCFcIik7XHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XHJcbiAgICAgIHRleHQ6IFwiQ29uZ3JhdHVsYXRpb25zIG9uIHNldHRpbmcgdXAgeW91ciBEdWFsIVwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5hbWVcIilcclxuICAgICAgLnNldERlc2MoXHJcbiAgICAgICAgXCJDdXN0b21pemUgeW91ciBEdWFsJ3MgbmFtZSB1c2luZyB0aGUgaW5wdXQgYm94LiBSZWxvYWQgT2JzaWRpYW4gZm9yIHRoaXMgdG8gdGFrZSBlZmZlY3QuXCJcclxuICAgICAgKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJEdWFsXCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoXCJcIilcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiR2V0IGludm9sdmVkIVwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cclxuICAgICAgICBjYlxyXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJSZXBvcnQgYnVnc1wiKVxyXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxyXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9Qc2lvbmljYS9EdWFsL2lzc3Vlc1wiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XHJcbiAgICAgICAgY2JcclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiSm9pbiBQc2lvbmljYVwiKVxyXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxyXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vcHNpb25pY2Eub3JnL1wiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJJdGVtVmlldyIsIlBsdWdpbiIsIlBsdWdpblNldHRpbmdUYWIiLCJTZXR0aW5nIiwiTm90aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8s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
