/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var Utils;
(function (Utils) {
    function copyStringToClipboard(content) {
        var el = document.createElement("textarea");
        el.value = content;
        el.setAttribute("readonly", "");
        document.body.appendChild(el);
        el.select();
        document.execCommand("copy");
        document.body.removeChild(el);
    }
    Utils.copyStringToClipboard = copyStringToClipboard;
    function removeMd(md, options = {
        listUnicodeChar: "",
        stripListLeaders: true,
        gfm: true,
        useImgAltText: true,
    }) {
        let output = md
            .replace(/^---[\s\S]*---\n*/g, "")
            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
            .replace(/\[\[(.*)\]\]/g, "$1")
            .replace(/```([^`])*```\n*/g, "")
            .replace(/\$([^$])*\$*/g, "")
            .replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, "");
        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
                else
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
            }
            if (options.gfm) {
                output = output
                    // Header
                    .replace(/\n={2,}/g, "\n")
                    // Fenced codeblocks
                    .replace(/~{3}.*\n/g, "")
                    // Strikethrough
                    .replace(/~~/g, "")
                    // Fenced codeblocks
                    .replace(/`{3}.*\n/g, "");
            }
            output = output
                // Remove HTML tags
                .replace(/<[^>]*>/g, "")
                // Remove setext-style headers
                .replace(/^[=\-]{2,}\s*$/g, "")
                // Remove footnotes?
                .replace(/\[\^.+?\](\: .*?$)?/g, "")
                .replace(/\s{0,2}\[.*?\]: .*?$/g, "")
                // Remove images
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "")
                // Remove inline links
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, "$1")
                // Remove blockquotes
                .replace(/^\s{0,3}>\s?/g, "")
                // Remove reference-style links?
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "")
                // Remove atx-style headers
                .replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm, "$1$2$3")
                // Remove emphasis (repeat the line to remove double emphasis)
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                // Remove code blocks
                .replace(/(`{3,})(.*?)\1/gm, "$2")
                // Remove inline code
                .replace(/`(.+?)`/g, "$1")
                // Replace two or more newlines with exactly two? Not entirely sure this belongs here...
                .replace(/\n{2,}/g, "\n\n");
        }
        catch (e) {
            console.error(e);
            return md;
        }
        return output;
    }
    Utils.removeMd = removeMd;
})(Utils || (Utils = {}));

class SkillManager {
    constructor(app) {
        this.app = app;
    }
    // Returns result of following a command
    followCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.matchCommand(command);
            //console.log("FOLLOWING", command, "USING", skillPath);
            var result = "meh"; // this.useSkill(skillPath, command);
            return result;
        });
    }
    // Uses a skill when following a command
    useSkill(skillPath, command) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSkillContents(skillPath);
            this.loadSkillMetadata(skillPath);
            this.removeFrontMatter();
            var params = yield this.getParams(this.skillContents);
            var args = yield this.getArgs(command, params);
            this.skillContents = this.resolveParams(this.skillContents, params, args);
            var codeBlocks = this.detectCodeBlocks();
            var [splitBlockList, blockTypes] = this.splitBlocks(codeBlocks);
            var [splitBlockList, textSoFar] = yield this.interpretBlocks(splitBlockList, blockTypes);
            var result = this.getLastBlock(splitBlockList);
            return result;
        });
    }
    // Walk through blocks and take actions based on them
    interpretBlocks(splitBlocks, blockTypes) {
        return __awaiter(this, void 0, void 0, function* () {
            var newText, textSoFar = "";
            for (let index = 0; index < splitBlocks.length; index++) {
                newText = this.resolveBodyReferences(splitBlocks, blockTypes, index, textSoFar);
                splitBlocks[index] = newText;
                switch (blockTypes[index]) {
                    case "text":
                        textSoFar = textSoFar.concat(newText);
                        break;
                    case "js":
                        splitBlocks[index] = yield this.waitEval(splitBlocks[index]);
                        textSoFar = textSoFar.concat(splitBlocks[index]);
                        break;
                    case "dual":
                        splitBlocks[index] = yield this.followCommand(newText);
                        textSoFar = textSoFar.concat(splitBlocks[index] + " ");
                }
            }
            return [splitBlocks, textSoFar];
        });
    }
    // Wait for eval wrapper
    waitEval(toEval) {
        return __awaiter(this, void 0, void 0, function* () {
            return eval(toEval);
        });
    }
    // Fill in "#N" structures in skill body based on reference code block result
    resolveBodyReferences(splitBlocks, blockTypes, reachedIndex, textSoFar) {
        var newText = splitBlocks[reachedIndex];
        newText = newText.replace("#0", textSoFar);
        for (let referencedCodeBlock = 1; referencedCodeBlock <= reachedIndex; referencedCodeBlock++) {
            if (newText.includes("#" + referencedCodeBlock)) {
                var remainingCodeBlocks = referencedCodeBlock;
                for (let blockIndex = 0; blockIndex < splitBlocks.length && remainingCodeBlocks > 0; blockIndex++) {
                    if (splitBlocks[blockIndex].toString().trim() != "" ||
                        blockTypes[blockIndex] != "text") {
                        remainingCodeBlocks--;
                    }
                    if (remainingCodeBlocks == 0) {
                        newText = newText.replace("#" + referencedCodeBlock, splitBlocks[blockIndex]);
                    }
                }
            }
        }
        return newText;
    }
    getLastBlock(splitBlocks) {
        for (let blockIndex = splitBlocks.length - 1; blockIndex >= 0; blockIndex--) {
            if (splitBlocks[blockIndex].toString().trim() != "") {
                return splitBlocks[blockIndex];
            }
        }
    }
    // Get list of all blocks with type and contents
    splitBlocks(codeBlocks) {
        var splitBlockList = [this.skillContents], blockTypes = ["text"];
        for (let index = 0; index < codeBlocks.length; index++) {
            splitBlockList.push(codeBlocks[index]["contents"]);
            blockTypes.push(codeBlocks[index]["type"]);
            splitBlockList.push(splitBlockList[2 * index].slice(codeBlocks[index]["end"]));
            blockTypes.push("text");
            splitBlockList[2 * index] = splitBlockList[2 * index].slice(0, codeBlocks[index]["start"]);
            for (let indexFuture = index + 1; indexFuture < codeBlocks.length; indexFuture++) {
                codeBlocks[indexFuture]["start"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
                codeBlocks[indexFuture]["end"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
            }
        }
        return [splitBlockList, blockTypes];
    }
    // Get a list of code blocks with details
    detectCodeBlocks() {
        let m, res = [];
        const re = RegExp(/\`\`\`(?<type>\w+)(?<contents>(?:\`[^\`]|[^\`])*)\`\`\`/, "g");
        do {
            m = re.exec(this.skillContents);
            if (m) {
                res = res.concat({
                    type: m["groups"]["type"],
                    contents: m["groups"]["contents"].trim(),
                    start: m["index"],
                    end: m["index"] + m[0].length,
                });
            }
        } while (m);
        return res;
    }
    // Get list of parameters mentioned in a skill
    getParams(document) {
        return __awaiter(this, void 0, void 0, function* () {
            var re = /\*[a-zA-Z0-9\s]*\*/g;
            var params = document.match(re);
            if (params != null) {
                params.forEach((val, index, params) => {
                    params[index] = val.substring(1, val.length - 1);
                });
                return params;
            }
            return [];
        });
    }
    // Parse arguments from the command
    getArgs(command, params) {
        return __awaiter(this, void 0, void 0, function* () {
            var args = [], res;
            for (let index = 0; index < params.length; index++) {
                res = yield this.getArg(command, params[index]);
                args = args.concat(res);
            }
            return args;
        });
    }
    // Parse one argument from the command
    getArg(command, param) {
        return __awaiter(this, void 0, void 0, function* () {
            if (param == Object.keys(this.skillMetadata[0])[0]) {
                return command;
            }
            var prompt = this.getParamPrompt(command, param);
            const rawResponse = yield fetch("http://127.0.0.1:3030/generate/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: prompt,
                    context: [command],
                    generate_paragraphs: 1,
                }),
            });
            var content = yield rawResponse.json();
            content = content["result"][0];
            content = content.split('"')[0].trim();
            return content;
        });
    }
    getParamPrompt(command, param) {
        var commandParam;
        var prompt;
        // TODO do ablation
        prompt = "Extract " + param + " from the following:\n\n";
        commandParam = Object.keys(this.skillMetadata[0])[0];
        this.skillMetadata.forEach((val, index, array) => {
            if (commandParam in val && param in val) {
                if (Math.random() >= 0.6) {
                    prompt += val[commandParam] + " => " + val[param] + '"\n\n';
                }
                else {
                    prompt += val[commandParam] + " =>  " + val[param] + '"\n\n';
                }
            }
        });
        prompt += command + " => ";
        return prompt;
    }
    // Get two parallel lists of command examples and the paths they originate from
    getCommandExamples() {
        var commandExamples = [];
        var skillPaths = [];
        var commandExampleParam;
        var newCommandExample;
        this.app.vault.getMarkdownFiles().forEach((file) => {
            if (file.path.startsWith("skillset")) {
                commandExampleParam = Object.keys(this.app.metadataCache.getFileCache(file).frontmatter[0])[0];
                this.app.metadataCache
                    .getFileCache(file)
                    .frontmatter.forEach((val, index, array) => {
                    if (commandExampleParam in val) {
                        newCommandExample = val[commandExampleParam];
                        Object.entries(val).forEach((field, fieldIndex, fieldArray) => {
                            if (fieldIndex > 0) {
                                newCommandExample = newCommandExample.replace(field[1], " ___ ");
                            }
                        });
                        commandExamples = commandExamples.concat(newCommandExample);
                        skillPaths = skillPaths.concat(file.path);
                    }
                });
            }
        });
        return [commandExamples, skillPaths];
    }
    // Get contents of a skill at a path
    loadSkillContents(skillPath) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            for (let index = 0; index < markdownFiles.length; index++) {
                if (markdownFiles[index].path == skillPath) {
                    this.skillContents = yield this.app.vault.cachedRead(markdownFiles[index]);
                }
            }
        });
    }
    // Get metadata of a skill at a path
    loadSkillMetadata(skillPath) {
        var markdownFiles = this.app.vault.getMarkdownFiles();
        for (let index = 0; index < markdownFiles.length; index++) {
            if (markdownFiles[index].path == skillPath) {
                this.skillMetadata = this.app.metadataCache.getFileCache(markdownFiles[index]).frontmatter;
            }
        }
    }
    // Find closest skill to a given command through examples
    matchCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            // Hide quoted content from command matching
            command = command.replace(/"[\s\S]*"/, '""');
            var examplePathPairs = this.getCommandExamples();
            var examples = examplePathPairs[0], paths = examplePathPairs[1];
            const searchPrompt = examples
                .map((e) => {
                return e + " => " + e + "\n\n";
            })
                .slice(0, -1)
                .join("");
            const rawResponse = yield fetch("http://127.0.0.1:3030/search/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: searchPrompt + command + " =>",
                    context: examples.map((e) => " " + e),
                    generate_paragraphs: 1,
                }),
            });
            var content = yield rawResponse.json();
            console.log("USING", searchPrompt + command + " =>");
            console.log("FOUND", examples[content["output"][0]], paths[content["output"][0]]);
            return paths[content["output"][0]];
        });
    }
    // Substitute parameters with arguments in a skill
    resolveParams(document, params, args) {
        for (let index = 0; index < params.length; index++) {
            var re = RegExp("\\*" + params[index] + "\\*", "g");
            document = document.replace(re, args[index]);
        }
        return document;
    }
    removeFrontMatter() {
        this.skillContents = this.skillContents.replace(/---[\s\S]*---/g, "");
    }
    getNotes() {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            var notes = [];
            for (let index = 0; index < markdownFiles.length; index++) {
                if (!markdownFiles[index].path.startsWith("skillset")) {
                    var note = yield this.app.vault.cachedRead(markdownFiles[index]);
                    note = Utils.removeMd(note);
                    notes.push(note);
                }
            }
            return notes;
        });
    }
}

class ChatView extends obsidian.ItemView {
    constructor(leaf, customName) {
        super(leaf);
        this.customName = "";
        this.customName = customName;
    }
    getViewType() {
        return "chat";
    }
    getDisplayText() {
        return "Dual";
    }
    getIcon() {
        return "info";
    }
    sendMessage() {
        let input = document.getElementById("dual-input-box");
        let replied = false;
        if (input.value != "") {
            this.drawMessage(input.value, "right");
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                if (replied == false) {
                    this.setStatus("typing...");
                }
            });
            var skillManager = new SkillManager(this.app);
            skillManager.followCommand(input.value).then((response) => {
                response
                    .toString()
                    .split("\n\n")
                    .forEach((res) => {
                    if (res.trim() != "") {
                        this.drawMessage(res, "left");
                    }
                });
                replied = true;
                this.setStatus("online");
            });
            input.value = "";
        }
    }
    makeRequest(query) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch("http://127.0.0.1:5000/query/" + encodeURIComponent(query));
            const responseJSON = yield response.json();
            return responseJSON;
        });
    }
    load() {
        super.load();
        this.draw();
    }
    draw() {
        const container = this.containerEl.children[1];
        const rootEl = document.createElement("div");
        const headerDiv = rootEl.createDiv({ cls: "nav-header" });
        const footerDiv = rootEl.createDiv({ cls: "nav-header" });
        let header = headerDiv.createEl("h3");
        header.appendText(this.customName);
        header.style.textAlign = "left";
        header.style.marginTop = "0px";
        header.style.marginBottom = "0px";
        header.style.position = "absolute";
        header.style.top = "15px";
        let status = headerDiv.createEl("h6");
        status.id = "status";
        status.appendText("online");
        status.style.textAlign = "left";
        status.style.marginTop = "0px";
        status.style.marginBottom = "5px";
        status.style.color = "grey";
        let conversationDiv = headerDiv.createDiv({ cls: "nav-header" });
        conversationDiv.id = "conversationDiv";
        conversationDiv.style.padding = "0";
        conversationDiv.style.backgroundColor = "var(--background-secondary-alt)";
        conversationDiv.style.position = "absolute";
        conversationDiv.style.left = "0";
        conversationDiv.style.width = "100%";
        conversationDiv.style.paddingLeft = "10px";
        conversationDiv.style.paddingRight = "10px";
        conversationDiv.style.overflowY = "scroll";
        conversationDiv.style.height = "calc(100% - 110px)";
        let input = footerDiv.createEl("input");
        input.id = "dual-input-box";
        input.type = "text";
        input.style.fontSize = "0.8em";
        input.style.paddingInlineStart = "2%";
        input.style.paddingInlineEnd = "2%";
        input.style.marginTop = "0px";
        input.style.marginBottom = "10px";
        input.style.maxWidth = "68%";
        input.style.minWidth = "68%";
        input.style.position = "absolute";
        input.style.bottom = "0";
        input.style.left = "5%";
        let button = footerDiv.createEl("button");
        button.appendText("Send");
        button.id = "send-button";
        button.style.alignItems = "left";
        button.style.paddingInlineStart = "2%";
        button.style.paddingInlineEnd = "2%";
        button.style.marginTop = "0px";
        button.style.marginBottom = "10px";
        button.style.width = "20%";
        button.style.position = "absolute";
        button.style.bottom = "0";
        button.style.left = "75%";
        this.registerDomEvent(button, "click", () => this.sendMessage());
        this.registerDomEvent(input, "keydown", (event) => {
            if (event.key == "Enter") {
                this.sendMessage();
            }
        });
        container.empty();
        container.appendChild(rootEl);
    }
    drawMessage(content, side) {
        let conversationDiv = (document.getElementById("conversationDiv"));
        let p = conversationDiv.createEl("p");
        p.style.boxSizing = "border-box";
        p.style.maxWidth = "90%";
        obsidian.MarkdownRenderer.renderMarkdown(content, p, this.app.vault.getRoot().path, new obsidian.Component());
        for (let childIndex = 0; childIndex < p.children.length; childIndex++) {
            p.children[childIndex].setAttribute("style", "margin: 5px; margin-left: 8px; margin-right: 8px");
        }
        p.style.userSelect = "text";
        p.style.textAlign = "left";
        p.style.fontSize = "0.8em";
        p.style.borderRadius = "5px";
        p.style.lineHeight = "18px";
        p.style.padding = "0px";
        p.style.paddingBlockStart = "0px";
        p.style.marginTop = "5px";
        p.style.marginBottom = "5px";
        if (side == "right") {
            p.style.backgroundColor = "var(--background-primary)";
        }
        else {
            p.style.backgroundColor = "var(--background-secondary)";
        }
        if (side == "right") {
            p.style.float = "right";
        }
        else {
            p.style.float = "left";
        }
        p.style.display = "inline-block";
        p.style.clear = "both";
        conversationDiv.scrollBy(0, 1000);
    }
    setStatus(content) {
        let statusP = document.getElementById("status");
        statusP.setText(content);
    }
}

const DEFAULT_SETTINGS = {
    customName: "Dual",
};
class MyPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.registerView("chat", (leaf) => {
                return new ChatView(leaf, this.settings.customName);
            });
            this.app.workspace.layoutReady && this.initLeaf(this.app.workspace);
            this.registerEvent(this.app.workspace.on("layout-ready", () => this.initLeaf(this.app.workspace)));
            this.addSettingTab(new SampleSettingTab(this.app, this));
            this.addCommand({
                id: "focus-dual-input",
                name: "Focus Dual input box",
                callback: () => {
                    document.getElementById("dual-input-box").focus();
                },
            });
        });
    }
    initLeaf(workspace) {
        if (workspace.getLeavesOfType("chat").length == 0) {
            workspace.getRightLeaf(false).setViewState({
                type: "chat",
            });
        }
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.app = app;
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl("h3", {
            text: "Follow these instructions to set up your Dual:",
        });
        new obsidian.Setting(containerEl)
            .setName("RECIPE TEST")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("TEST")
            .setClass("mod-cta")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            alert("Testing");
        })));
        new obsidian.Setting(containerEl)
            .setName("0. Install Python (3.8+).")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("Install Python")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://www.python.org/downloads/");
        }));
        new obsidian.Setting(containerEl)
            .setName("1. Copy snapshot.")
            .setDesc("Press the button to copy the entire vault as concatenated plain text.")
            .addButton((cb) => cb
            .setButtonText("Copy snapshot")
            .setClass("mod-cta")
            .onClick(() => {
            new obsidian.Notice("Loading files...");
            let concatenated = "";
            // TODO Use Promise.all() / map / reduce
            this.app.vault.getMarkdownFiles().forEach((element) => {
                this.app.vault.cachedRead(element).then((res) => {
                    res = res
                        .replace(/^---[\s\S]*---\n*/g, "")
                        .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
                        .replace(/\[\[(.*)\]\]/g, "$1")
                        .replace(/```([^`])*```\n*/g, "")
                        .replace(/\$([^$])*\$*/g, "");
                    concatenated = concatenated.concat(res, "\n\n");
                });
            });
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                concatenated = concatenated.slice(0, 5000000);
                concatenated = Utils.removeMd(concatenated);
                Utils.copyStringToClipboard(concatenated);
                new obsidian.Notice("Snapshot successfully copied to clipboard!");
            });
        }));
        new obsidian.Setting(containerEl)
            .setName("2. Derive the essence.")
            .setDesc("After following the online instructions, extract 'essence.zip' in '.obsidian/plugins/Dual/'.")
            .addButton((cb) => cb
            .setButtonText("Start alignment")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://colab.research.google.com/drive/1CObehan5gmYO-TvyyYq973a3h-_EYr9_?usp=sharing");
        }));
        new obsidian.Setting(containerEl)
            .setName("3. Configure the skeleton.")
            .setDesc("Run 'python3 -m pip install -r requirements.txt' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("4. Run the skeleton after you configured the essence.")
            .setDesc("Run 'python3 server.py --path /path/to/your/vault/' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("5. Restart Obsidian.")
            .setDesc("Head over to the right side panel to talk with your Dual!");
        containerEl.createEl("h3", {
            text: "Congratulations on setting up your Dual!",
        });
        new obsidian.Setting(containerEl)
            .setName("Custom name")
            .setDesc("Customize your Dual's name using the input box. Reload Obsidian for this to take effect.")
            .addText((text) => text
            .setPlaceholder("Dual")
            .setValue("")
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.customName = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName("Get involved!")
            .addButton((cb) => cb
            .setButtonText("Report bugs")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://github.com/Psionica/Dual/issues");
        }))
            .addButton((cb) => cb
            .setButtonText("Join Psionica")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://psionica.org/");
        }));
    }
}

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInV0aWxzLnRzIiwic2tpbGxzLnRzIiwidmlldy50cyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiZXhwb3J0IG1vZHVsZSBVdGlscyB7XG4gIGV4cG9ydCBmdW5jdGlvbiBjb3B5U3RyaW5nVG9DbGlwYm9hcmQoY29udGVudDogc3RyaW5nKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIGVsLnZhbHVlID0gY29udGVudDtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcIlwiKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICBlbC5zZWxlY3QoKTtcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gIH1cblxuICBpbnRlcmZhY2UgUmVtb3ZlTWRPcHRpb25zIHtcbiAgICBsaXN0VW5pY29kZUNoYXI/OiBzdHJpbmc7XG4gICAgc3RyaXBMaXN0TGVhZGVycz86IGJvb2xlYW47XG4gICAgZ2ZtPzogYm9vbGVhbjtcbiAgICB1c2VJbWdBbHRUZXh0PzogYm9vbGVhbjtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiByZW1vdmVNZChcbiAgICBtZDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFJlbW92ZU1kT3B0aW9ucyA9IHtcbiAgICAgIGxpc3RVbmljb2RlQ2hhcjogXCJcIixcbiAgICAgIHN0cmlwTGlzdExlYWRlcnM6IHRydWUsXG4gICAgICBnZm06IHRydWUsXG4gICAgICB1c2VJbWdBbHRUZXh0OiB0cnVlLFxuICAgIH1cbiAgKSB7XG4gICAgbGV0IG91dHB1dCA9IG1kXG4gICAgICAucmVwbGFjZSgvXi0tLVtcXHNcXFNdKi0tLVxcbiovZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXFtcXFtbXlxcfFxcW1xcXV0qXFx8KFteXFx8XFxbXFxdXSopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgIC5yZXBsYWNlKC9cXFtcXFsoLiopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgIC5yZXBsYWNlKC9gYGAoW15gXSkqYGBgXFxuKi9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL1xcJChbXiRdKSpcXCQqL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXigtXFxzKj98XFwqXFxzKj98X1xccyo/KXszLH1cXHMqJC9nbSwgXCJcIik7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKG9wdGlvbnMuc3RyaXBMaXN0TGVhZGVycykge1xuICAgICAgICBpZiAob3B0aW9ucy5saXN0VW5pY29kZUNoYXIpXG4gICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoXG4gICAgICAgICAgICAvXihbXFxzXFx0XSopKFtcXCpcXC1cXCtdfFxcZCtcXC4pXFxzKy9nbSxcbiAgICAgICAgICAgIG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyICsgXCIgJDFcIlxuICAgICAgICAgICk7XG4gICAgICAgIGVsc2Ugb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sIFwiJDFcIik7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5nZm0pIHtcbiAgICAgICAgb3V0cHV0ID0gb3V0cHV0XG4gICAgICAgICAgLy8gSGVhZGVyXG4gICAgICAgICAgLnJlcGxhY2UoL1xcbj17Mix9L2csIFwiXFxuXCIpXG4gICAgICAgICAgLy8gRmVuY2VkIGNvZGVibG9ja3NcbiAgICAgICAgICAucmVwbGFjZSgvfnszfS4qXFxuL2csIFwiXCIpXG4gICAgICAgICAgLy8gU3RyaWtldGhyb3VnaFxuICAgICAgICAgIC5yZXBsYWNlKC9+fi9nLCBcIlwiKVxuICAgICAgICAgIC8vIEZlbmNlZCBjb2RlYmxvY2tzXG4gICAgICAgICAgLnJlcGxhY2UoL2B7M30uKlxcbi9nLCBcIlwiKTtcbiAgICAgIH1cbiAgICAgIG91dHB1dCA9IG91dHB1dFxuICAgICAgICAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgIC5yZXBsYWNlKC88W14+XSo+L2csIFwiXCIpXG4gICAgICAgIC8vIFJlbW92ZSBzZXRleHQtc3R5bGUgaGVhZGVyc1xuICAgICAgICAucmVwbGFjZSgvXls9XFwtXXsyLH1cXHMqJC9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgZm9vdG5vdGVzP1xuICAgICAgICAucmVwbGFjZSgvXFxbXFxeLis/XFxdKFxcOiAuKj8kKT8vZywgXCJcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcc3swLDJ9XFxbLio/XFxdOiAuKj8kL2csIFwiXCIpXG4gICAgICAgIC8vIFJlbW92ZSBpbWFnZXNcbiAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgL1xcIVxcWyguKj8pXFxdW1xcW1xcKF0uKj9bXFxdXFwpXS9nLFxuICAgICAgICAgIG9wdGlvbnMudXNlSW1nQWx0VGV4dCA/IFwiJDFcIiA6IFwiXCJcbiAgICAgICAgKVxuICAgICAgICAvLyBSZW1vdmUgaW5saW5lIGxpbmtzXG4gICAgICAgIC5yZXBsYWNlKC9cXFsoLio/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZywgXCIkMVwiKVxuICAgICAgICAvLyBSZW1vdmUgYmxvY2txdW90ZXNcbiAgICAgICAgLnJlcGxhY2UoL15cXHN7MCwzfT5cXHM/L2csIFwiXCIpXG4gICAgICAgIC8vIFJlbW92ZSByZWZlcmVuY2Utc3R5bGUgbGlua3M/XG4gICAgICAgIC5yZXBsYWNlKC9eXFxzezEsMn1cXFsoLio/KVxcXTogKFxcUyspKCBcIi4qP1wiKT9cXHMqJC9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgYXR4LXN0eWxlIGhlYWRlcnNcbiAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgL14oXFxuKT9cXHN7MCx9I3sxLDZ9XFxzK3wgezAsfShcXG4pP1xcc3swLH0jezAsfSB7MCx9KFxcbik/XFxzezAsfSQvZ20sXG4gICAgICAgICAgXCIkMSQyJDNcIlxuICAgICAgICApXG4gICAgICAgIC8vIFJlbW92ZSBlbXBoYXNpcyAocmVwZWF0IHRoZSBsaW5lIHRvIHJlbW92ZSBkb3VibGUgZW1waGFzaXMpXG4gICAgICAgIC5yZXBsYWNlKC8oW1xcKl9dezEsM30pKFxcUy4qP1xcU3swLDF9KVxcMS9nLCBcIiQyXCIpXG4gICAgICAgIC5yZXBsYWNlKC8oW1xcKl9dezEsM30pKFxcUy4qP1xcU3swLDF9KVxcMS9nLCBcIiQyXCIpXG4gICAgICAgIC8vIFJlbW92ZSBjb2RlIGJsb2Nrc1xuICAgICAgICAucmVwbGFjZSgvKGB7Myx9KSguKj8pXFwxL2dtLCBcIiQyXCIpXG4gICAgICAgIC8vIFJlbW92ZSBpbmxpbmUgY29kZVxuICAgICAgICAucmVwbGFjZSgvYCguKz8pYC9nLCBcIiQxXCIpXG4gICAgICAgIC8vIFJlcGxhY2UgdHdvIG9yIG1vcmUgbmV3bGluZXMgd2l0aCBleGFjdGx5IHR3bz8gTm90IGVudGlyZWx5IHN1cmUgdGhpcyBiZWxvbmdzIGhlcmUuLi5cbiAgICAgICAgLnJlcGxhY2UoL1xcbnsyLH0vZywgXCJcXG5cXG5cIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIHJldHVybiBtZDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwLCBGcm9udE1hdHRlckNhY2hlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCJ1dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgU2tpbGxNYW5hZ2VyIHtcbiAgYXBwOiBBcHA7XG4gIHNraWxsTWV0YWRhdGE6IEZyb250TWF0dGVyQ2FjaGU7XG4gIHNraWxsQ29udGVudHM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICB9XG5cbiAgLy8gUmV0dXJucyByZXN1bHQgb2YgZm9sbG93aW5nIGEgY29tbWFuZFxuICBhc3luYyBmb2xsb3dDb21tYW5kKGNvbW1hbmQ6IHN0cmluZykge1xuICAgIHZhciBza2lsbFBhdGggPSBhd2FpdCB0aGlzLm1hdGNoQ29tbWFuZChjb21tYW5kKTtcbiAgICAvL2NvbnNvbGUubG9nKFwiRk9MTE9XSU5HXCIsIGNvbW1hbmQsIFwiVVNJTkdcIiwgc2tpbGxQYXRoKTtcbiAgICB2YXIgcmVzdWx0ID0gXCJtZWhcIjsgLy8gdGhpcy51c2VTa2lsbChza2lsbFBhdGgsIGNvbW1hbmQpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFVzZXMgYSBza2lsbCB3aGVuIGZvbGxvd2luZyBhIGNvbW1hbmRcbiAgYXN5bmMgdXNlU2tpbGwoc2tpbGxQYXRoOiBzdHJpbmcsIGNvbW1hbmQ6IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMubG9hZFNraWxsQ29udGVudHMoc2tpbGxQYXRoKTtcbiAgICB0aGlzLmxvYWRTa2lsbE1ldGFkYXRhKHNraWxsUGF0aCk7XG4gICAgdGhpcy5yZW1vdmVGcm9udE1hdHRlcigpO1xuXG4gICAgdmFyIHBhcmFtczogc3RyaW5nW10gPSBhd2FpdCB0aGlzLmdldFBhcmFtcyh0aGlzLnNraWxsQ29udGVudHMpO1xuICAgIHZhciBhcmdzOiBzdHJpbmdbXSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhjb21tYW5kLCBwYXJhbXMpO1xuICAgIHRoaXMuc2tpbGxDb250ZW50cyA9IHRoaXMucmVzb2x2ZVBhcmFtcyh0aGlzLnNraWxsQ29udGVudHMsIHBhcmFtcywgYXJncyk7XG5cbiAgICB2YXIgY29kZUJsb2NrcyA9IHRoaXMuZGV0ZWN0Q29kZUJsb2NrcygpO1xuICAgIHZhciBbc3BsaXRCbG9ja0xpc3QsIGJsb2NrVHlwZXNdID0gdGhpcy5zcGxpdEJsb2Nrcyhjb2RlQmxvY2tzKTtcbiAgICB2YXIgW3NwbGl0QmxvY2tMaXN0LCB0ZXh0U29GYXJdID0gYXdhaXQgdGhpcy5pbnRlcnByZXRCbG9ja3MoXG4gICAgICBzcGxpdEJsb2NrTGlzdCxcbiAgICAgIGJsb2NrVHlwZXNcbiAgICApO1xuXG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0TGFzdEJsb2NrKHNwbGl0QmxvY2tMaXN0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gV2FsayB0aHJvdWdoIGJsb2NrcyBhbmQgdGFrZSBhY3Rpb25zIGJhc2VkIG9uIHRoZW1cbiAgYXN5bmMgaW50ZXJwcmV0QmxvY2tzKFxuICAgIHNwbGl0QmxvY2tzOiBzdHJpbmdbXSxcbiAgICBibG9ja1R5cGVzOiBzdHJpbmdbXVxuICApOiBQcm9taXNlPFtzdHJpbmdbXSwgc3RyaW5nXT4ge1xuICAgIHZhciBuZXdUZXh0LFxuICAgICAgdGV4dFNvRmFyOiBzdHJpbmcgPSBcIlwiO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNwbGl0QmxvY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbmV3VGV4dCA9IHRoaXMucmVzb2x2ZUJvZHlSZWZlcmVuY2VzKFxuICAgICAgICBzcGxpdEJsb2NrcyxcbiAgICAgICAgYmxvY2tUeXBlcyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHRleHRTb0ZhclxuICAgICAgKTtcbiAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IG5ld1RleHQ7XG5cbiAgICAgIHN3aXRjaCAoYmxvY2tUeXBlc1tpbmRleF0pIHtcbiAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KG5ld1RleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwianNcIjpcbiAgICAgICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBhd2FpdCB0aGlzLndhaXRFdmFsKHNwbGl0QmxvY2tzW2luZGV4XSk7XG4gICAgICAgICAgdGV4dFNvRmFyID0gdGV4dFNvRmFyLmNvbmNhdChzcGxpdEJsb2Nrc1tpbmRleF0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZHVhbFwiOlxuICAgICAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IGF3YWl0IHRoaXMuZm9sbG93Q29tbWFuZChuZXdUZXh0KTtcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KHNwbGl0QmxvY2tzW2luZGV4XSArIFwiIFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3NwbGl0QmxvY2tzLCB0ZXh0U29GYXJdO1xuICB9XG5cbiAgLy8gV2FpdCBmb3IgZXZhbCB3cmFwcGVyXG4gIGFzeW5jIHdhaXRFdmFsKHRvRXZhbDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gZXZhbCh0b0V2YWwpO1xuICB9XG5cbiAgLy8gRmlsbCBpbiBcIiNOXCIgc3RydWN0dXJlcyBpbiBza2lsbCBib2R5IGJhc2VkIG9uIHJlZmVyZW5jZSBjb2RlIGJsb2NrIHJlc3VsdFxuICByZXNvbHZlQm9keVJlZmVyZW5jZXMoXG4gICAgc3BsaXRCbG9ja3M6IHN0cmluZ1tdLFxuICAgIGJsb2NrVHlwZXM6IHN0cmluZ1tdLFxuICAgIHJlYWNoZWRJbmRleDogbnVtYmVyLFxuICAgIHRleHRTb0Zhcjogc3RyaW5nXG4gICkge1xuICAgIHZhciBuZXdUZXh0ID0gc3BsaXRCbG9ja3NbcmVhY2hlZEluZGV4XTtcbiAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKFwiIzBcIiwgdGV4dFNvRmFyKTtcblxuICAgIGZvciAoXG4gICAgICBsZXQgcmVmZXJlbmNlZENvZGVCbG9jayA9IDE7XG4gICAgICByZWZlcmVuY2VkQ29kZUJsb2NrIDw9IHJlYWNoZWRJbmRleDtcbiAgICAgIHJlZmVyZW5jZWRDb2RlQmxvY2srK1xuICAgICkge1xuICAgICAgaWYgKG5ld1RleHQuaW5jbHVkZXMoXCIjXCIgKyByZWZlcmVuY2VkQ29kZUJsb2NrKSkge1xuICAgICAgICB2YXIgcmVtYWluaW5nQ29kZUJsb2NrcyA9IHJlZmVyZW5jZWRDb2RlQmxvY2s7XG5cbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgYmxvY2tJbmRleCA9IDA7XG4gICAgICAgICAgYmxvY2tJbmRleCA8IHNwbGl0QmxvY2tzLmxlbmd0aCAmJiByZW1haW5pbmdDb2RlQmxvY2tzID4gMDtcbiAgICAgICAgICBibG9ja0luZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3BsaXRCbG9ja3NbYmxvY2tJbmRleF0udG9TdHJpbmcoKS50cmltKCkgIT0gXCJcIiB8fFxuICAgICAgICAgICAgYmxvY2tUeXBlc1tibG9ja0luZGV4XSAhPSBcInRleHRcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVtYWluaW5nQ29kZUJsb2Nrcy0tO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZW1haW5pbmdDb2RlQmxvY2tzID09IDApIHtcbiAgICAgICAgICAgIG5ld1RleHQgPSBuZXdUZXh0LnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiI1wiICsgcmVmZXJlbmNlZENvZGVCbG9jayxcbiAgICAgICAgICAgICAgc3BsaXRCbG9ja3NbYmxvY2tJbmRleF1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld1RleHQ7XG4gIH1cblxuICBnZXRMYXN0QmxvY2soc3BsaXRCbG9ja3M6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChcbiAgICAgIGxldCBibG9ja0luZGV4ID0gc3BsaXRCbG9ja3MubGVuZ3RoIC0gMTtcbiAgICAgIGJsb2NrSW5kZXggPj0gMDtcbiAgICAgIGJsb2NrSW5kZXgtLVxuICAgICkge1xuICAgICAgaWYgKHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdLnRvU3RyaW5nKCkudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIGFsbCBibG9ja3Mgd2l0aCB0eXBlIGFuZCBjb250ZW50c1xuICBzcGxpdEJsb2NrcyhcbiAgICBjb2RlQmxvY2tzOiBbXG4gICAgICBjb2RlQmxvY2s6IHsgdHlwZTogc3RyaW5nOyBjb250ZW50czogc3RyaW5nOyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9XG4gICAgXVxuICApIHtcbiAgICB2YXIgc3BsaXRCbG9ja0xpc3QgPSBbdGhpcy5za2lsbENvbnRlbnRzXSxcbiAgICAgIGJsb2NrVHlwZXMgPSBbXCJ0ZXh0XCJdO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvZGVCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBzcGxpdEJsb2NrTGlzdC5wdXNoKGNvZGVCbG9ja3NbaW5kZXhdW1wiY29udGVudHNcIl0pO1xuICAgICAgYmxvY2tUeXBlcy5wdXNoKGNvZGVCbG9ja3NbaW5kZXhdW1widHlwZVwiXSk7XG5cbiAgICAgIHNwbGl0QmxvY2tMaXN0LnB1c2goXG4gICAgICAgIHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0uc2xpY2UoY29kZUJsb2Nrc1tpbmRleF1bXCJlbmRcIl0pXG4gICAgICApO1xuICAgICAgYmxvY2tUeXBlcy5wdXNoKFwidGV4dFwiKTtcblxuICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XSA9IHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0uc2xpY2UoXG4gICAgICAgIDAsXG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl1cbiAgICAgICk7XG5cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleEZ1dHVyZSA9IGluZGV4ICsgMTtcbiAgICAgICAgaW5kZXhGdXR1cmUgPCBjb2RlQmxvY2tzLmxlbmd0aDtcbiAgICAgICAgaW5kZXhGdXR1cmUrK1xuICAgICAgKSB7XG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhGdXR1cmVdW1wic3RhcnRcIl0gLT1cbiAgICAgICAgICBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLmxlbmd0aCArXG4gICAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJlbmRcIl0gLVxuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl07XG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhGdXR1cmVdW1wiZW5kXCJdIC09XG4gICAgICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5sZW5ndGggK1xuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdIC1cbiAgICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcInN0YXJ0XCJdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbc3BsaXRCbG9ja0xpc3QsIGJsb2NrVHlwZXNdO1xuICB9XG5cbiAgLy8gR2V0IGEgbGlzdCBvZiBjb2RlIGJsb2NrcyB3aXRoIGRldGFpbHNcbiAgZGV0ZWN0Q29kZUJsb2NrcygpIHtcbiAgICBsZXQgbSxcbiAgICAgIHJlczogYW55ID0gW107XG4gICAgY29uc3QgcmUgPSBSZWdFeHAoXG4gICAgICAvXFxgXFxgXFxgKD88dHlwZT5cXHcrKSg/PGNvbnRlbnRzPig/OlxcYFteXFxgXXxbXlxcYF0pKilcXGBcXGBcXGAvLFxuICAgICAgXCJnXCJcbiAgICApO1xuXG4gICAgZG8ge1xuICAgICAgbSA9IHJlLmV4ZWModGhpcy5za2lsbENvbnRlbnRzKTtcbiAgICAgIGlmIChtKSB7XG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoe1xuICAgICAgICAgIHR5cGU6IG1bXCJncm91cHNcIl1bXCJ0eXBlXCJdLFxuICAgICAgICAgIGNvbnRlbnRzOiBtW1wiZ3JvdXBzXCJdW1wiY29udGVudHNcIl0udHJpbSgpLFxuICAgICAgICAgIHN0YXJ0OiBtW1wiaW5kZXhcIl0sXG4gICAgICAgICAgZW5kOiBtW1wiaW5kZXhcIl0gKyBtWzBdLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobSk7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLy8gR2V0IGxpc3Qgb2YgcGFyYW1ldGVycyBtZW50aW9uZWQgaW4gYSBza2lsbFxuICBhc3luYyBnZXRQYXJhbXMoZG9jdW1lbnQ6IHN0cmluZykge1xuICAgIHZhciByZSA9IC9cXCpbYS16QS1aMC05XFxzXSpcXCovZztcbiAgICB2YXIgcGFyYW1zID0gZG9jdW1lbnQubWF0Y2gocmUpO1xuXG4gICAgaWYgKHBhcmFtcyAhPSBudWxsKSB7XG4gICAgICBwYXJhbXMuZm9yRWFjaCgodmFsLCBpbmRleCwgcGFyYW1zKSA9PiB7XG4gICAgICAgIHBhcmFtc1tpbmRleF0gPSB2YWwuc3Vic3RyaW5nKDEsIHZhbC5sZW5ndGggLSAxKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8vIFBhcnNlIGFyZ3VtZW50cyBmcm9tIHRoZSBjb21tYW5kXG4gIGFzeW5jIGdldEFyZ3MoY29tbWFuZDogc3RyaW5nLCBwYXJhbXM6IHN0cmluZ1tdKSB7XG4gICAgdmFyIGFyZ3M6IHN0cmluZ1tdID0gW10sXG4gICAgICByZXM7XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGFyYW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzID0gYXdhaXQgdGhpcy5nZXRBcmcoY29tbWFuZCwgcGFyYW1zW2luZGV4XSk7XG4gICAgICBhcmdzID0gYXJncy5jb25jYXQocmVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIC8vIFBhcnNlIG9uZSBhcmd1bWVudCBmcm9tIHRoZSBjb21tYW5kXG4gIGFzeW5jIGdldEFyZyhjb21tYW5kOiBzdHJpbmcsIHBhcmFtOiBzdHJpbmcpIHtcbiAgICBpZiAocGFyYW0gPT0gT2JqZWN0LmtleXModGhpcy5za2lsbE1ldGFkYXRhWzBdKVswXSkge1xuICAgICAgcmV0dXJuIGNvbW1hbmQ7XG4gICAgfVxuXG4gICAgdmFyIHByb21wdDogc3RyaW5nID0gdGhpcy5nZXRQYXJhbVByb21wdChjb21tYW5kLCBwYXJhbSk7XG5cbiAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cDovLzEyNy4wLjAuMTozMDMwL2dlbmVyYXRlL1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHByb21wdDogcHJvbXB0LFxuICAgICAgICBjb250ZXh0OiBbY29tbWFuZF0sXG4gICAgICAgIGdlbmVyYXRlX3BhcmFncmFwaHM6IDEsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIHZhciBjb250ZW50ID0gYXdhaXQgcmF3UmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50W1wicmVzdWx0XCJdWzBdO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNwbGl0KCdcIicpWzBdLnRyaW0oKTtcblxuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgZ2V0UGFyYW1Qcm9tcHQoY29tbWFuZDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKSB7XG4gICAgdmFyIGNvbW1hbmRQYXJhbTogc3RyaW5nO1xuICAgIHZhciBwcm9tcHQ6IHN0cmluZztcblxuICAgIC8vIFRPRE8gZG8gYWJsYXRpb25cbiAgICBwcm9tcHQgPSBcIkV4dHJhY3QgXCIgKyBwYXJhbSArIFwiIGZyb20gdGhlIGZvbGxvd2luZzpcXG5cXG5cIjtcblxuICAgIGNvbW1hbmRQYXJhbSA9IE9iamVjdC5rZXlzKHRoaXMuc2tpbGxNZXRhZGF0YVswXSlbMF07XG5cbiAgICB0aGlzLnNraWxsTWV0YWRhdGEuZm9yRWFjaCgodmFsOiBhbnksIGluZGV4OiBhbnksIGFycmF5OiBhbnkpID0+IHtcbiAgICAgIGlmIChjb21tYW5kUGFyYW0gaW4gdmFsICYmIHBhcmFtIGluIHZhbCkge1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+PSAwLjYpIHtcbiAgICAgICAgICBwcm9tcHQgKz0gdmFsW2NvbW1hbmRQYXJhbV0gKyBcIiA9PiBcIiArIHZhbFtwYXJhbV0gKyAnXCJcXG5cXG4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21wdCArPSB2YWxbY29tbWFuZFBhcmFtXSArIFwiID0+ICBcIiArIHZhbFtwYXJhbV0gKyAnXCJcXG5cXG4nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwcm9tcHQgKz0gY29tbWFuZCArIFwiID0+IFwiO1xuICAgIHJldHVybiBwcm9tcHQ7XG4gIH1cblxuICAvLyBHZXQgdHdvIHBhcmFsbGVsIGxpc3RzIG9mIGNvbW1hbmQgZXhhbXBsZXMgYW5kIHRoZSBwYXRocyB0aGV5IG9yaWdpbmF0ZSBmcm9tXG4gIGdldENvbW1hbmRFeGFtcGxlcygpIHtcbiAgICB2YXIgY29tbWFuZEV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHZhciBza2lsbFBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHZhciBjb21tYW5kRXhhbXBsZVBhcmFtOiBzdHJpbmc7XG4gICAgdmFyIG5ld0NvbW1hbmRFeGFtcGxlOiBzdHJpbmc7XG5cbiAgICB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwic2tpbGxzZXRcIikpIHtcbiAgICAgICAgY29tbWFuZEV4YW1wbGVQYXJhbSA9IE9iamVjdC5rZXlzKFxuICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpLmZyb250bWF0dGVyWzBdXG4gICAgICAgIClbMF07XG5cbiAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZVxuICAgICAgICAgIC5nZXRGaWxlQ2FjaGUoZmlsZSlcbiAgICAgICAgICAuZnJvbnRtYXR0ZXIuZm9yRWFjaCgodmFsOiBhbnksIGluZGV4OiBhbnksIGFycmF5OiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb21tYW5kRXhhbXBsZVBhcmFtIGluIHZhbCkge1xuICAgICAgICAgICAgICBuZXdDb21tYW5kRXhhbXBsZSA9IHZhbFtjb21tYW5kRXhhbXBsZVBhcmFtXTtcblxuICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyh2YWwpLmZvckVhY2goKGZpZWxkLCBmaWVsZEluZGV4LCBmaWVsZEFycmF5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkSW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBuZXdDb21tYW5kRXhhbXBsZSA9IG5ld0NvbW1hbmRFeGFtcGxlLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkWzFdLFxuICAgICAgICAgICAgICAgICAgICBcIiBfX18gXCJcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjb21tYW5kRXhhbXBsZXMgPSBjb21tYW5kRXhhbXBsZXMuY29uY2F0KG5ld0NvbW1hbmRFeGFtcGxlKTtcbiAgICAgICAgICAgICAgc2tpbGxQYXRocyA9IHNraWxsUGF0aHMuY29uY2F0KGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gW2NvbW1hbmRFeGFtcGxlcywgc2tpbGxQYXRoc107XG4gIH1cblxuICAvLyBHZXQgY29udGVudHMgb2YgYSBza2lsbCBhdCBhIHBhdGhcbiAgYXN5bmMgbG9hZFNraWxsQ29udGVudHMoc2tpbGxQYXRoOiBzdHJpbmcpIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gc2tpbGxQYXRoKSB7XG4gICAgICAgIHRoaXMuc2tpbGxDb250ZW50cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoXG4gICAgICAgICAgbWFya2Rvd25GaWxlc1tpbmRleF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBHZXQgbWV0YWRhdGEgb2YgYSBza2lsbCBhdCBhIHBhdGhcbiAgbG9hZFNraWxsTWV0YWRhdGEoc2tpbGxQYXRoOiBzdHJpbmcpIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gc2tpbGxQYXRoKSB7XG4gICAgICAgIHRoaXMuc2tpbGxNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKFxuICAgICAgICAgIG1hcmtkb3duRmlsZXNbaW5kZXhdXG4gICAgICAgICkuZnJvbnRtYXR0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCBjbG9zZXN0IHNraWxsIHRvIGEgZ2l2ZW4gY29tbWFuZCB0aHJvdWdoIGV4YW1wbGVzXG4gIGFzeW5jIG1hdGNoQ29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICAvLyBIaWRlIHF1b3RlZCBjb250ZW50IGZyb20gY29tbWFuZCBtYXRjaGluZ1xuICAgIGNvbW1hbmQgPSBjb21tYW5kLnJlcGxhY2UoL1wiW1xcc1xcU10qXCIvLCAnXCJcIicpO1xuICAgIHZhciBleGFtcGxlUGF0aFBhaXJzID0gdGhpcy5nZXRDb21tYW5kRXhhbXBsZXMoKTtcbiAgICB2YXIgZXhhbXBsZXMgPSBleGFtcGxlUGF0aFBhaXJzWzBdLFxuICAgICAgcGF0aHMgPSBleGFtcGxlUGF0aFBhaXJzWzFdO1xuXG4gICAgY29uc3Qgc2VhcmNoUHJvbXB0ID0gZXhhbXBsZXNcbiAgICAgIC5tYXAoKGUpID0+IHtcbiAgICAgICAgcmV0dXJuIGUgKyBcIiA9PiBcIiArIGUgKyBcIlxcblxcblwiO1xuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCAtMSlcbiAgICAgIC5qb2luKFwiXCIpO1xuXG4gICAgY29uc3QgcmF3UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly8xMjcuMC4wLjE6MzAzMC9zZWFyY2gvXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcHJvbXB0OiBzZWFyY2hQcm9tcHQgKyBjb21tYW5kICsgXCIgPT5cIixcbiAgICAgICAgY29udGV4dDogZXhhbXBsZXMubWFwKChlKSA9PiBcIiBcIiArIGUpLFxuICAgICAgICBnZW5lcmF0ZV9wYXJhZ3JhcGhzOiAxLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIlVTSU5HXCIsIHNlYXJjaFByb21wdCArIGNvbW1hbmQgKyBcIiA9PlwiKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiRk9VTkRcIixcbiAgICAgIGV4YW1wbGVzW2NvbnRlbnRbXCJvdXRwdXRcIl1bMF1dLFxuICAgICAgcGF0aHNbY29udGVudFtcIm91dHB1dFwiXVswXV1cbiAgICApO1xuICAgIHJldHVybiBwYXRoc1tjb250ZW50W1wib3V0cHV0XCJdWzBdXTtcbiAgfVxuXG4gIC8vIFN1YnN0aXR1dGUgcGFyYW1ldGVycyB3aXRoIGFyZ3VtZW50cyBpbiBhIHNraWxsXG4gIHJlc29sdmVQYXJhbXMoZG9jdW1lbnQ6IHN0cmluZywgcGFyYW1zOiBzdHJpbmdbXSwgYXJnczogc3RyaW5nW10pIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGFyYW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIHJlID0gUmVnRXhwKFwiXFxcXCpcIiArIHBhcmFtc1tpbmRleF0gKyBcIlxcXFwqXCIsIFwiZ1wiKTtcbiAgICAgIGRvY3VtZW50ID0gZG9jdW1lbnQucmVwbGFjZShyZSwgYXJnc1tpbmRleF0pO1xuICAgIH1cblxuICAgIHJldHVybiBkb2N1bWVudDtcbiAgfVxuXG4gIHJlbW92ZUZyb250TWF0dGVyKCkge1xuICAgIHRoaXMuc2tpbGxDb250ZW50cyA9IHRoaXMuc2tpbGxDb250ZW50cy5yZXBsYWNlKC8tLS1bXFxzXFxTXSotLS0vZywgXCJcIik7XG4gIH1cblxuICBhc3luYyBnZXROb3RlcygpIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICB2YXIgbm90ZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbWFya2Rvd25GaWxlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICghbWFya2Rvd25GaWxlc1tpbmRleF0ucGF0aC5zdGFydHNXaXRoKFwic2tpbGxzZXRcIikpIHtcbiAgICAgICAgdmFyIG5vdGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKG1hcmtkb3duRmlsZXNbaW5kZXhdKTtcbiAgICAgICAgbm90ZSA9IFV0aWxzLnJlbW92ZU1kKG5vdGUpO1xuICAgICAgICBub3Rlcy5wdXNoKG5vdGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub3RlcztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgSXRlbVZpZXcsXG4gIFdvcmtzcGFjZUxlYWYsXG4gIE5vdGljZSxcbiAgVGV4dEFyZWFDb21wb25lbnQsXG4gIE1hcmtkb3duUmVuZGVyZXIsXG4gIENvbXBvbmVudCxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTa2lsbE1hbmFnZXIgfSBmcm9tIFwic2tpbGxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYXRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBjdXN0b21OYW1lID0gXCJcIjtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBjdXN0b21OYW1lOiBzdHJpbmcpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLmN1c3RvbU5hbWUgPSBjdXN0b21OYW1lO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjaGF0XCI7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkR1YWxcIjtcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJpbmZvXCI7XG4gIH1cblxuICBzZW5kTWVzc2FnZSgpOiB2b2lkIHtcbiAgICBsZXQgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1YWwtaW5wdXQtYm94XCIpO1xuICAgIGxldCByZXBsaWVkID0gZmFsc2U7XG5cbiAgICBpZiAoaW5wdXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgdGhpcy5kcmF3TWVzc2FnZShpbnB1dC52YWx1ZSwgXCJyaWdodFwiKTtcblxuICAgICAgbGV0IHR5cGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKVxuICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHJlcGxpZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXR1cyhcInR5cGluZy4uLlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBza2lsbE1hbmFnZXIgPSBuZXcgU2tpbGxNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICAgIHNraWxsTWFuYWdlci5mb2xsb3dDb21tYW5kKGlucHV0LnZhbHVlKS50aGVuKChyZXNwb25zZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJlc3BvbnNlXG4gICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAuc3BsaXQoXCJcXG5cXG5cIilcbiAgICAgICAgICAuZm9yRWFjaCgocmVzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3TWVzc2FnZShyZXMsIFwibGVmdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICByZXBsaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoXCJvbmxpbmVcIik7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1ha2VSZXF1ZXN0KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEpTT04+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvcXVlcnkvXCIgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZUpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlSlNPTjtcbiAgfVxuXG4gIGxvYWQoKTogdm9pZCB7XG4gICAgc3VwZXIubG9hZCgpO1xuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cbiAgICBjb25zdCByb290RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29uc3QgaGVhZGVyRGl2ID0gcm9vdEVsLmNyZWF0ZURpdih7IGNsczogXCJuYXYtaGVhZGVyXCIgfSk7XG4gICAgY29uc3QgZm9vdGVyRGl2ID0gcm9vdEVsLmNyZWF0ZURpdih7IGNsczogXCJuYXYtaGVhZGVyXCIgfSk7XG5cbiAgICBsZXQgaGVhZGVyID0gaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDNcIik7XG4gICAgaGVhZGVyLmFwcGVuZFRleHQodGhpcy5jdXN0b21OYW1lKTtcbiAgICBoZWFkZXIuc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgaGVhZGVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMHB4XCI7XG4gICAgaGVhZGVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMHB4XCI7XG4gICAgaGVhZGVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGhlYWRlci5zdHlsZS50b3AgPSBcIjE1cHhcIjtcblxuICAgIGxldCBzdGF0dXMgPSBoZWFkZXJEaXYuY3JlYXRlRWwoXCJoNlwiKTtcbiAgICBzdGF0dXMuaWQgPSBcInN0YXR1c1wiO1xuICAgIHN0YXR1cy5hcHBlbmRUZXh0KFwib25saW5lXCIpO1xuICAgIHN0YXR1cy5zdHlsZS50ZXh0QWxpZ24gPSBcImxlZnRcIjtcbiAgICBzdGF0dXMuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcbiAgICBzdGF0dXMuc3R5bGUubWFyZ2luQm90dG9tID0gXCI1cHhcIjtcbiAgICBzdGF0dXMuc3R5bGUuY29sb3IgPSBcImdyZXlcIjtcblxuICAgIGxldCBjb252ZXJzYXRpb25EaXYgPSBoZWFkZXJEaXYuY3JlYXRlRGl2KHsgY2xzOiBcIm5hdi1oZWFkZXJcIiB9KTtcbiAgICBjb252ZXJzYXRpb25EaXYuaWQgPSBcImNvbnZlcnNhdGlvbkRpdlwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS5wYWRkaW5nID0gXCIwXCI7XG4gICAgY29udmVyc2F0aW9uRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KVwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUubGVmdCA9IFwiMFwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS5wYWRkaW5nTGVmdCA9IFwiMTBweFwiO1xuICAgIGNvbnZlcnNhdGlvbkRpdi5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUub3ZlcmZsb3dZID0gXCJzY3JvbGxcIjtcbiAgICBjb252ZXJzYXRpb25EaXYuc3R5bGUuaGVpZ2h0ID0gXCJjYWxjKDEwMCUgLSAxMTBweClcIjtcblxuICAgIGxldCBpbnB1dCA9IGZvb3RlckRpdi5jcmVhdGVFbChcImlucHV0XCIpO1xuICAgIGlucHV0LmlkID0gXCJkdWFsLWlucHV0LWJveFwiO1xuICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICBpbnB1dC5zdHlsZS5mb250U2l6ZSA9IFwiMC44ZW1cIjtcbiAgICBpbnB1dC5zdHlsZS5wYWRkaW5nSW5saW5lU3RhcnQgPSBcIjIlXCI7XG4gICAgaW5wdXQuc3R5bGUucGFkZGluZ0lubGluZUVuZCA9IFwiMiVcIjtcbiAgICBpbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjBweFwiO1xuICAgIGlucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMTBweFwiO1xuICAgIGlucHV0LnN0eWxlLm1heFdpZHRoID0gXCI2OCVcIjtcbiAgICBpbnB1dC5zdHlsZS5taW5XaWR0aCA9IFwiNjglXCI7XG4gICAgaW5wdXQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgaW5wdXQuc3R5bGUuYm90dG9tID0gXCIwXCI7XG4gICAgaW5wdXQuc3R5bGUubGVmdCA9IFwiNSVcIjtcblxuICAgIGxldCBidXR0b24gPSBmb290ZXJEaXYuY3JlYXRlRWwoXCJidXR0b25cIik7XG4gICAgYnV0dG9uLmFwcGVuZFRleHQoXCJTZW5kXCIpO1xuICAgIGJ1dHRvbi5pZCA9IFwic2VuZC1idXR0b25cIjtcbiAgICBidXR0b24uc3R5bGUuYWxpZ25JdGVtcyA9IFwibGVmdFwiO1xuICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nSW5saW5lU3RhcnQgPSBcIjIlXCI7XG4gICAgYnV0dG9uLnN0eWxlLnBhZGRpbmdJbmxpbmVFbmQgPSBcIjIlXCI7XG4gICAgYnV0dG9uLnN0eWxlLm1hcmdpblRvcCA9IFwiMHB4XCI7XG4gICAgYnV0dG9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMTBweFwiO1xuICAgIGJ1dHRvbi5zdHlsZS53aWR0aCA9IFwiMjAlXCI7XG4gICAgYnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGJ1dHRvbi5zdHlsZS5ib3R0b20gPSBcIjBcIjtcbiAgICBidXR0b24uc3R5bGUubGVmdCA9IFwiNzUlXCI7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoYnV0dG9uLCBcImNsaWNrXCIsICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKSk7XG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGlucHV0LCBcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09IFwiRW50ZXJcIikge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm9vdEVsKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd01lc3NhZ2UoY29udGVudDogc3RyaW5nLCBzaWRlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgY29udmVyc2F0aW9uRGl2ID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udmVyc2F0aW9uRGl2XCIpXG4gICAgKTtcbiAgICBsZXQgcCA9IGNvbnZlcnNhdGlvbkRpdi5jcmVhdGVFbChcInBcIik7XG5cbiAgICBwLnN0eWxlLmJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuICAgIHAuc3R5bGUubWF4V2lkdGggPSBcIjkwJVwiO1xuXG4gICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcbiAgICAgIGNvbnRlbnQsXG4gICAgICBwLFxuICAgICAgdGhpcy5hcHAudmF1bHQuZ2V0Um9vdCgpLnBhdGgsXG4gICAgICBuZXcgQ29tcG9uZW50KClcbiAgICApO1xuXG4gICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCBwLmNoaWxkcmVuLmxlbmd0aDsgY2hpbGRJbmRleCsrKSB7XG4gICAgICBwLmNoaWxkcmVuW2NoaWxkSW5kZXhdLnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICBcIm1hcmdpbjogNXB4OyBtYXJnaW4tbGVmdDogOHB4OyBtYXJnaW4tcmlnaHQ6IDhweFwiXG4gICAgICApO1xuICAgIH1cblxuICAgIHAuc3R5bGUudXNlclNlbGVjdCA9IFwidGV4dFwiO1xuICAgIHAuc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgcC5zdHlsZS5mb250U2l6ZSA9IFwiMC44ZW1cIjtcbiAgICBwLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNXB4XCI7XG4gICAgcC5zdHlsZS5saW5lSGVpZ2h0ID0gXCIxOHB4XCI7XG4gICAgcC5zdHlsZS5wYWRkaW5nID0gXCIwcHhcIjtcbiAgICBwLnN0eWxlLnBhZGRpbmdCbG9ja1N0YXJ0ID0gXCIwcHhcIjtcbiAgICBwLnN0eWxlLm1hcmdpblRvcCA9IFwiNXB4XCI7XG4gICAgcC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjVweFwiO1xuXG4gICAgaWYgKHNpZGUgPT0gXCJyaWdodFwiKSB7XG4gICAgICBwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgfVxuXG4gICAgaWYgKHNpZGUgPT0gXCJyaWdodFwiKSB7XG4gICAgICBwLnN0eWxlLmZsb2F0ID0gXCJyaWdodFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBwLnN0eWxlLmZsb2F0ID0gXCJsZWZ0XCI7XG4gICAgfVxuXG4gICAgcC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICBwLnN0eWxlLmNsZWFyID0gXCJib3RoXCI7XG5cbiAgICBjb252ZXJzYXRpb25EaXYuc2Nyb2xsQnkoMCwgMTAwMCk7XG4gIH1cblxuICBwcml2YXRlIHNldFN0YXR1cyhjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgc3RhdHVzUCA9IDxIVE1MUGFyYWdyYXBoRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKTtcbiAgICBzdGF0dXNQLnNldFRleHQoY29udGVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEFwcCxcbiAgTm90aWNlLFxuICBQbHVnaW4sXG4gIFBsdWdpblNldHRpbmdUYWIsXG4gIFNldHRpbmcsXG4gIFdvcmtzcGFjZSxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQ2hhdFZpZXcgZnJvbSBcInZpZXdcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcInV0aWxzXCI7XG5cbmludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcbiAgY3VzdG9tTmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuICBjdXN0b21OYW1lOiBcIkR1YWxcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcImNoYXRcIiwgKGxlYWYpID0+IHtcbiAgICAgIHJldHVybiBuZXcgQ2hhdFZpZXcobGVhZiwgdGhpcy5zZXR0aW5ncy5jdXN0b21OYW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5sYXlvdXRSZWFkeSAmJiB0aGlzLmluaXRMZWFmKHRoaXMuYXBwLndvcmtzcGFjZSk7XG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LXJlYWR5XCIsICgpID0+XG4gICAgICAgIHRoaXMuaW5pdExlYWYodGhpcy5hcHAud29ya3NwYWNlKVxuICAgICAgKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJmb2N1cy1kdWFsLWlucHV0XCIsXG4gICAgICBuYW1lOiBcIkZvY3VzIER1YWwgaW5wdXQgYm94XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1YWwtaW5wdXQtYm94XCIpLmZvY3VzKCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgaW5pdExlYWYod29ya3NwYWNlOiBXb3Jrc3BhY2UpOiB2b2lkIHtcbiAgICBpZiAod29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImNoYXRcIikubGVuZ3RoID09IDApIHtcbiAgICAgIHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFwiY2hhdFwiLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IE15UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcbiAgICAgIHRleHQ6IFwiRm9sbG93IHRoZXNlIGluc3RydWN0aW9ucyB0byBzZXQgdXAgeW91ciBEdWFsOlwiLFxuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlJFQ0lQRSBURVNUXCIpXG4gICAgICAuc2V0RGVzYyhcIlByZXNzIHRoZSBidXR0b24gdG8gaGVhZCBvdmVyIHRvIHRoZSBkb3dubG9hZCBwYWdlLlwiKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJURVNUXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGFsZXJ0KFwiVGVzdGluZ1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCIwLiBJbnN0YWxsIFB5dGhvbiAoMy44KykuXCIpXG4gICAgICAuc2V0RGVzYyhcIlByZXNzIHRoZSBidXR0b24gdG8gaGVhZCBvdmVyIHRvIHRoZSBkb3dubG9hZCBwYWdlLlwiKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJJbnN0YWxsIFB5dGhvblwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LnB5dGhvbi5vcmcvZG93bmxvYWRzL1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCIxLiBDb3B5IHNuYXBzaG90LlwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiUHJlc3MgdGhlIGJ1dHRvbiB0byBjb3B5IHRoZSBlbnRpcmUgdmF1bHQgYXMgY29uY2F0ZW5hdGVkIHBsYWluIHRleHQuXCJcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29weSBzbmFwc2hvdFwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTG9hZGluZyBmaWxlcy4uLlwiKTtcblxuICAgICAgICAgICAgbGV0IGNvbmNhdGVuYXRlZCA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gVXNlIFByb21pc2UuYWxsKCkgLyBtYXAgLyByZWR1Y2VcblxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChlbGVtZW50KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICByZXMgPSByZXNcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9eLS0tW1xcc1xcU10qLS0tXFxuKi9nLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1xcW1teXFx8XFxbXFxdXSpcXHwoW15cXHxcXFtcXF1dKilcXF1cXF0vZywgXCIkMVwiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1xcWyguKilcXF1cXF0vZywgXCIkMVwiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2BgYChbXmBdKSpgYGBcXG4qL2csIFwiXCIpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkKFteJF0pKlxcJCovZywgXCJcIik7XG5cbiAgICAgICAgICAgICAgICBjb25jYXRlbmF0ZWQgPSBjb25jYXRlbmF0ZWQuY29uY2F0KHJlcywgXCJcXG5cXG5cIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBjb3B5UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApXG4gICAgICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBjb25jYXRlbmF0ZWQgPSBjb25jYXRlbmF0ZWQuc2xpY2UoMCwgNTAwMDAwMCk7XG4gICAgICAgICAgICAgIGNvbmNhdGVuYXRlZCA9IFV0aWxzLnJlbW92ZU1kKGNvbmNhdGVuYXRlZCk7XG4gICAgICAgICAgICAgIFV0aWxzLmNvcHlTdHJpbmdUb0NsaXBib2FyZChjb25jYXRlbmF0ZWQpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU25hcHNob3Qgc3VjY2Vzc2Z1bGx5IGNvcGllZCB0byBjbGlwYm9hcmQhXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMi4gRGVyaXZlIHRoZSBlc3NlbmNlLlwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiQWZ0ZXIgZm9sbG93aW5nIHRoZSBvbmxpbmUgaW5zdHJ1Y3Rpb25zLCBleHRyYWN0ICdlc3NlbmNlLnppcCcgaW4gJy5vYnNpZGlhbi9wbHVnaW5zL0R1YWwvJy5cIlxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJTdGFydCBhbGlnbm1lbnRcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oXG4gICAgICAgICAgICAgIFwiaHR0cHM6Ly9jb2xhYi5yZXNlYXJjaC5nb29nbGUuY29tL2RyaXZlLzFDT2JlaGFuNWdtWU8tVHZ5eVlxOTczYTNoLV9FWXI5Xz91c3A9c2hhcmluZ1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjMuIENvbmZpZ3VyZSB0aGUgc2tlbGV0b24uXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJSdW4gJ3B5dGhvbjMgLW0gcGlwIGluc3RhbGwgLXIgcmVxdWlyZW1lbnRzLnR4dCcgaW4gJy5vYnNpZGlhbi9wbHVnaW5zL0R1YWwvc2tlbGV0b24vJy5cIlxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCI0LiBSdW4gdGhlIHNrZWxldG9uIGFmdGVyIHlvdSBjb25maWd1cmVkIHRoZSBlc3NlbmNlLlwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiUnVuICdweXRob24zIHNlcnZlci5weSAtLXBhdGggL3BhdGgvdG8veW91ci92YXVsdC8nIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NrZWxldG9uLycuXCJcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiNS4gUmVzdGFydCBPYnNpZGlhbi5cIilcbiAgICAgIC5zZXREZXNjKFwiSGVhZCBvdmVyIHRvIHRoZSByaWdodCBzaWRlIHBhbmVsIHRvIHRhbGsgd2l0aCB5b3VyIER1YWwhXCIpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICB0ZXh0OiBcIkNvbmdyYXR1bGF0aW9ucyBvbiBzZXR0aW5nIHVwIHlvdXIgRHVhbCFcIixcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJDdXN0b20gbmFtZVwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiQ3VzdG9taXplIHlvdXIgRHVhbCdzIG5hbWUgdXNpbmcgdGhlIGlucHV0IGJveC4gUmVsb2FkIE9ic2lkaWFuIGZvciB0aGlzIHRvIHRha2UgZWZmZWN0LlwiXG4gICAgICApXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkR1YWxcIilcbiAgICAgICAgICAuc2V0VmFsdWUoXCJcIilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21OYW1lID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJHZXQgaW52b2x2ZWQhXCIpXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlJlcG9ydCBidWdzXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9naXRodWIuY29tL1BzaW9uaWNhL0R1YWwvaXNzdWVzXCIpO1xuICAgICAgICAgIH0pXG4gICAgICApXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkpvaW4gUHNpb25pY2FcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL3BzaW9uaWNhLm9yZy9cIik7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJJdGVtVmlldyIsIk1hcmtkb3duUmVuZGVyZXIiLCJDb21wb25lbnQiLCJQbHVnaW4iLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyIsIk5vdGljZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVEQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFB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R0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUvQyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTdDLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUMxRCxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7UUFFMUQsSUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUNsQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7UUFDbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDO1FBRTFCLElBQUksTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEMsTUFBTSxDQUFDLEVBQUUsR0FBRyxRQUFRLENBQUM7UUFDckIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUNsQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssR0FB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
