/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');
var fs = require('fs');

function _interopNamespace(e) {
    if (e && e.__esModule) return e;
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () {
                        return e[k];
                    }
                });
            }
        });
    }
    n['default'] = e;
    return Object.freeze(n);
}

var fs__namespace = /*#__PURE__*/_interopNamespace(fs);

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var Utils;
(function (Utils) {
    function copyStringToClipboard(content) {
        var el = document.createElement("textarea");
        el.value = content;
        el.setAttribute("readonly", "");
        document.body.appendChild(el);
        el.select();
        document.execCommand("copy");
        document.body.removeChild(el);
    }
    Utils.copyStringToClipboard = copyStringToClipboard;
    function getOS() {
        if (window.navigator.userAgent.indexOf("Windows NT 10.0") != -1)
            return "windows";
        if (window.navigator.userAgent.indexOf("Mac") != -1)
            return "macos";
        if (window.navigator.userAgent.indexOf("Linux") != -1)
            return "linux";
    }
    Utils.getOS = getOS;
    function removeMd(md, options) {
        if (options === void 0) { options = {
            listUnicodeChar: "",
            stripListLeaders: true,
            gfm: true,
            useImgAltText: true
        }; }
        var output = md
            .replace(/^---[\s\S]*---\n*/g, "")
            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
            .replace(/\[\[(.*)\]\]/g, "$1")
            .replace(/```([^`])*```\n*/g, "")
            .replace(/\$([^$])*\$*/g, "")
            .replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, "");
        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
                else
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
            }
            if (options.gfm) {
                output = output
                    // Header
                    .replace(/\n={2,}/g, "\n")
                    // Fenced codeblocks
                    .replace(/~{3}.*\n/g, "")
                    // Strikethrough
                    .replace(/~~/g, "")
                    // Fenced codeblocks
                    .replace(/`{3}.*\n/g, "");
            }
            output = output
                // Remove HTML tags
                .replace(/<[^>]*>/g, "")
                // Remove setext-style headers
                .replace(/^[=\-]{2,}\s*$/g, "")
                // Remove footnotes?
                .replace(/\[\^.+?\](\: .*?$)?/g, "")
                .replace(/\s{0,2}\[.*?\]: .*?$/g, "")
                // Remove images
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "")
                // Remove inline links
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, "$1")
                // Remove blockquotes
                .replace(/^\s{0,3}>\s?/g, "")
                // Remove reference-style links?
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "")
                // Remove atx-style headers
                .replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm, "$1$2$3")
                // Remove emphasis (repeat the line to remove double emphasis)
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                // Remove code blocks
                .replace(/(`{3,})(.*?)\1/gm, "$2")
                // Remove inline code
                .replace(/`(.+?)`/g, "$1")
                // Replace two or more newlines with exactly two? Not entirely sure this belongs here...
                .replace(/\n{2,}/g, "\n\n");
        }
        catch (e) {
            console.error(e);
            return md;
        }
        return output;
    }
    Utils.removeMd = removeMd;
})(Utils || (Utils = {}));

var DUAL_URL = "http://127.0.0.1:3030";
var fetchEndpoint = function (endpoint, init) {
    return fetch(DUAL_URL + endpoint, init);
};
var getEndpoint = function (endpoint) { return fetchEndpoint(endpoint); };
var postEndpoint = function (endpoint, body) {
    return fetchEndpoint(endpoint, {
        method: "POST",
        headers: { Accept: "application/json", "Content-Type": "application/json" },
        body: JSON.stringify(body)
    });
};
var fetchQuery = function (query) {
    return getEndpoint("/query" + encodeURIComponent(query));
};
var fetchGenerate = function (body) {
    return postEndpoint("/generate", body);
};
var fetchSearch = function (body) { return postEndpoint("/search", body); };

var SkillManager = /** @class */ (function () {
    function SkillManager(app) {
        this.app = app;
    }
    // Returns result of following a command
    SkillManager.prototype.followCommand = function (command) {
        return __awaiter(this, void 0, void 0, function () {
            var skillPath, result;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.matchCommand(command)];
                    case 1:
                        skillPath = _a.sent();
                        console.log("FOLLOWING", command, "USING", skillPath);
                        result = this.useSkill(skillPath, command);
                        return [2 /*return*/, result];
                }
            });
        });
    };
    // Uses a skill when following a command
    SkillManager.prototype.useSkill = function (skillPath, command) {
        return __awaiter(this, void 0, void 0, function () {
            var params, args, codeBlocks, _a, splitBlockList, blockTypes, _b, splitBlockList, result;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.loadSkillContents(skillPath)];
                    case 1:
                        _c.sent();
                        this.loadSkillMetadata(skillPath);
                        this.removeFrontMatter();
                        return [4 /*yield*/, this.getParams(this.skillContents)];
                    case 2:
                        params = _c.sent();
                        return [4 /*yield*/, this.getArgs(command, params)];
                    case 3:
                        args = _c.sent();
                        this.skillContents = this.resolveParams(this.skillContents, params, args);
                        codeBlocks = this.detectCodeBlocks();
                        _a = this.splitBlocks(codeBlocks), splitBlockList = _a[0], blockTypes = _a[1];
                        return [4 /*yield*/, this.interpretBlocks(splitBlockList, blockTypes)];
                    case 4:
                        _b = _c.sent(), splitBlockList = _b[0];
                        result = this.getLastBlock(splitBlockList);
                        return [2 /*return*/, result];
                }
            });
        });
    };
    // Walk through blocks and take actions based on them
    SkillManager.prototype.interpretBlocks = function (splitBlocks, blockTypes) {
        return __awaiter(this, void 0, void 0, function () {
            var newText, textSoFar, index, _a, _b, _c, _d, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        textSoFar = "";
                        index = 0;
                        _f.label = 1;
                    case 1:
                        if (!(index < splitBlocks.length)) return [3 /*break*/, 8];
                        newText = this.resolveBodyReferences(splitBlocks, blockTypes, index, textSoFar);
                        splitBlocks[index] = newText;
                        _a = blockTypes[index];
                        switch (_a) {
                            case "text": return [3 /*break*/, 2];
                            case "js": return [3 /*break*/, 3];
                            case "dual": return [3 /*break*/, 5];
                        }
                        return [3 /*break*/, 7];
                    case 2:
                        textSoFar = textSoFar.concat(newText);
                        return [3 /*break*/, 7];
                    case 3:
                        _b = splitBlocks;
                        _c = index;
                        return [4 /*yield*/, this.waitEval(splitBlocks[index])];
                    case 4:
                        _b[_c] = _f.sent();
                        textSoFar = textSoFar.concat(splitBlocks[index]);
                        return [3 /*break*/, 7];
                    case 5:
                        _d = splitBlocks;
                        _e = index;
                        return [4 /*yield*/, this.followCommand(newText)];
                    case 6:
                        _d[_e] = _f.sent();
                        textSoFar = textSoFar.concat(splitBlocks[index] + " ");
                        _f.label = 7;
                    case 7:
                        index++;
                        return [3 /*break*/, 1];
                    case 8: return [2 /*return*/, [splitBlocks, textSoFar]];
                }
            });
        });
    };
    // Wait for eval wrapper
    SkillManager.prototype.waitEval = function (toEval) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, eval(toEval)];
            });
        });
    };
    // Fill in "#N" structures in skill body based on reference code block result
    SkillManager.prototype.resolveBodyReferences = function (splitBlocks, blockTypes, reachedIndex, textSoFar) {
        var newText = splitBlocks[reachedIndex];
        newText = newText.replace("#0", textSoFar);
        for (var referencedCodeBlock = 1; referencedCodeBlock <= reachedIndex; referencedCodeBlock++) {
            if (newText.includes("#" + referencedCodeBlock)) {
                var remainingCodeBlocks = referencedCodeBlock;
                for (var blockIndex = 0; blockIndex < splitBlocks.length && remainingCodeBlocks > 0; blockIndex++) {
                    if (splitBlocks[blockIndex].toString().trim() != "" ||
                        blockTypes[blockIndex] != "text") {
                        remainingCodeBlocks--;
                    }
                    if (remainingCodeBlocks == 0) {
                        newText = newText.replace("#" + referencedCodeBlock, splitBlocks[blockIndex]);
                    }
                }
            }
        }
        return newText;
    };
    SkillManager.prototype.getLastBlock = function (splitBlocks) {
        for (var blockIndex = splitBlocks.length - 1; blockIndex >= 0; blockIndex--) {
            if (splitBlocks[blockIndex].toString().trim() != "") {
                return splitBlocks[blockIndex];
            }
        }
    };
    // Get list of all blocks with type and contents
    SkillManager.prototype.splitBlocks = function (codeBlocks) {
        var splitBlockList = [this.skillContents], blockTypes = ["text"];
        for (var index = 0; index < codeBlocks.length; index++) {
            splitBlockList.push(codeBlocks[index]["contents"]);
            blockTypes.push(codeBlocks[index]["type"]);
            splitBlockList.push(splitBlockList[2 * index].slice(codeBlocks[index]["end"]));
            blockTypes.push("text");
            splitBlockList[2 * index] = splitBlockList[2 * index].slice(0, codeBlocks[index]["start"]);
            for (var indexFuture = index + 1; indexFuture < codeBlocks.length; indexFuture++) {
                codeBlocks[indexFuture]["start"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
                codeBlocks[indexFuture]["end"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
            }
        }
        return [splitBlockList, blockTypes];
    };
    // Get a list of code blocks with details
    SkillManager.prototype.detectCodeBlocks = function () {
        var m, res = [];
        var re = RegExp(/\`\`\`(?<type>\w+)(?<contents>(?:\`[^\`]|[^\`])*)\`\`\`/, "g");
        do {
            m = re.exec(this.skillContents);
            if (m) {
                res = res.concat({
                    type: m["groups"]["type"],
                    contents: m["groups"]["contents"].trim(),
                    start: m["index"],
                    end: m["index"] + m[0].length
                });
            }
        } while (m);
        return res;
    };
    // Get list of parameters mentioned in a skill
    SkillManager.prototype.getParams = function (document) {
        return __awaiter(this, void 0, void 0, function () {
            var re, params;
            return __generator(this, function (_a) {
                re = /\*[a-zA-Z0-9\s]*\*/g;
                params = document.match(re);
                if (params != null) {
                    params.forEach(function (val, index, params) {
                        params[index] = val.substring(1, val.length - 1);
                    });
                    return [2 /*return*/, params];
                }
                return [2 /*return*/, []];
            });
        });
    };
    // Parse arguments from the command
    SkillManager.prototype.getArgs = function (command, params) {
        return __awaiter(this, void 0, void 0, function () {
            var args, res, index;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        args = [];
                        index = 0;
                        _a.label = 1;
                    case 1:
                        if (!(index < params.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.getArg(command, params[index])];
                    case 2:
                        res = _a.sent();
                        args = args.concat(res);
                        _a.label = 3;
                    case 3:
                        index++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, args];
                }
            });
        });
    };
    // Parse one argument from the command
    SkillManager.prototype.getArg = function (command, param) {
        return __awaiter(this, void 0, void 0, function () {
            var prompt, rawResponse, content;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (param == Object.keys(this.skillMetadata[0])[0]) {
                            return [2 /*return*/, command];
                        }
                        prompt = this.getParamPrompt(command, param);
                        return [4 /*yield*/, fetchGenerate({
                                prompt: prompt,
                                context: [command],
                                generate_paragraphs: 1
                            })];
                    case 1:
                        rawResponse = _a.sent();
                        return [4 /*yield*/, rawResponse.json()];
                    case 2:
                        content = _a.sent();
                        content = content["output"][0].trim();
                        return [2 /*return*/, content];
                }
            });
        });
    };
    SkillManager.prototype.getParamPrompt = function (command, param) {
        var commandParam;
        var prompt;
        // TODO do ablation
        prompt = "Extract " + param + " from the following:\n\n";
        commandParam = Object.keys(this.skillMetadata[0])[0];
        this.skillMetadata.forEach(function (val, index, array) {
            if (commandParam in val && param in val) {
                if (Math.random() >= 0.6) {
                    prompt += val[commandParam] + " => " + val[param] + "\n\n";
                }
                else {
                    prompt += val[commandParam] + " =>  " + val[param] + "\n\n";
                }
            }
        });
        prompt += command + " => ";
        return prompt;
    };
    // Get two parallel lists of command examples and the paths they originate from
    SkillManager.prototype.getCommandExamples = function () {
        var _this = this;
        var commandExamples = [];
        var skillPaths = [];
        var commandExampleParam;
        var newCommandExample;
        this.app.vault.getMarkdownFiles().forEach(function (file) {
            if (file.path.startsWith("skillset")) {
                commandExampleParam = Object.keys(_this.app.metadataCache.getFileCache(file).frontmatter[0])[0];
                _this.app.metadataCache
                    .getFileCache(file)
                    .frontmatter.forEach(function (val, index, array) {
                    if (commandExampleParam in val) {
                        newCommandExample = val[commandExampleParam];
                        Object.entries(val).forEach(function (field, fieldIndex, fieldArray) {
                            if (fieldIndex > 0) {
                                newCommandExample = newCommandExample.replace(field[1], " ___ ");
                            }
                        });
                        commandExamples = commandExamples.concat(newCommandExample);
                        skillPaths = skillPaths.concat(file.path);
                    }
                });
            }
        });
        return [commandExamples, skillPaths];
    };
    // Get contents of a skill at a path
    SkillManager.prototype.loadSkillContents = function (skillPath) {
        return __awaiter(this, void 0, void 0, function () {
            var markdownFiles, index, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        markdownFiles = this.app.vault.getMarkdownFiles();
                        index = 0;
                        _b.label = 1;
                    case 1:
                        if (!(index < markdownFiles.length)) return [3 /*break*/, 4];
                        if (!(markdownFiles[index].path == skillPath)) return [3 /*break*/, 3];
                        _a = this;
                        return [4 /*yield*/, this.app.vault.cachedRead(markdownFiles[index])];
                    case 2:
                        _a.skillContents = _b.sent();
                        _b.label = 3;
                    case 3:
                        index++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    // Get metadata of a skill at a path
    SkillManager.prototype.loadSkillMetadata = function (skillPath) {
        var markdownFiles = this.app.vault.getMarkdownFiles();
        for (var index = 0; index < markdownFiles.length; index++) {
            if (markdownFiles[index].path == skillPath) {
                this.skillMetadata = this.app.metadataCache.getFileCache(markdownFiles[index]).frontmatter;
            }
        }
    };
    // Find closest skill to a given command through examples
    SkillManager.prototype.matchCommand = function (command) {
        return __awaiter(this, void 0, void 0, function () {
            var examplePathPairs, examples, paths, rawResponse, content;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        // Hide quoted content from command matching
                        command = command.replace(/"[\s\S]*"/, '""');
                        examplePathPairs = this.getCommandExamples();
                        examples = examplePathPairs[0], paths = examplePathPairs[1];
                        return [4 /*yield*/, fetchSearch({
                                prompt: command,
                                context: examples,
                                generate_paragraphs: 1
                            })];
                    case 1:
                        rawResponse = _a.sent();
                        return [4 /*yield*/, rawResponse.json()];
                    case 2:
                        content = _a.sent();
                        return [2 /*return*/, paths[content["output"][0]]];
                }
            });
        });
    };
    // Substitute parameters with arguments in a skill
    SkillManager.prototype.resolveParams = function (document, params, args) {
        for (var index = 0; index < params.length; index++) {
            var re = RegExp("\\*" + params[index] + "\\*", "g");
            document = document.replace(re, args[index]);
        }
        return document;
    };
    SkillManager.prototype.removeFrontMatter = function () {
        this.skillContents = this.skillContents.replace(/---[\s\S]*---/g, "");
    };
    SkillManager.prototype.getNotes = function () {
        return __awaiter(this, void 0, void 0, function () {
            var markdownFiles, notes, index, note;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        markdownFiles = this.app.vault.getMarkdownFiles();
                        notes = [];
                        index = 0;
                        _a.label = 1;
                    case 1:
                        if (!(index < markdownFiles.length)) return [3 /*break*/, 4];
                        if (!!markdownFiles[index].path.startsWith("skillset")) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.app.vault.cachedRead(markdownFiles[index])];
                    case 2:
                        note = _a.sent();
                        note = Utils.removeMd(note);
                        notes.push(note);
                        _a.label = 3;
                    case 3:
                        index++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, notes];
                }
            });
        });
    };
    return SkillManager;
}());
/*
argmin => Argmin

reward systems => neural systems which regulate reward

RNNs and backpropagation => backpropagation through time with RNNs

metaphors of concepts => concepts are associated with rooms

NCC => neural correlates of consciousness

*topic* =>
*/

var contentId = "dual-content";
var statusId = "dual-status";
var inputId = "dual-input";
var ChatView = /** @class */ (function (_super) {
    __extends(ChatView, _super);
    function ChatView(leaf, customName) {
        var _this = _super.call(this, leaf) || this;
        _this.customName = "";
        _this.customName = customName;
        return _this;
    }
    ChatView.prototype.getViewType = function () {
        return "chat";
    };
    ChatView.prototype.getDisplayText = function () {
        return "Dual";
    };
    ChatView.prototype.getIcon = function () {
        return "info";
    };
    ChatView.prototype.sendMessage = function () {
        var _this = this;
        var input = document.getElementById(inputId);
        var replied = false;
        if (input.value !== "") {
            this.drawMessage(input.value, "right");
            new Promise(function (resolve) {
                return setTimeout(resolve, 3000);
            }).then(function () {
                if (replied == false) {
                    _this.setStatus("typing...");
                }
            });
            // TODO: Move text sanitation code out of View
            var skillManager = new SkillManager(this.app);
            skillManager.followCommand(input.value).then(function (response) {
                response
                    .toString()
                    .split("\n\n")
                    .forEach(function (res) {
                    if (res.trim() != "") {
                        _this.drawMessage(res, "left");
                    }
                });
                replied = true;
                _this.setStatus("online");
            });
            input.value = "";
        }
    };
    ChatView.prototype.makeRequest = function (query) {
        return __awaiter(this, void 0, void 0, function () {
            var response, responseJSON;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, fetchQuery(query)];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        responseJSON = _a.sent();
                        return [2 /*return*/, responseJSON];
                }
            });
        });
    };
    ChatView.prototype.load = function () {
        _super.prototype.load.call(this);
        this.draw();
    };
    ChatView.prototype.draw = function () {
        var _this = this;
        var container = this.containerEl.children[1];
        // Root node
        var rootEl = document.createElement("div");
        rootEl.id = "dual-root";
        // Header
        var headerDiv = rootEl.createEl("header", {
            attr: { id: "dual-header" }
        });
        // Title and status
        headerDiv.createEl("h3", {
            cls: "dual-header-title",
            text: this.customName
        });
        headerDiv.createEl("h6", { text: "Online", attr: { id: statusId } });
        // Conversation content
        rootEl.createDiv({ attr: { id: contentId } });
        // Footer
        var footerDiv = rootEl.createEl("footer", {
            attr: { id: "dual-footer" }
        });
        // Input element
        var input = footerDiv.createEl("input", {
            type: "text",
            attr: { id: inputId, size: 1 }
        });
        // Send button
        var button = footerDiv.createEl("button", {
            text: "Send",
            attr: { id: "dual-btn-send" }
        });
        this.registerDomEvent(button, "click", function () { return _this.sendMessage(); });
        this.registerDomEvent(input, "keydown", function (event) {
            if (event.key === "Enter") {
                _this.sendMessage();
            }
        });
        container.empty();
        container.appendChild(rootEl);
    };
    ChatView.prototype.drawMessage = function (content, side) {
        var conversationDiv = document.getElementById(contentId);
        var msg = conversationDiv.createDiv({ cls: "dual-msg dual-msg-" + side });
        obsidian.MarkdownRenderer.renderMarkdown(content, msg, this.app.vault.getRoot().path, new obsidian.Component());
        conversationDiv.scrollBy(0, 1000);
    };
    ChatView.prototype.setStatus = function (content) {
        var statusP = document.getElementById(statusId);
        statusP.setText(content);
    };
    return ChatView;
}(obsidian.ItemView));

var DEFAULT_SETTINGS = {
    customName: "Dual"
};
var MyPlugin = /** @class */ (function (_super) {
    __extends(MyPlugin, _super);
    function MyPlugin() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MyPlugin.prototype.onload = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.loadSettings()];
                    case 1:
                        _a.sent();
                        this.registerView("chat", function (leaf) {
                            return new ChatView(leaf, _this.settings.customName);
                        });
                        this.app.workspace.layoutReady && this.initLeaf(this.app.workspace);
                        this.registerEvent(this.app.workspace.on("layout-ready", function () {
                            return _this.initLeaf(_this.app.workspace);
                        }));
                        this.addSettingTab(new SampleSettingTab(this.app, this));
                        this.addCommand({
                            id: "focus-dual-input",
                            name: "Focus Dual input box",
                            callback: function () { return document.getElementById(inputId).focus(); }
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    MyPlugin.prototype.initLeaf = function (workspace) {
        if (workspace.getLeavesOfType("chat").length == 0) {
            workspace.getRightLeaf(false).setViewState({
                type: "chat"
            });
        }
    };
    MyPlugin.prototype.loadSettings = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _a = this;
                        _c = (_b = Object).assign;
                        _d = [{}, DEFAULT_SETTINGS];
                        return [4 /*yield*/, this.loadData()];
                    case 1:
                        _a.settings = _c.apply(_b, _d.concat([_e.sent()]));
                        return [2 /*return*/];
                }
            });
        });
    };
    MyPlugin.prototype.saveSettings = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.saveData(this.settings)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return MyPlugin;
}(obsidian.Plugin));
var SampleSettingTab = /** @class */ (function (_super) {
    __extends(SampleSettingTab, _super);
    function SampleSettingTab(app, plugin) {
        var _this = _super.call(this, app, plugin) || this;
        _this.app = app;
        _this.plugin = plugin;
        return _this;
    }
    SampleSettingTab.prototype.display = function () {
        var _this = this;
        var containerEl = this.containerEl;
        containerEl.empty();
        containerEl.createEl("h3", {
            text: "Follow these instructions to set up your Dual:"
        });
        new obsidian.Setting(containerEl)
            .setName("getOS() test")
            .setDesc("Press the button.")
            .addButton(function (cb) {
            cb.setButtonText("Install Python")
                .setClass("mod-cta")
                .onClick(function () { return __awaiter(_this, void 0, void 0, function () {
                var basePath, dualServerPath, dualAbsoluteBinaryPath, dualRelativeBinaryPath, dualAbsoluteTorchPath, dualRelativeTorchPath, torchURL, dualServerURL, response, blob, _a, _b, _c, response, blob, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            if (this.app.vault.adapter instanceof obsidian.FileSystemAdapter) {
                                basePath = this.app.vault.adapter.getBasePath();
                            }
                            if (Utils.getOS() == "linux") {
                                new obsidian.Notice("Setting up dual-server using dual-obsidian-client...");
                                dualServerPath = basePath + "/.obsidian/plugins/Dual/server";
                                dualAbsoluteBinaryPath = dualServerPath + "/dual-server-linux";
                                dualRelativeBinaryPath =
                                    "/.obsidian/plugins/Dual/server/dual-server-linux";
                                dualAbsoluteTorchPath = dualServerPath + "/libtorch.zip";
                                dualRelativeTorchPath =
                                    "/.obsidian/plugins/Dual/server/libtorch.zip";
                                dualServerURL =
                                    "https://github.com/Psionica/dual-server/releases/download/master-b7ea8b18/dual-server-linux";
                                torchURL =
                                    "https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.9.0%2Bcpu.zip";
                            }
                            if (!fs__namespace.existsSync(dualServerPath)) {
                                fs__namespace.mkdirSync(dualServerPath);
                            }
                            if (!!fs__namespace.existsSync(dualAbsoluteBinaryPath)) return [3 /*break*/, 5];
                            new obsidian.Notice("Downloading dual-server...");
                            return [4 /*yield*/, fetch(dualServerURL)];
                        case 1:
                            response = _g.sent();
                            return [4 /*yield*/, response.blob()];
                        case 2:
                            blob = _g.sent();
                            _b = (_a = this.app.vault)
                                .createBinary;
                            _c = [dualRelativeBinaryPath];
                            return [4 /*yield*/, blob.arrayBuffer()];
                        case 3: return [4 /*yield*/, _b.apply(_a, _c.concat([_g.sent()]))
                                .then(function () {
                                new obsidian.Notice("Download complete!");
                            })];
                        case 4:
                            _g.sent();
                            _g.label = 5;
                        case 5:
                            if (!!fs__namespace.existsSync(dualAbsoluteTorchPath)) return [3 /*break*/, 10];
                            new obsidian.Notice("Downloading libtorch...");
                            return [4 /*yield*/, fetch(torchURL)];
                        case 6:
                            response = _g.sent();
                            return [4 /*yield*/, response.blob()];
                        case 7:
                            blob = _g.sent();
                            _e = (_d = this.app.vault)
                                .createBinary;
                            _f = [dualRelativeTorchPath];
                            return [4 /*yield*/, blob.arrayBuffer()];
                        case 8: return [4 /*yield*/, _e.apply(_d, _f.concat([_g.sent()]))
                                .then(function () {
                                new obsidian.Notice("Download complete!");
                            })];
                        case 9:
                            _g.sent();
                            _g.label = 10;
                        case 10: return [2 /*return*/];
                    }
                });
            }); });
        });
        new obsidian.Setting(containerEl)
            .setName("0. Install Python (3.8+).")
            .setDesc("Press the button to head over to the download page.")
            .addButton(function (cb) {
            return cb
                .setButtonText("Install Python")
                .setClass("mod-cta")
                .onClick(function () {
                window.open("https://www.python.org/downloads/");
            });
        });
        new obsidian.Setting(containerEl)
            .setName("1. Copy snapshot.")
            .setDesc("Press the button to copy the entire vault as concatenated plain text.")
            .addButton(function (cb) {
            return cb
                .setButtonText("Copy snapshot")
                .setClass("mod-cta")
                .onClick(function () {
                new obsidian.Notice("Loading files...");
                var concatenated = "";
                // TODO Use Promise.all() / map / reduce
                _this.app.vault.getMarkdownFiles().forEach(function (element) {
                    _this.app.vault.cachedRead(element).then(function (res) {
                        res = res
                            .replace(/^---[\s\S]*---\n*/g, "")
                            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
                            .replace(/\[\[(.*)\]\]/g, "$1")
                            .replace(/```([^`])*```\n*/g, "")
                            .replace(/\$([^$])*\$*/g, "");
                        concatenated = concatenated.concat(res, "\n\n");
                    });
                });
                new Promise(function (resolve) {
                    return setTimeout(resolve, 3000);
                }).then(function () {
                    concatenated = concatenated.slice(0, 5000000);
                    concatenated = Utils.removeMd(concatenated);
                    Utils.copyStringToClipboard(concatenated);
                    new obsidian.Notice("Snapshot successfully copied to clipboard!");
                });
            });
        });
        new obsidian.Setting(containerEl)
            .setName("2. Derive the essence.")
            .setDesc("After following the online instructions, extract 'essence.zip' in '.obsidian/plugins/Dual/'.")
            .addButton(function (cb) {
            return cb
                .setButtonText("Start alignment")
                .setClass("mod-cta")
                .onClick(function () {
                window.open("https://colab.research.google.com/drive/1CObehan5gmYO-TvyyYq973a3h-_EYr9_?usp=sharing");
            });
        });
        new obsidian.Setting(containerEl)
            .setName("3. Configure the skeleton.")
            .setDesc("Run 'python3 -m pip install -r requirements.txt' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("4. Run the skeleton after you configured the essence.")
            .setDesc("Run 'python3 server.py --path /path/to/your/vault/' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("5. Restart Obsidian.")
            .setDesc("Head over to the right side panel to talk with your Dual!");
        containerEl.createEl("h3", {
            text: "Congratulations on setting up your Dual!"
        });
        new obsidian.Setting(containerEl)
            .setName("Custom name")
            .setDesc("Customize your Dual's name using the input box. Reload Obsidian for this to take effect.")
            .addText(function (text) {
            return text
                .setPlaceholder("Dual")
                .setValue("")
                .onChange(function (value) { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.plugin.settings.customName = value;
                            return [4 /*yield*/, this.plugin.saveSettings()];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); });
        });
        new obsidian.Setting(containerEl)
            .setName("Get involved!")
            .addButton(function (cb) {
            return cb
                .setButtonText("Report bugs")
                .setClass("mod-cta")
                .onClick(function () {
                window.open("https://github.com/Psionica/Dual/issues");
            });
        })
            .addButton(function (cb) {
            return cb
                .setButtonText("Join Psionica")
                .setClass("mod-cta")
                .onClick(function () {
                window.open("https://psionica.org/");
            });
        });
    };
    return SampleSettingTab;
}(obsidian.PluginSettingTab));

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInV0aWxzLnRzIiwibmV0d29yay50cyIsInNraWxscy50cyIsInZpZXcudHMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgZnJvbSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJleHBvcnQgbW9kdWxlIFV0aWxzIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIGNvcHlTdHJpbmdUb0NsaXBib2FyZChjb250ZW50OiBzdHJpbmcpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gICAgZWwudmFsdWUgPSBjb250ZW50O1xuICAgIGVsLnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwiXCIpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGVsLnNlbGVjdCgpO1xuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRPUygpIHtcbiAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpbmRvd3MgTlQgMTAuMFwiKSAhPSAtMSlcbiAgICAgIHJldHVybiBcIndpbmRvd3NcIjtcbiAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1hY1wiKSAhPSAtMSkgcmV0dXJuIFwibWFjb3NcIjtcbiAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkxpbnV4XCIpICE9IC0xKSByZXR1cm4gXCJsaW51eFwiO1xuICB9XG5cbiAgaW50ZXJmYWNlIFJlbW92ZU1kT3B0aW9ucyB7XG4gICAgbGlzdFVuaWNvZGVDaGFyPzogc3RyaW5nO1xuICAgIHN0cmlwTGlzdExlYWRlcnM/OiBib29sZWFuO1xuICAgIGdmbT86IGJvb2xlYW47XG4gICAgdXNlSW1nQWx0VGV4dD86IGJvb2xlYW47XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlTWQoXG4gICAgbWQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBSZW1vdmVNZE9wdGlvbnMgPSB7XG4gICAgICBsaXN0VW5pY29kZUNoYXI6IFwiXCIsXG4gICAgICBzdHJpcExpc3RMZWFkZXJzOiB0cnVlLFxuICAgICAgZ2ZtOiB0cnVlLFxuICAgICAgdXNlSW1nQWx0VGV4dDogdHJ1ZSxcbiAgICB9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBtZFxuICAgICAgLnJlcGxhY2UoL14tLS1bXFxzXFxTXSotLS1cXG4qL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbW15cXHxcXFtcXF1dKlxcfChbXlxcfFxcW1xcXV0qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbKC4qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvYGBgKFteYF0pKmBgYFxcbiovZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXCQoW14kXSkqXFwkKi9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL14oLVxccyo/fFxcKlxccyo/fF9cXHMqPyl7Myx9XFxzKiQvZ20sIFwiXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyKVxuICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKFxuICAgICAgICAgICAgL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sXG4gICAgICAgICAgICBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciArIFwiICQxXCJcbiAgICAgICAgICApO1xuICAgICAgICBlbHNlIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCBcIiQxXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZ2ZtKSB7XG4gICAgICAgIG91dHB1dCA9IG91dHB1dFxuICAgICAgICAgIC8vIEhlYWRlclxuICAgICAgICAgIC5yZXBsYWNlKC9cXG49ezIsfS9nLCBcIlxcblwiKVxuICAgICAgICAgIC8vIEZlbmNlZCBjb2RlYmxvY2tzXG4gICAgICAgICAgLnJlcGxhY2UoL357M30uKlxcbi9nLCBcIlwiKVxuICAgICAgICAgIC8vIFN0cmlrZXRocm91Z2hcbiAgICAgICAgICAucmVwbGFjZSgvfn4vZywgXCJcIilcbiAgICAgICAgICAvLyBGZW5jZWQgY29kZWJsb2Nrc1xuICAgICAgICAgIC5yZXBsYWNlKC9gezN9LipcXG4vZywgXCJcIik7XG4gICAgICB9XG4gICAgICBvdXRwdXQgPSBvdXRwdXRcbiAgICAgICAgLy8gUmVtb3ZlIEhUTUwgdGFnc1xuICAgICAgICAucmVwbGFjZSgvPFtePl0qPi9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgc2V0ZXh0LXN0eWxlIGhlYWRlcnNcbiAgICAgICAgLnJlcGxhY2UoL15bPVxcLV17Mix9XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGZvb3Rub3Rlcz9cbiAgICAgICAgLnJlcGxhY2UoL1xcW1xcXi4rP1xcXShcXDogLio/JCk/L2csIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXHN7MCwyfVxcWy4qP1xcXTogLio/JC9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW1hZ2VzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9cXCFcXFsoLio/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZyxcbiAgICAgICAgICBvcHRpb25zLnVzZUltZ0FsdFRleHQgPyBcIiQxXCIgOiBcIlwiXG4gICAgICAgIClcbiAgICAgICAgLy8gUmVtb3ZlIGlubGluZSBsaW5rc1xuICAgICAgICAucmVwbGFjZSgvXFxbKC4qPylcXF1bXFxbXFwoXS4qP1tcXF1cXCldL2csIFwiJDFcIilcbiAgICAgICAgLy8gUmVtb3ZlIGJsb2NrcXVvdGVzXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzezAsM30+XFxzPy9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgcmVmZXJlbmNlLXN0eWxlIGxpbmtzP1xuICAgICAgICAucmVwbGFjZSgvXlxcc3sxLDJ9XFxbKC4qPylcXF06IChcXFMrKSggXCIuKj9cIik/XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGF0eC1zdHlsZSBoZWFkZXJzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9eKFxcbik/XFxzezAsfSN7MSw2fVxccyt8IHswLH0oXFxuKT9cXHN7MCx9I3swLH0gezAsfShcXG4pP1xcc3swLH0kL2dtLFxuICAgICAgICAgIFwiJDEkMiQzXCJcbiAgICAgICAgKVxuICAgICAgICAvLyBSZW1vdmUgZW1waGFzaXMgKHJlcGVhdCB0aGUgbGluZSB0byByZW1vdmUgZG91YmxlIGVtcGhhc2lzKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgY29kZSBibG9ja3NcbiAgICAgICAgLnJlcGxhY2UoLyhgezMsfSkoLio/KVxcMS9nbSwgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW5saW5lIGNvZGVcbiAgICAgICAgLnJlcGxhY2UoL2AoLis/KWAvZywgXCIkMVwiKVxuICAgICAgICAvLyBSZXBsYWNlIHR3byBvciBtb3JlIG5ld2xpbmVzIHdpdGggZXhhY3RseSB0d28/IE5vdCBlbnRpcmVseSBzdXJlIHRoaXMgYmVsb25ncyBoZXJlLi4uXG4gICAgICAgIC5yZXBsYWNlKC9cXG57Mix9L2csIFwiXFxuXFxuXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICByZXR1cm4gbWQ7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cbiIsImNvbnN0IERVQUxfVVJMID0gXCJodHRwOi8vMTI3LjAuMC4xOjMwMzBcIjtcblxuaW50ZXJmYWNlIElQb3N0Qm9keSB7XG4gIHByb21wdDogc3RyaW5nO1xuICBjb250ZXh0OiBzdHJpbmdbXTtcbiAgZ2VuZXJhdGVfcGFyYWdyYXBoczogbnVtYmVyO1xufVxuXG5jb25zdCBmZXRjaEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcsIGluaXQ/OiBSZXF1ZXN0SW5pdCkgPT5cbiAgZmV0Y2goRFVBTF9VUkwgKyBlbmRwb2ludCwgaW5pdCk7XG5cbmNvbnN0IGdldEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcpID0+IGZldGNoRW5kcG9pbnQoZW5kcG9pbnQpO1xuY29uc3QgcG9zdEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcsIGJvZHk6IG9iamVjdCkgPT5cbiAgZmV0Y2hFbmRwb2ludChlbmRwb2ludCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGZldGNoUXVlcnkgPSAocXVlcnk6IHN0cmluZykgPT5cbiAgZ2V0RW5kcG9pbnQoXCIvcXVlcnlcIiArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuZXhwb3J0IGNvbnN0IGZldGNoR2VuZXJhdGUgPSAoYm9keTogSVBvc3RCb2R5KSA9PlxuICBwb3N0RW5kcG9pbnQoXCIvZ2VuZXJhdGVcIiwgYm9keSk7XG5leHBvcnQgY29uc3QgZmV0Y2hTZWFyY2ggPSAoYm9keTogSVBvc3RCb2R5KSA9PiBwb3N0RW5kcG9pbnQoXCIvc2VhcmNoXCIsIGJvZHkpO1xuIiwiaW1wb3J0IHsgQXBwLCBGcm9udE1hdHRlckNhY2hlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBmZXRjaEdlbmVyYXRlLCBmZXRjaFNlYXJjaCB9IGZyb20gXCIuL25ldHdvcmtcIjtcblxuZXhwb3J0IGNsYXNzIFNraWxsTWFuYWdlciB7XG4gIGFwcDogQXBwO1xuICBza2lsbE1ldGFkYXRhOiBGcm9udE1hdHRlckNhY2hlO1xuICBza2lsbENvbnRlbnRzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgfVxuXG4gIC8vIFJldHVybnMgcmVzdWx0IG9mIGZvbGxvd2luZyBhIGNvbW1hbmRcbiAgYXN5bmMgZm9sbG93Q29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICB2YXIgc2tpbGxQYXRoID0gYXdhaXQgdGhpcy5tYXRjaENvbW1hbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coXCJGT0xMT1dJTkdcIiwgY29tbWFuZCwgXCJVU0lOR1wiLCBza2lsbFBhdGgpO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnVzZVNraWxsKHNraWxsUGF0aCwgY29tbWFuZCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gVXNlcyBhIHNraWxsIHdoZW4gZm9sbG93aW5nIGEgY29tbWFuZFxuICBhc3luYyB1c2VTa2lsbChza2lsbFBhdGg6IHN0cmluZywgY29tbWFuZDogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2tpbGxDb250ZW50cyhza2lsbFBhdGgpO1xuICAgIHRoaXMubG9hZFNraWxsTWV0YWRhdGEoc2tpbGxQYXRoKTtcbiAgICB0aGlzLnJlbW92ZUZyb250TWF0dGVyKCk7XG5cbiAgICB2YXIgcGFyYW1zOiBzdHJpbmdbXSA9IGF3YWl0IHRoaXMuZ2V0UGFyYW1zKHRoaXMuc2tpbGxDb250ZW50cyk7XG4gICAgdmFyIGFyZ3M6IHN0cmluZ1tdID0gYXdhaXQgdGhpcy5nZXRBcmdzKGNvbW1hbmQsIHBhcmFtcyk7XG4gICAgdGhpcy5za2lsbENvbnRlbnRzID0gdGhpcy5yZXNvbHZlUGFyYW1zKHRoaXMuc2tpbGxDb250ZW50cywgcGFyYW1zLCBhcmdzKTtcblxuICAgIHZhciBjb2RlQmxvY2tzID0gdGhpcy5kZXRlY3RDb2RlQmxvY2tzKCk7XG4gICAgdmFyIFtzcGxpdEJsb2NrTGlzdCwgYmxvY2tUeXBlc10gPSB0aGlzLnNwbGl0QmxvY2tzKGNvZGVCbG9ja3MpO1xuICAgIHZhciBbc3BsaXRCbG9ja0xpc3QsIHRleHRTb0Zhcl0gPSBhd2FpdCB0aGlzLmludGVycHJldEJsb2NrcyhcbiAgICAgIHNwbGl0QmxvY2tMaXN0LFxuICAgICAgYmxvY2tUeXBlc1xuICAgICk7XG5cbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRMYXN0QmxvY2soc3BsaXRCbG9ja0xpc3QpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBXYWxrIHRocm91Z2ggYmxvY2tzIGFuZCB0YWtlIGFjdGlvbnMgYmFzZWQgb24gdGhlbVxuICBhc3luYyBpbnRlcnByZXRCbG9ja3MoXG4gICAgc3BsaXRCbG9ja3M6IHN0cmluZ1tdLFxuICAgIGJsb2NrVHlwZXM6IHN0cmluZ1tdXG4gICk6IFByb21pc2U8W3N0cmluZ1tdLCBzdHJpbmddPiB7XG4gICAgdmFyIG5ld1RleHQsXG4gICAgICB0ZXh0U29GYXI6IHN0cmluZyA9IFwiXCI7XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3BsaXRCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBuZXdUZXh0ID0gdGhpcy5yZXNvbHZlQm9keVJlZmVyZW5jZXMoXG4gICAgICAgIHNwbGl0QmxvY2tzLFxuICAgICAgICBibG9ja1R5cGVzLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgdGV4dFNvRmFyXG4gICAgICApO1xuICAgICAgc3BsaXRCbG9ja3NbaW5kZXhdID0gbmV3VGV4dDtcblxuICAgICAgc3dpdGNoIChibG9ja1R5cGVzW2luZGV4XSkge1xuICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgIHRleHRTb0ZhciA9IHRleHRTb0Zhci5jb25jYXQobmV3VGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJqc1wiOlxuICAgICAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IGF3YWl0IHRoaXMud2FpdEV2YWwoc3BsaXRCbG9ja3NbaW5kZXhdKTtcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KHNwbGl0QmxvY2tzW2luZGV4XSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkdWFsXCI6XG4gICAgICAgICAgc3BsaXRCbG9ja3NbaW5kZXhdID0gYXdhaXQgdGhpcy5mb2xsb3dDb21tYW5kKG5ld1RleHQpO1xuICAgICAgICAgIHRleHRTb0ZhciA9IHRleHRTb0Zhci5jb25jYXQoc3BsaXRCbG9ja3NbaW5kZXhdICsgXCIgXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbc3BsaXRCbG9ja3MsIHRleHRTb0Zhcl07XG4gIH1cblxuICAvLyBXYWl0IGZvciBldmFsIHdyYXBwZXJcbiAgYXN5bmMgd2FpdEV2YWwodG9FdmFsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBldmFsKHRvRXZhbCk7XG4gIH1cblxuICAvLyBGaWxsIGluIFwiI05cIiBzdHJ1Y3R1cmVzIGluIHNraWxsIGJvZHkgYmFzZWQgb24gcmVmZXJlbmNlIGNvZGUgYmxvY2sgcmVzdWx0XG4gIHJlc29sdmVCb2R5UmVmZXJlbmNlcyhcbiAgICBzcGxpdEJsb2Nrczogc3RyaW5nW10sXG4gICAgYmxvY2tUeXBlczogc3RyaW5nW10sXG4gICAgcmVhY2hlZEluZGV4OiBudW1iZXIsXG4gICAgdGV4dFNvRmFyOiBzdHJpbmdcbiAgKSB7XG4gICAgdmFyIG5ld1RleHQgPSBzcGxpdEJsb2Nrc1tyZWFjaGVkSW5kZXhdO1xuICAgIG5ld1RleHQgPSBuZXdUZXh0LnJlcGxhY2UoXCIjMFwiLCB0ZXh0U29GYXIpO1xuXG4gICAgZm9yIChcbiAgICAgIGxldCByZWZlcmVuY2VkQ29kZUJsb2NrID0gMTtcbiAgICAgIHJlZmVyZW5jZWRDb2RlQmxvY2sgPD0gcmVhY2hlZEluZGV4O1xuICAgICAgcmVmZXJlbmNlZENvZGVCbG9jaysrXG4gICAgKSB7XG4gICAgICBpZiAobmV3VGV4dC5pbmNsdWRlcyhcIiNcIiArIHJlZmVyZW5jZWRDb2RlQmxvY2spKSB7XG4gICAgICAgIHZhciByZW1haW5pbmdDb2RlQmxvY2tzID0gcmVmZXJlbmNlZENvZGVCbG9jaztcblxuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBibG9ja0luZGV4ID0gMDtcbiAgICAgICAgICBibG9ja0luZGV4IDwgc3BsaXRCbG9ja3MubGVuZ3RoICYmIHJlbWFpbmluZ0NvZGVCbG9ja3MgPiAwO1xuICAgICAgICAgIGJsb2NrSW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzcGxpdEJsb2Nrc1tibG9ja0luZGV4XS50b1N0cmluZygpLnRyaW0oKSAhPSBcIlwiIHx8XG4gICAgICAgICAgICBibG9ja1R5cGVzW2Jsb2NrSW5kZXhdICE9IFwidGV4dFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZW1haW5pbmdDb2RlQmxvY2tzLS07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlbWFpbmluZ0NvZGVCbG9ja3MgPT0gMCkge1xuICAgICAgICAgICAgbmV3VGV4dCA9IG5ld1RleHQucmVwbGFjZShcbiAgICAgICAgICAgICAgXCIjXCIgKyByZWZlcmVuY2VkQ29kZUJsb2NrLFxuICAgICAgICAgICAgICBzcGxpdEJsb2Nrc1tibG9ja0luZGV4XVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3VGV4dDtcbiAgfVxuXG4gIGdldExhc3RCbG9jayhzcGxpdEJsb2Nrczogc3RyaW5nW10pIHtcbiAgICBmb3IgKFxuICAgICAgbGV0IGJsb2NrSW5kZXggPSBzcGxpdEJsb2Nrcy5sZW5ndGggLSAxO1xuICAgICAgYmxvY2tJbmRleCA+PSAwO1xuICAgICAgYmxvY2tJbmRleC0tXG4gICAgKSB7XG4gICAgICBpZiAoc3BsaXRCbG9ja3NbYmxvY2tJbmRleF0udG9TdHJpbmcoKS50cmltKCkgIT0gXCJcIikge1xuICAgICAgICByZXR1cm4gc3BsaXRCbG9ja3NbYmxvY2tJbmRleF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGxpc3Qgb2YgYWxsIGJsb2NrcyB3aXRoIHR5cGUgYW5kIGNvbnRlbnRzXG4gIHNwbGl0QmxvY2tzKFxuICAgIGNvZGVCbG9ja3M6IFtcbiAgICAgIGNvZGVCbG9jazogeyB0eXBlOiBzdHJpbmc7IGNvbnRlbnRzOiBzdHJpbmc7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyIH1cbiAgICBdXG4gICkge1xuICAgIHZhciBzcGxpdEJsb2NrTGlzdCA9IFt0aGlzLnNraWxsQ29udGVudHNdLFxuICAgICAgYmxvY2tUeXBlcyA9IFtcInRleHRcIl07XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY29kZUJsb2Nrcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHNwbGl0QmxvY2tMaXN0LnB1c2goY29kZUJsb2Nrc1tpbmRleF1bXCJjb250ZW50c1wiXSk7XG4gICAgICBibG9ja1R5cGVzLnB1c2goY29kZUJsb2Nrc1tpbmRleF1bXCJ0eXBlXCJdKTtcblxuICAgICAgc3BsaXRCbG9ja0xpc3QucHVzaChcbiAgICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5zbGljZShjb2RlQmxvY2tzW2luZGV4XVtcImVuZFwiXSlcbiAgICAgICk7XG4gICAgICBibG9ja1R5cGVzLnB1c2goXCJ0ZXh0XCIpO1xuXG4gICAgICBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdID0gc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5zbGljZShcbiAgICAgICAgMCxcbiAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJzdGFydFwiXVxuICAgICAgKTtcblxuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4RnV0dXJlID0gaW5kZXggKyAxO1xuICAgICAgICBpbmRleEZ1dHVyZSA8IGNvZGVCbG9ja3MubGVuZ3RoO1xuICAgICAgICBpbmRleEZ1dHVyZSsrXG4gICAgICApIHtcbiAgICAgICAgY29kZUJsb2Nrc1tpbmRleEZ1dHVyZV1bXCJzdGFydFwiXSAtPVxuICAgICAgICAgIHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0ubGVuZ3RoICtcbiAgICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcImVuZFwiXSAtXG4gICAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJzdGFydFwiXTtcbiAgICAgICAgY29kZUJsb2Nrc1tpbmRleEZ1dHVyZV1bXCJlbmRcIl0gLT1cbiAgICAgICAgICBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLmxlbmd0aCArXG4gICAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJlbmRcIl0gLVxuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtzcGxpdEJsb2NrTGlzdCwgYmxvY2tUeXBlc107XG4gIH1cblxuICAvLyBHZXQgYSBsaXN0IG9mIGNvZGUgYmxvY2tzIHdpdGggZGV0YWlsc1xuICBkZXRlY3RDb2RlQmxvY2tzKCkge1xuICAgIGxldCBtLFxuICAgICAgcmVzOiBhbnkgPSBbXTtcbiAgICBjb25zdCByZSA9IFJlZ0V4cChcbiAgICAgIC9cXGBcXGBcXGAoPzx0eXBlPlxcdyspKD88Y29udGVudHM+KD86XFxgW15cXGBdfFteXFxgXSkqKVxcYFxcYFxcYC8sXG4gICAgICBcImdcIlxuICAgICk7XG5cbiAgICBkbyB7XG4gICAgICBtID0gcmUuZXhlYyh0aGlzLnNraWxsQ29udGVudHMpO1xuICAgICAgaWYgKG0pIHtcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdCh7XG4gICAgICAgICAgdHlwZTogbVtcImdyb3Vwc1wiXVtcInR5cGVcIl0sXG4gICAgICAgICAgY29udGVudHM6IG1bXCJncm91cHNcIl1bXCJjb250ZW50c1wiXS50cmltKCksXG4gICAgICAgICAgc3RhcnQ6IG1bXCJpbmRleFwiXSxcbiAgICAgICAgICBlbmQ6IG1bXCJpbmRleFwiXSArIG1bMF0ubGVuZ3RoLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChtKTtcblxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvLyBHZXQgbGlzdCBvZiBwYXJhbWV0ZXJzIG1lbnRpb25lZCBpbiBhIHNraWxsXG4gIGFzeW5jIGdldFBhcmFtcyhkb2N1bWVudDogc3RyaW5nKSB7XG4gICAgdmFyIHJlID0gL1xcKlthLXpBLVowLTlcXHNdKlxcKi9nO1xuICAgIHZhciBwYXJhbXMgPSBkb2N1bWVudC5tYXRjaChyZSk7XG5cbiAgICBpZiAocGFyYW1zICE9IG51bGwpIHtcbiAgICAgIHBhcmFtcy5mb3JFYWNoKCh2YWwsIGluZGV4LCBwYXJhbXMpID0+IHtcbiAgICAgICAgcGFyYW1zW2luZGV4XSA9IHZhbC5zdWJzdHJpbmcoMSwgdmFsLmxlbmd0aCAtIDEpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gUGFyc2UgYXJndW1lbnRzIGZyb20gdGhlIGNvbW1hbmRcbiAgYXN5bmMgZ2V0QXJncyhjb21tYW5kOiBzdHJpbmcsIHBhcmFtczogc3RyaW5nW10pIHtcbiAgICB2YXIgYXJnczogc3RyaW5nW10gPSBbXSxcbiAgICAgIHJlcztcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYXJhbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByZXMgPSBhd2FpdCB0aGlzLmdldEFyZyhjb21tYW5kLCBwYXJhbXNbaW5kZXhdKTtcbiAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdChyZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgLy8gUGFyc2Ugb25lIGFyZ3VtZW50IGZyb20gdGhlIGNvbW1hbmRcbiAgYXN5bmMgZ2V0QXJnKGNvbW1hbmQ6IHN0cmluZywgcGFyYW06IHN0cmluZykge1xuICAgIGlmIChwYXJhbSA9PSBPYmplY3Qua2V5cyh0aGlzLnNraWxsTWV0YWRhdGFbMF0pWzBdKSB7XG4gICAgICByZXR1cm4gY29tbWFuZDtcbiAgICB9XG5cbiAgICB2YXIgcHJvbXB0OiBzdHJpbmcgPSB0aGlzLmdldFBhcmFtUHJvbXB0KGNvbW1hbmQsIHBhcmFtKTtcbiAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IGZldGNoR2VuZXJhdGUoe1xuICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICBjb250ZXh0OiBbY29tbWFuZF0sXG4gICAgICBnZW5lcmF0ZV9wYXJhZ3JhcGhzOiAxLFxuICAgIH0pO1xuXG4gICAgdmFyIGNvbnRlbnQgPSBhd2FpdCByYXdSZXNwb25zZS5qc29uKCk7XG4gICAgY29udGVudCA9IGNvbnRlbnRbXCJvdXRwdXRcIl1bMF0udHJpbSgpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBnZXRQYXJhbVByb21wdChjb21tYW5kOiBzdHJpbmcsIHBhcmFtOiBzdHJpbmcpIHtcbiAgICB2YXIgY29tbWFuZFBhcmFtOiBzdHJpbmc7XG4gICAgdmFyIHByb21wdDogc3RyaW5nO1xuXG4gICAgLy8gVE9ETyBkbyBhYmxhdGlvblxuICAgIHByb21wdCA9IFwiRXh0cmFjdCBcIiArIHBhcmFtICsgXCIgZnJvbSB0aGUgZm9sbG93aW5nOlxcblxcblwiO1xuXG4gICAgY29tbWFuZFBhcmFtID0gT2JqZWN0LmtleXModGhpcy5za2lsbE1ldGFkYXRhWzBdKVswXTtcblxuICAgIHRoaXMuc2tpbGxNZXRhZGF0YS5mb3JFYWNoKCh2YWw6IGFueSwgaW5kZXg6IGFueSwgYXJyYXk6IGFueSkgPT4ge1xuICAgICAgaWYgKGNvbW1hbmRQYXJhbSBpbiB2YWwgJiYgcGFyYW0gaW4gdmFsKSB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID49IDAuNikge1xuICAgICAgICAgIHByb21wdCArPSB2YWxbY29tbWFuZFBhcmFtXSArIFwiID0+IFwiICsgdmFsW3BhcmFtXSArIFwiXFxuXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbXB0ICs9IHZhbFtjb21tYW5kUGFyYW1dICsgXCIgPT4gIFwiICsgdmFsW3BhcmFtXSArIFwiXFxuXFxuXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHByb21wdCArPSBjb21tYW5kICsgXCIgPT4gXCI7XG4gICAgcmV0dXJuIHByb21wdDtcbiAgfVxuXG4gIC8vIEdldCB0d28gcGFyYWxsZWwgbGlzdHMgb2YgY29tbWFuZCBleGFtcGxlcyBhbmQgdGhlIHBhdGhzIHRoZXkgb3JpZ2luYXRlIGZyb21cbiAgZ2V0Q29tbWFuZEV4YW1wbGVzKCkge1xuICAgIHZhciBjb21tYW5kRXhhbXBsZXM6IHN0cmluZ1tdID0gW107XG4gICAgdmFyIHNraWxsUGF0aHM6IHN0cmluZ1tdID0gW107XG4gICAgdmFyIGNvbW1hbmRFeGFtcGxlUGFyYW06IHN0cmluZztcbiAgICB2YXIgbmV3Q29tbWFuZEV4YW1wbGU6IHN0cmluZztcblxuICAgIHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJza2lsbHNldFwiKSkge1xuICAgICAgICBjb21tYW5kRXhhbXBsZVBhcmFtID0gT2JqZWN0LmtleXMoXG4gICAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXJbMF1cbiAgICAgICAgKVswXTtcblxuICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlXG4gICAgICAgICAgLmdldEZpbGVDYWNoZShmaWxlKVxuICAgICAgICAgIC5mcm9udG1hdHRlci5mb3JFYWNoKCh2YWw6IGFueSwgaW5kZXg6IGFueSwgYXJyYXk6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbW1hbmRFeGFtcGxlUGFyYW0gaW4gdmFsKSB7XG4gICAgICAgICAgICAgIG5ld0NvbW1hbmRFeGFtcGxlID0gdmFsW2NvbW1hbmRFeGFtcGxlUGFyYW1dO1xuXG4gICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHZhbCkuZm9yRWFjaCgoZmllbGQsIGZpZWxkSW5kZXgsIGZpZWxkQXJyYXkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIG5ld0NvbW1hbmRFeGFtcGxlID0gbmV3Q29tbWFuZEV4YW1wbGUucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgZmllbGRbMV0sXG4gICAgICAgICAgICAgICAgICAgIFwiIF9fXyBcIlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNvbW1hbmRFeGFtcGxlcyA9IGNvbW1hbmRFeGFtcGxlcy5jb25jYXQobmV3Q29tbWFuZEV4YW1wbGUpO1xuICAgICAgICAgICAgICBza2lsbFBhdGhzID0gc2tpbGxQYXRocy5jb25jYXQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBbY29tbWFuZEV4YW1wbGVzLCBza2lsbFBhdGhzXTtcbiAgfVxuXG4gIC8vIEdldCBjb250ZW50cyBvZiBhIHNraWxsIGF0IGEgcGF0aFxuICBhc3luYyBsb2FkU2tpbGxDb250ZW50cyhza2lsbFBhdGg6IHN0cmluZykge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG1hcmtkb3duRmlsZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAobWFya2Rvd25GaWxlc1tpbmRleF0ucGF0aCA9PSBza2lsbFBhdGgpIHtcbiAgICAgICAgdGhpcy5za2lsbENvbnRlbnRzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChcbiAgICAgICAgICBtYXJrZG93bkZpbGVzW2luZGV4XVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBHZXQgbWV0YWRhdGEgb2YgYSBza2lsbCBhdCBhIHBhdGhcbiAgbG9hZFNraWxsTWV0YWRhdGEoc2tpbGxQYXRoOiBzdHJpbmcpIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gc2tpbGxQYXRoKSB7XG4gICAgICAgIHRoaXMuc2tpbGxNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKFxuICAgICAgICAgIG1hcmtkb3duRmlsZXNbaW5kZXhdXG4gICAgICAgICkuZnJvbnRtYXR0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCBjbG9zZXN0IHNraWxsIHRvIGEgZ2l2ZW4gY29tbWFuZCB0aHJvdWdoIGV4YW1wbGVzXG4gIGFzeW5jIG1hdGNoQ29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICAvLyBIaWRlIHF1b3RlZCBjb250ZW50IGZyb20gY29tbWFuZCBtYXRjaGluZ1xuICAgIGNvbW1hbmQgPSBjb21tYW5kLnJlcGxhY2UoL1wiW1xcc1xcU10qXCIvLCAnXCJcIicpO1xuICAgIHZhciBleGFtcGxlUGF0aFBhaXJzID0gdGhpcy5nZXRDb21tYW5kRXhhbXBsZXMoKTtcbiAgICB2YXIgZXhhbXBsZXMgPSBleGFtcGxlUGF0aFBhaXJzWzBdLFxuICAgICAgcGF0aHMgPSBleGFtcGxlUGF0aFBhaXJzWzFdO1xuXG4gICAgLy8gVE9ETzogUmVmYWN0b3IgaW50byBuZXR3b3JrXG4gICAgY29uc3QgcmF3UmVzcG9uc2UgPSBhd2FpdCBmZXRjaFNlYXJjaCh7XG4gICAgICBwcm9tcHQ6IGNvbW1hbmQsXG4gICAgICBjb250ZXh0OiBleGFtcGxlcyxcbiAgICAgIGdlbmVyYXRlX3BhcmFncmFwaHM6IDEsXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcGF0aHNbY29udGVudFtcIm91dHB1dFwiXVswXV07XG4gIH1cblxuICAvLyBTdWJzdGl0dXRlIHBhcmFtZXRlcnMgd2l0aCBhcmd1bWVudHMgaW4gYSBza2lsbFxuICByZXNvbHZlUGFyYW1zKGRvY3VtZW50OiBzdHJpbmcsIHBhcmFtczogc3RyaW5nW10sIGFyZ3M6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBhcmFtcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciByZSA9IFJlZ0V4cChcIlxcXFwqXCIgKyBwYXJhbXNbaW5kZXhdICsgXCJcXFxcKlwiLCBcImdcIik7XG4gICAgICBkb2N1bWVudCA9IGRvY3VtZW50LnJlcGxhY2UocmUsIGFyZ3NbaW5kZXhdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIH1cblxuICByZW1vdmVGcm9udE1hdHRlcigpIHtcbiAgICB0aGlzLnNraWxsQ29udGVudHMgPSB0aGlzLnNraWxsQ29udGVudHMucmVwbGFjZSgvLS0tW1xcc1xcU10qLS0tL2csIFwiXCIpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Tm90ZXMoKSB7XG4gICAgdmFyIG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgdmFyIG5vdGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG1hcmtkb3duRmlsZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoIW1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGguc3RhcnRzV2l0aChcInNraWxsc2V0XCIpKSB7XG4gICAgICAgIHZhciBub3RlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChtYXJrZG93bkZpbGVzW2luZGV4XSk7XG4gICAgICAgIG5vdGUgPSBVdGlscy5yZW1vdmVNZChub3RlKTtcbiAgICAgICAgbm90ZXMucHVzaChub3RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm90ZXM7XG4gIH1cbn1cblxuLypcbmFyZ21pbiA9PiBBcmdtaW5cblxucmV3YXJkIHN5c3RlbXMgPT4gbmV1cmFsIHN5c3RlbXMgd2hpY2ggcmVndWxhdGUgcmV3YXJkXG5cblJOTnMgYW5kIGJhY2twcm9wYWdhdGlvbiA9PiBiYWNrcHJvcGFnYXRpb24gdGhyb3VnaCB0aW1lIHdpdGggUk5Oc1xuXG5tZXRhcGhvcnMgb2YgY29uY2VwdHMgPT4gY29uY2VwdHMgYXJlIGFzc29jaWF0ZWQgd2l0aCByb29tc1xuXG5OQ0MgPT4gbmV1cmFsIGNvcnJlbGF0ZXMgb2YgY29uc2Npb3VzbmVzc1xuXG4qdG9waWMqID0+XG4qL1xuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duUmVuZGVyZXIsIENvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2tpbGxNYW5hZ2VyIH0gZnJvbSBcIi4vc2tpbGxzXCI7XG5pbXBvcnQgeyBmZXRjaFF1ZXJ5IH0gZnJvbSBcIi4vbmV0d29ya1wiO1xuXG5jb25zdCBjb250ZW50SWQgPSBcImR1YWwtY29udGVudFwiO1xuY29uc3Qgc3RhdHVzSWQgPSBcImR1YWwtc3RhdHVzXCI7XG5leHBvcnQgY29uc3QgaW5wdXRJZCA9IFwiZHVhbC1pbnB1dFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIGN1c3RvbU5hbWUgPSBcIlwiO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGN1c3RvbU5hbWU6IHN0cmluZykge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMuY3VzdG9tTmFtZSA9IGN1c3RvbU5hbWU7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNoYXRcIjtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiRHVhbFwiO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImluZm9cIjtcbiAgfVxuXG4gIHNlbmRNZXNzYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJZCk7XG4gICAgbGV0IHJlcGxpZWQgPSBmYWxzZTtcblxuICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgdGhpcy5kcmF3TWVzc2FnZShpbnB1dC52YWx1ZSwgXCJyaWdodFwiKTtcblxuICAgICAgbGV0IHR5cGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKVxuICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHJlcGxpZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXR1cyhcInR5cGluZy4uLlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRPRE86IE1vdmUgdGV4dCBzYW5pdGF0aW9uIGNvZGUgb3V0IG9mIFZpZXdcbiAgICAgIHZhciBza2lsbE1hbmFnZXIgPSBuZXcgU2tpbGxNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICAgIHNraWxsTWFuYWdlci5mb2xsb3dDb21tYW5kKGlucHV0LnZhbHVlKS50aGVuKChyZXNwb25zZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJlc3BvbnNlXG4gICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAuc3BsaXQoXCJcXG5cXG5cIilcbiAgICAgICAgICAuZm9yRWFjaCgocmVzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3TWVzc2FnZShyZXMsIFwibGVmdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICByZXBsaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoXCJvbmxpbmVcIik7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1ha2VSZXF1ZXN0KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEpTT04+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoUXVlcnkocXVlcnkpO1xuXG4gICAgY29uc3QgcmVzcG9uc2VKU09OID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXNwb25zZUpTT047XG4gIH1cblxuICBsb2FkKCk6IHZvaWQge1xuICAgIHN1cGVyLmxvYWQoKTtcbiAgICB0aGlzLmRyYXcoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhdygpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuXG4gICAgLy8gUm9vdCBub2RlXG4gICAgY29uc3Qgcm9vdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICByb290RWwuaWQgPSBcImR1YWwtcm9vdFwiO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRGl2ID0gcm9vdEVsLmNyZWF0ZUVsKFwiaGVhZGVyXCIsIHtcbiAgICAgIGF0dHI6IHsgaWQ6IFwiZHVhbC1oZWFkZXJcIiB9LFxuICAgIH0pO1xuXG4gICAgLy8gVGl0bGUgYW5kIHN0YXR1c1xuICAgIGhlYWRlckRpdi5jcmVhdGVFbChcImgzXCIsIHtcbiAgICAgIGNsczogXCJkdWFsLWhlYWRlci10aXRsZVwiLFxuICAgICAgdGV4dDogdGhpcy5jdXN0b21OYW1lLFxuICAgIH0pO1xuICAgIGhlYWRlckRpdi5jcmVhdGVFbChcImg2XCIsIHsgdGV4dDogXCJPbmxpbmVcIiwgYXR0cjogeyBpZDogc3RhdHVzSWQgfSB9KTtcblxuICAgIC8vIENvbnZlcnNhdGlvbiBjb250ZW50XG4gICAgcm9vdEVsLmNyZWF0ZURpdih7IGF0dHI6IHsgaWQ6IGNvbnRlbnRJZCB9IH0pO1xuXG4gICAgLy8gRm9vdGVyXG4gICAgY29uc3QgZm9vdGVyRGl2ID0gcm9vdEVsLmNyZWF0ZUVsKFwiZm9vdGVyXCIsIHtcbiAgICAgIGF0dHI6IHsgaWQ6IFwiZHVhbC1mb290ZXJcIiB9LFxuICAgIH0pO1xuXG4gICAgLy8gSW5wdXQgZWxlbWVudFxuICAgIGNvbnN0IGlucHV0ID0gZm9vdGVyRGl2LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBhdHRyOiB7IGlkOiBpbnB1dElkLCBzaXplOiAxIH0sXG4gICAgfSk7XG5cbiAgICAvLyBTZW5kIGJ1dHRvblxuICAgIGNvbnN0IGJ1dHRvbiA9IGZvb3RlckRpdi5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIlNlbmRcIixcbiAgICAgIGF0dHI6IHsgaWQ6IFwiZHVhbC1idG4tc2VuZFwiIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoYnV0dG9uLCBcImNsaWNrXCIsICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKSk7XG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGlucHV0LCBcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvb3RFbCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZywgc2lkZTogXCJsZWZ0XCIgfCBcInJpZ2h0XCIpOiB2b2lkIHtcbiAgICBjb25zdCBjb252ZXJzYXRpb25EaXYgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGVudElkKTtcbiAgICBjb25zdCBtc2cgPSBjb252ZXJzYXRpb25EaXYuY3JlYXRlRGl2KHsgY2xzOiBgZHVhbC1tc2cgZHVhbC1tc2ctJHtzaWRlfWAgfSk7XG5cbiAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKFxuICAgICAgY29udGVudCxcbiAgICAgIG1zZyxcbiAgICAgIHRoaXMuYXBwLnZhdWx0LmdldFJvb3QoKS5wYXRoLFxuICAgICAgbmV3IENvbXBvbmVudCgpXG4gICAgKTtcblxuICAgIGNvbnZlcnNhdGlvbkRpdi5zY3JvbGxCeSgwLCAxMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0U3RhdHVzKGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGxldCBzdGF0dXNQID0gPEhUTUxQYXJhZ3JhcGhFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKTtcbiAgICBzdGF0dXNQLnNldFRleHQoY29udGVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEFwcCxcbiAgTm90aWNlLFxuICBQbHVnaW4sXG4gIFBsdWdpblNldHRpbmdUYWIsXG4gIFNldHRpbmcsXG4gIFdvcmtzcGFjZSxcbiAgRmlsZVN5c3RlbUFkYXB0ZXIsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IENoYXRWaWV3LCB7IGlucHV0SWQgfSBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcblxuaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuICBjdXN0b21OYW1lOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG4gIGN1c3RvbU5hbWU6IFwiRHVhbFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFwiY2hhdFwiLCAobGVhZikgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBDaGF0VmlldyhsZWFmLCB0aGlzLnNldHRpbmdzLmN1c3RvbU5hbWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5ICYmIHRoaXMuaW5pdExlYWYodGhpcy5hcHAud29ya3NwYWNlKTtcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtcmVhZHlcIiwgKCkgPT5cbiAgICAgICAgdGhpcy5pbml0TGVhZih0aGlzLmFwcC53b3Jrc3BhY2UpXG4gICAgICApXG4gICAgKTtcblxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcImZvY3VzLWR1YWwtaW5wdXRcIixcbiAgICAgIG5hbWU6IFwiRm9jdXMgRHVhbCBpbnB1dCBib3hcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dElkKS5mb2N1cygpLFxuICAgIH0pO1xuICB9XG5cbiAgaW5pdExlYWYod29ya3NwYWNlOiBXb3Jrc3BhY2UpOiB2b2lkIHtcbiAgICBpZiAod29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImNoYXRcIikubGVuZ3RoID09IDApIHtcbiAgICAgIHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFwiY2hhdFwiLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IE15UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcbiAgICAgIHRleHQ6IFwiRm9sbG93IHRoZXNlIGluc3RydWN0aW9ucyB0byBzZXQgdXAgeW91ciBEdWFsOlwiLFxuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcImdldE9TKCkgdGVzdFwiKVxuICAgICAgLnNldERlc2MoXCJQcmVzcyB0aGUgYnV0dG9uLlwiKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+IHtcbiAgICAgICAgY2Iuc2V0QnV0dG9uVGV4dChcIkluc3RhbGwgUHl0aG9uXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBiYXNlUGF0aDogc3RyaW5nLFxuICAgICAgICAgICAgICBkdWFsU2VydmVyUGF0aDogc3RyaW5nLFxuICAgICAgICAgICAgICBkdWFsQWJzb2x1dGVCaW5hcnlQYXRoOiBzdHJpbmcsXG4gICAgICAgICAgICAgIGR1YWxSZWxhdGl2ZUJpbmFyeVBhdGg6IHN0cmluZyxcbiAgICAgICAgICAgICAgZHVhbEFic29sdXRlVG9yY2hQYXRoOiBzdHJpbmcsXG4gICAgICAgICAgICAgIGR1YWxSZWxhdGl2ZVRvcmNoUGF0aDogc3RyaW5nLFxuICAgICAgICAgICAgICB0b3JjaFVSTDogc3RyaW5nLFxuICAgICAgICAgICAgICBkdWFsU2VydmVyVVJMOiBzdHJpbmc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGluc3RhbmNlb2YgRmlsZVN5c3RlbUFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChVdGlscy5nZXRPUygpID09IFwibGludXhcIikge1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICAgIFwiU2V0dGluZyB1cCBkdWFsLXNlcnZlciB1c2luZyBkdWFsLW9ic2lkaWFuLWNsaWVudC4uLlwiXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGR1YWxTZXJ2ZXJQYXRoID0gYmFzZVBhdGggKyBcIi8ub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NlcnZlclwiO1xuICAgICAgICAgICAgICBkdWFsQWJzb2x1dGVCaW5hcnlQYXRoID0gZHVhbFNlcnZlclBhdGggKyBcIi9kdWFsLXNlcnZlci1saW51eFwiO1xuICAgICAgICAgICAgICBkdWFsUmVsYXRpdmVCaW5hcnlQYXRoID1cbiAgICAgICAgICAgICAgICBcIi8ub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NlcnZlci9kdWFsLXNlcnZlci1saW51eFwiO1xuICAgICAgICAgICAgICBkdWFsQWJzb2x1dGVUb3JjaFBhdGggPSBkdWFsU2VydmVyUGF0aCArIFwiL2xpYnRvcmNoLnppcFwiO1xuICAgICAgICAgICAgICBkdWFsUmVsYXRpdmVUb3JjaFBhdGggPVxuICAgICAgICAgICAgICAgIFwiLy5vYnNpZGlhbi9wbHVnaW5zL0R1YWwvc2VydmVyL2xpYnRvcmNoLnppcFwiO1xuICAgICAgICAgICAgICBkdWFsU2VydmVyVVJMID1cbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vZ2l0aHViLmNvbS9Qc2lvbmljYS9kdWFsLXNlcnZlci9yZWxlYXNlcy9kb3dubG9hZC9tYXN0ZXItYjdlYThiMTgvZHVhbC1zZXJ2ZXItbGludXhcIjtcbiAgICAgICAgICAgICAgdG9yY2hVUkwgPVxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9kb3dubG9hZC5weXRvcmNoLm9yZy9saWJ0b3JjaC9jcHUvbGlidG9yY2gtc2hhcmVkLXdpdGgtZGVwcy0xLjkuMCUyQmNwdS56aXBcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGR1YWxTZXJ2ZXJQYXRoKSkge1xuICAgICAgICAgICAgICBmcy5ta2RpclN5bmMoZHVhbFNlcnZlclBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZHVhbEFic29sdXRlQmluYXJ5UGF0aCkpIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkRvd25sb2FkaW5nIGR1YWwtc2VydmVyLi4uXCIpO1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGR1YWxTZXJ2ZXJVUkwpO1xuICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdFxuICAgICAgICAgICAgICAgIC5jcmVhdGVCaW5hcnkoZHVhbFJlbGF0aXZlQmluYXJ5UGF0aCwgYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEb3dubG9hZCBjb21wbGV0ZSFcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhkdWFsQWJzb2x1dGVUb3JjaFBhdGgpKSB7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEb3dubG9hZGluZyBsaWJ0b3JjaC4uLlwiKTtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0b3JjaFVSTCk7XG4gICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0XG4gICAgICAgICAgICAgICAgLmNyZWF0ZUJpbmFyeShkdWFsUmVsYXRpdmVUb3JjaFBhdGgsIGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRG93bmxvYWQgY29tcGxldGUhXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMC4gSW5zdGFsbCBQeXRob24gKDMuOCspLlwiKVxuICAgICAgLnNldERlc2MoXCJQcmVzcyB0aGUgYnV0dG9uIHRvIGhlYWQgb3ZlciB0byB0aGUgZG93bmxvYWQgcGFnZS5cIilcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCBQeXRob25cIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5weXRob24ub3JnL2Rvd25sb2Fkcy9cIik7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMS4gQ29weSBzbmFwc2hvdC5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlByZXNzIHRoZSBidXR0b24gdG8gY29weSB0aGUgZW50aXJlIHZhdWx0IGFzIGNvbmNhdGVuYXRlZCBwbGFpbiB0ZXh0LlwiXG4gICAgICApXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvcHkgc25hcHNob3RcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkxvYWRpbmcgZmlsZXMuLi5cIik7XG5cbiAgICAgICAgICAgIGxldCBjb25jYXRlbmF0ZWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvLyBUT0RPIFVzZSBQcm9taXNlLmFsbCgpIC8gbWFwIC8gcmVkdWNlXG5cbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZWxlbWVudCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzID0gcmVzXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXi0tLVtcXHNcXFNdKi0tLVxcbiovZywgXCJcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFtbXlxcfFxcW1xcXV0qXFx8KFteXFx8XFxbXFxdXSopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFsoLiopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9gYGAoW15gXSkqYGBgXFxuKi9nLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcJChbXiRdKSpcXCQqL2csIFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gY29uY2F0ZW5hdGVkLmNvbmNhdChyZXMsIFwiXFxuXFxuXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgY29weVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKVxuICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gY29uY2F0ZW5hdGVkLnNsaWNlKDAsIDUwMDAwMDApO1xuICAgICAgICAgICAgICBjb25jYXRlbmF0ZWQgPSBVdGlscy5yZW1vdmVNZChjb25jYXRlbmF0ZWQpO1xuICAgICAgICAgICAgICBVdGlscy5jb3B5U3RyaW5nVG9DbGlwYm9hcmQoY29uY2F0ZW5hdGVkKTtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNuYXBzaG90IHN1Y2Nlc3NmdWxseSBjb3BpZWQgdG8gY2xpcGJvYXJkIVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjIuIERlcml2ZSB0aGUgZXNzZW5jZS5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIkFmdGVyIGZvbGxvd2luZyB0aGUgb25saW5lIGluc3RydWN0aW9ucywgZXh0cmFjdCAnZXNzZW5jZS56aXAnIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsLycuXCJcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiU3RhcnQgYWxpZ25tZW50XCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFxuICAgICAgICAgICAgICBcImh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9kcml2ZS8xQ09iZWhhbjVnbVlPLVR2eXlZcTk3M2EzaC1fRVlyOV8/dXNwPXNoYXJpbmdcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCIzLiBDb25maWd1cmUgdGhlIHNrZWxldG9uLlwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiUnVuICdweXRob24zIC1tIHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHQnIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NrZWxldG9uLycuXCJcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiNC4gUnVuIHRoZSBza2VsZXRvbiBhZnRlciB5b3UgY29uZmlndXJlZCB0aGUgZXNzZW5jZS5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlJ1biAncHl0aG9uMyBzZXJ2ZXIucHkgLS1wYXRoIC9wYXRoL3RvL3lvdXIvdmF1bHQvJyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC9za2VsZXRvbi8nLlwiXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjUuIFJlc3RhcnQgT2JzaWRpYW4uXCIpXG4gICAgICAuc2V0RGVzYyhcIkhlYWQgb3ZlciB0byB0aGUgcmlnaHQgc2lkZSBwYW5lbCB0byB0YWxrIHdpdGggeW91ciBEdWFsIVwiKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgdGV4dDogXCJDb25ncmF0dWxhdGlvbnMgb24gc2V0dGluZyB1cCB5b3VyIER1YWwhXCIsXG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5hbWVcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIkN1c3RvbWl6ZSB5b3VyIER1YWwncyBuYW1lIHVzaW5nIHRoZSBpbnB1dCBib3guIFJlbG9hZCBPYnNpZGlhbiBmb3IgdGhpcyB0byB0YWtlIGVmZmVjdC5cIlxuICAgICAgKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJEdWFsXCIpXG4gICAgICAgICAgLnNldFZhbHVlKFwiXCIpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiR2V0IGludm9sdmVkIVwiKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJSZXBvcnQgYnVnc1wiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9Qc2lvbmljYS9EdWFsL2lzc3Vlc1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJKb2luIFBzaW9uaWNhXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9wc2lvbmljYS5vcmcvXCIpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTWFya2Rvd25SZW5kZXJlciIsIkNvbXBvbmVudCIsIkl0ZW1WaWV3IiwiUGx1Z2luIiwiU2V0dGluZyIsIkZpbGVTeXN0ZW1BZGFwdGVyIiwiTm90aWNlIiwiZnMiLCJQbHVnaW5TZXR0aW5nVGFiIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ25DLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO0FBQ3pDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFlBQVksS0FBSyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwRixRQUFRLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUMxRyxJQUFJLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQixDQUFDLENBQUM7QUFDRjtBQUNPLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDaEMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEtBQUssSUFBSTtBQUM3QyxRQUFRLE1BQU0sSUFBSSxTQUFTLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDLENBQUM7QUFDbEcsSUFBSSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLElBQUksU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO0FBQzNDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN6RixDQUFDO0FBdUNEO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxLQUFLLENBQUMsQ0FBQztBQUNQLENBQUM7QUFDRDtBQUNPLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDM0MsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JILElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDN0osSUFBSSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN0RSxJQUFJLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRTtBQUN0QixRQUFRLElBQUksQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUN0RSxRQUFRLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDdEIsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN6SyxZQUFZLElBQUksQ0FBQyxHQUFH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
