/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var Utils;
(function (Utils) {
    function copyStringToClipboard(content) {
        var el = document.createElement("textarea");
        el.value = content;
        el.setAttribute("readonly", "");
        document.body.appendChild(el);
        el.select();
        document.execCommand("copy");
        document.body.removeChild(el);
    }
    Utils.copyStringToClipboard = copyStringToClipboard;
    function removeMd(md, options = {
        listUnicodeChar: "",
        stripListLeaders: true,
        gfm: true,
        useImgAltText: true,
    }) {
        let output = md
            .replace(/^---[\s\S]*---\n*/g, "")
            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
            .replace(/\[\[(.*)\]\]/g, "$1")
            .replace(/```([^`])*```\n*/g, "")
            .replace(/\$([^$])*\$*/g, "")
            .replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, "");
        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
                else
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
            }
            if (options.gfm) {
                output = output
                    // Header
                    .replace(/\n={2,}/g, "\n")
                    // Fenced codeblocks
                    .replace(/~{3}.*\n/g, "")
                    // Strikethrough
                    .replace(/~~/g, "")
                    // Fenced codeblocks
                    .replace(/`{3}.*\n/g, "");
            }
            output = output
                // Remove HTML tags
                .replace(/<[^>]*>/g, "")
                // Remove setext-style headers
                .replace(/^[=\-]{2,}\s*$/g, "")
                // Remove footnotes?
                .replace(/\[\^.+?\](\: .*?$)?/g, "")
                .replace(/\s{0,2}\[.*?\]: .*?$/g, "")
                // Remove images
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "")
                // Remove inline links
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, "$1")
                // Remove blockquotes
                .replace(/^\s{0,3}>\s?/g, "")
                // Remove reference-style links?
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "")
                // Remove atx-style headers
                .replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm, "$1$2$3")
                // Remove emphasis (repeat the line to remove double emphasis)
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                // Remove code blocks
                .replace(/(`{3,})(.*?)\1/gm, "$2")
                // Remove inline code
                .replace(/`(.+?)`/g, "$1")
                // Replace two or more newlines with exactly two? Not entirely sure this belongs here...
                .replace(/\n{2,}/g, "\n\n");
        }
        catch (e) {
            console.error(e);
            return md;
        }
        return output;
    }
    Utils.removeMd = removeMd;
})(Utils || (Utils = {}));

const DUAL_URL = "http://127.0.0.1:3030";
const fetchEndpoint = (endpoint, init) => fetch(DUAL_URL + endpoint, init);
const getEndpoint = (endpoint) => fetchEndpoint(endpoint);
const postEndpoint = (endpoint, body) => fetchEndpoint(endpoint, {
    method: "POST",
    headers: { Accept: "application/json", "Content-Type": "application/json" },
    body: JSON.stringify(body),
});
const fetchQuery = (query) => getEndpoint("/query" + encodeURIComponent(query));
const fetchGenerate = (body) => postEndpoint("/generate", body);
const fetchSearch = (body) => postEndpoint("/search", body);

class SkillManager {
    constructor(app) {
        this.app = app;
    }
    // Returns result of following a command
    followCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            var skillPath = yield this.matchCommand(command);
            console.log("FOLLOWING", command, "USING", skillPath);
            var result = "meh"; //this.useSkill(skillPath, command);
            return result;
        });
    }
    // Uses a skill when following a command
    useSkill(skillPath, command) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSkillContents(skillPath);
            this.loadSkillMetadata(skillPath);
            this.removeFrontMatter();
            var params = yield this.getParams(this.skillContents);
            var args = yield this.getArgs(command, params);
            this.skillContents = this.resolveParams(this.skillContents, params, args);
            var codeBlocks = this.detectCodeBlocks();
            var [splitBlockList, blockTypes] = this.splitBlocks(codeBlocks);
            var [splitBlockList, textSoFar] = yield this.interpretBlocks(splitBlockList, blockTypes);
            var result = this.getLastBlock(splitBlockList);
            return result;
        });
    }
    // Walk through blocks and take actions based on them
    interpretBlocks(splitBlocks, blockTypes) {
        return __awaiter(this, void 0, void 0, function* () {
            var newText, textSoFar = "";
            for (let index = 0; index < splitBlocks.length; index++) {
                newText = this.resolveBodyReferences(splitBlocks, blockTypes, index, textSoFar);
                splitBlocks[index] = newText;
                switch (blockTypes[index]) {
                    case "text":
                        textSoFar = textSoFar.concat(newText);
                        break;
                    case "js":
                        splitBlocks[index] = yield this.waitEval(splitBlocks[index]);
                        textSoFar = textSoFar.concat(splitBlocks[index]);
                        break;
                    case "dual":
                        splitBlocks[index] = yield this.followCommand(newText);
                        textSoFar = textSoFar.concat(splitBlocks[index] + " ");
                }
            }
            return [splitBlocks, textSoFar];
        });
    }
    // Wait for eval wrapper
    waitEval(toEval) {
        return __awaiter(this, void 0, void 0, function* () {
            return eval(toEval);
        });
    }
    // Fill in "#N" structures in skill body based on reference code block result
    resolveBodyReferences(splitBlocks, blockTypes, reachedIndex, textSoFar) {
        var newText = splitBlocks[reachedIndex];
        newText = newText.replace("#0", textSoFar);
        for (let referencedCodeBlock = 1; referencedCodeBlock <= reachedIndex; referencedCodeBlock++) {
            if (newText.includes("#" + referencedCodeBlock)) {
                var remainingCodeBlocks = referencedCodeBlock;
                for (let blockIndex = 0; blockIndex < splitBlocks.length && remainingCodeBlocks > 0; blockIndex++) {
                    if (splitBlocks[blockIndex].toString().trim() != "" ||
                        blockTypes[blockIndex] != "text") {
                        remainingCodeBlocks--;
                    }
                    if (remainingCodeBlocks == 0) {
                        newText = newText.replace("#" + referencedCodeBlock, splitBlocks[blockIndex]);
                    }
                }
            }
        }
        return newText;
    }
    getLastBlock(splitBlocks) {
        for (let blockIndex = splitBlocks.length - 1; blockIndex >= 0; blockIndex--) {
            if (splitBlocks[blockIndex].toString().trim() != "") {
                return splitBlocks[blockIndex];
            }
        }
    }
    // Get list of all blocks with type and contents
    splitBlocks(codeBlocks) {
        var splitBlockList = [this.skillContents], blockTypes = ["text"];
        for (let index = 0; index < codeBlocks.length; index++) {
            splitBlockList.push(codeBlocks[index]["contents"]);
            blockTypes.push(codeBlocks[index]["type"]);
            splitBlockList.push(splitBlockList[2 * index].slice(codeBlocks[index]["end"]));
            blockTypes.push("text");
            splitBlockList[2 * index] = splitBlockList[2 * index].slice(0, codeBlocks[index]["start"]);
            for (let indexFuture = index + 1; indexFuture < codeBlocks.length; indexFuture++) {
                codeBlocks[indexFuture]["start"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
                codeBlocks[indexFuture]["end"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
            }
        }
        return [splitBlockList, blockTypes];
    }
    // Get a list of code blocks with details
    detectCodeBlocks() {
        let m, res = [];
        const re = RegExp(/\`\`\`(?<type>\w+)(?<contents>(?:\`[^\`]|[^\`])*)\`\`\`/, "g");
        do {
            m = re.exec(this.skillContents);
            if (m) {
                res = res.concat({
                    type: m["groups"]["type"],
                    contents: m["groups"]["contents"].trim(),
                    start: m["index"],
                    end: m["index"] + m[0].length,
                });
            }
        } while (m);
        return res;
    }
    // Get list of parameters mentioned in a skill
    getParams(document) {
        return __awaiter(this, void 0, void 0, function* () {
            var re = /\*[a-zA-Z0-9\s]*\*/g;
            var params = document.match(re);
            if (params != null) {
                params.forEach((val, index, params) => {
                    params[index] = val.substring(1, val.length - 1);
                });
                return params;
            }
            return [];
        });
    }
    // Parse arguments from the command
    getArgs(command, params) {
        return __awaiter(this, void 0, void 0, function* () {
            var args = [], res;
            for (let index = 0; index < params.length; index++) {
                res = yield this.getArg(command, params[index]);
                args = args.concat(res);
            }
            return args;
        });
    }
    // Parse one argument from the command
    getArg(command, param) {
        return __awaiter(this, void 0, void 0, function* () {
            if (param == Object.keys(this.skillMetadata[0])[0]) {
                return command;
            }
            var prompt = this.getParamPrompt(command, param);
            const rawResponse = yield fetchGenerate({
                prompt: prompt,
                context: [command],
                generate_paragraphs: 1,
            });
            var content = yield rawResponse.json();
            content = content["output"][0].trim();
            return content;
        });
    }
    getParamPrompt(command, param) {
        var commandParam;
        var prompt;
        // TODO do ablation
        prompt = "Extract " + param + " from the following:\n\n";
        commandParam = Object.keys(this.skillMetadata[0])[0];
        this.skillMetadata.forEach((val, index, array) => {
            if (commandParam in val && param in val) {
                if (Math.random() >= 0.6) {
                    prompt += val[commandParam] + " => " + val[param] + "\n\n";
                }
                else {
                    prompt += val[commandParam] + " =>  " + val[param] + "\n\n";
                }
            }
        });
        prompt += command + " => ";
        return prompt;
    }
    // Get two parallel lists of command examples and the paths they originate from
    getCommandExamples() {
        var commandExamples = [];
        var skillPaths = [];
        var commandExampleParam;
        var newCommandExample;
        this.app.vault.getMarkdownFiles().forEach((file) => {
            if (file.path.startsWith("skillset")) {
                commandExampleParam = Object.keys(this.app.metadataCache.getFileCache(file).frontmatter[0])[0];
                this.app.metadataCache
                    .getFileCache(file)
                    .frontmatter.slice(0, 2)
                    .forEach((val, index, array) => {
                    if (commandExampleParam in val) {
                        newCommandExample = val[commandExampleParam];
                        commandExamples = commandExamples.concat(newCommandExample);
                        skillPaths = skillPaths.concat(file.path);
                    }
                });
            }
        });
        return [commandExamples, skillPaths];
    }
    // Get contents of a skill at a path
    loadSkillContents(skillPath) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            for (let index = 0; index < markdownFiles.length; index++) {
                if (markdownFiles[index].path == skillPath) {
                    this.skillContents = yield this.app.vault.cachedRead(markdownFiles[index]);
                }
            }
        });
    }
    // Get metadata of a skill at a path
    loadSkillMetadata(skillPath) {
        var markdownFiles = this.app.vault.getMarkdownFiles();
        for (let index = 0; index < markdownFiles.length; index++) {
            if (markdownFiles[index].path == skillPath) {
                this.skillMetadata = this.app.metadataCache.getFileCache(markdownFiles[index]).frontmatter;
            }
        }
    }
    // Find closest skill to a given command through examples
    matchCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            // Hide quoted content from command matching
            command = command.replace(/"[\s\S]*"/, '""');
            var examplePathPairs = this.getCommandExamples();
            var examples = examplePathPairs[0].reverse(), paths = examplePathPairs[1].reverse();
            //this.shuffle(examples, paths);
            var filenames = paths.map((e) => e.replace(/^.*[\\\/]/, "").slice(0, -3)), searchPrompt = "";
            for (let index = 0; index < examples.length; index++) {
                searchPrompt += examples[index] + " => " + filenames[index] + "\n\n";
            }
            searchPrompt += command + " =>";
            console.log(searchPrompt);
            // TODO: Refactor into network
            const rawResponse = yield fetchSearch({
                prompt: searchPrompt,
                context: filenames.map((e) => " " + e + "\n\n"),
                generate_paragraphs: 1,
            });
            var content = yield rawResponse.json();
            return paths[content["output"][0]];
        });
    }
    shuffle(obj1, obj2) {
        var index = obj1.length;
        var rnd, tmp1, tmp2;
        while (index) {
            rnd = Math.floor(Math.random() * index);
            index -= 1;
            tmp1 = obj1[index];
            tmp2 = obj2[index];
            obj1[index] = obj1[rnd];
            obj2[index] = obj2[rnd];
            obj1[rnd] = tmp1;
            obj2[rnd] = tmp2;
        }
    }
    // Substitute parameters with arguments in a skill
    resolveParams(document, params, args) {
        for (let index = 0; index < params.length; index++) {
            var re = RegExp("\\*" + params[index] + "\\*", "g");
            document = document.replace(re, args[index]);
        }
        return document;
    }
    removeFrontMatter() {
        this.skillContents = this.skillContents.replace(/---[\s\S]*---/g, "");
    }
    getNotes() {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            var notes = [];
            for (let index = 0; index < markdownFiles.length; index++) {
                if (!markdownFiles[index].path.startsWith("skillset")) {
                    var note = yield this.app.vault.cachedRead(markdownFiles[index]);
                    note = Utils.removeMd(note);
                    notes.push(note);
                }
            }
            return notes;
        });
    }
}
/*
argmin => Argmin

reward systems => neural systems which regulate reward

RNNs and backpropagation => backpropagation through time with RNNs

metaphors of concepts => concepts are associated with rooms

NCC => neural correlates of consciousness

*topic* =>
*/

const contentId = "dual-content";
const statusId = "dual-status";
const inputId = "dual-input";
class ChatView extends obsidian.ItemView {
    constructor(leaf, customName) {
        super(leaf);
        this.customName = "";
        this.customName = customName;
    }
    getViewType() {
        return "chat";
    }
    getDisplayText() {
        return "Dual";
    }
    getIcon() {
        return "info";
    }
    sendMessage() {
        const input = document.getElementById(inputId);
        let replied = false;
        if (input.value !== "") {
            this.drawMessage(input.value, "right");
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                if (replied == false) {
                    this.setStatus("typing...");
                }
            });
            // TODO: Move text sanitation code out of View
            var skillManager = new SkillManager(this.app);
            skillManager.followCommand(input.value).then((response) => {
                response
                    .toString()
                    .split("\n\n")
                    .forEach((res) => {
                    if (res.trim() != "") {
                        this.drawMessage(res, "left");
                    }
                });
                replied = true;
                this.setStatus("online");
            });
            input.value = "";
        }
    }
    makeRequest(query) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetchQuery(query);
            const responseJSON = yield response.json();
            return responseJSON;
        });
    }
    load() {
        super.load();
        this.draw();
    }
    draw() {
        const container = this.containerEl.children[1];
        // Root node
        const rootEl = document.createElement("div");
        rootEl.id = "dual-root";
        // Header
        const headerDiv = rootEl.createEl("header", {
            attr: { id: "dual-header" },
        });
        // Title and status
        headerDiv.createEl("h3", {
            cls: "dual-header-title",
            text: this.customName,
        });
        headerDiv.createEl("h6", { text: "Online", attr: { id: statusId } });
        // Conversation content
        rootEl.createDiv({ attr: { id: contentId } });
        // Footer
        const footerDiv = rootEl.createEl("footer", {
            attr: { id: "dual-footer" },
        });
        // Input element
        const input = footerDiv.createEl("input", {
            type: "text",
            attr: { id: inputId, size: 1 },
        });
        // Send button
        const button = footerDiv.createEl("button", {
            text: "Send",
            attr: { id: "dual-btn-send" },
        });
        this.registerDomEvent(button, "click", () => this.sendMessage());
        this.registerDomEvent(input, "keydown", (event) => {
            if (event.key === "Enter") {
                this.sendMessage();
            }
        });
        container.empty();
        container.appendChild(rootEl);
    }
    drawMessage(content, side) {
        const conversationDiv = document.getElementById(contentId);
        const msg = conversationDiv.createDiv({ cls: `dual-msg dual-msg-${side}` });
        obsidian.MarkdownRenderer.renderMarkdown(content, msg, this.app.vault.getRoot().path, new obsidian.Component());
        conversationDiv.scrollBy(0, 1000);
    }
    setStatus(content) {
        let statusP = document.getElementById(statusId);
        statusP.setText(content);
    }
}

const DEFAULT_SETTINGS = {
    customName: "Dual",
};
class MyPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.registerView("chat", (leaf) => {
                return new ChatView(leaf, this.settings.customName);
            });
            this.app.workspace.layoutReady && this.initLeaf(this.app.workspace);
            this.registerEvent(this.app.workspace.on("layout-ready", () => this.initLeaf(this.app.workspace)));
            this.addSettingTab(new SampleSettingTab(this.app, this));
            this.addCommand({
                id: "focus-dual-input",
                name: "Focus Dual input box",
                callback: () => document.getElementById(inputId).focus(),
            });
        });
    }
    initLeaf(workspace) {
        if (workspace.getLeavesOfType("chat").length == 0) {
            workspace.getRightLeaf(false).setViewState({
                type: "chat",
            });
        }
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.app = app;
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl("h3", {
            text: "Follow these instructions to set up your Dual:",
        });
        new obsidian.Setting(containerEl)
            .setName("RECIPE TEST")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("TEST")
            .setClass("mod-cta")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            alert("Testing");
        })));
        new obsidian.Setting(containerEl)
            .setName("0. Install Python (3.8+).")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("Install Python")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://www.python.org/downloads/");
        }));
        new obsidian.Setting(containerEl)
            .setName("1. Copy snapshot.")
            .setDesc("Press the button to copy the entire vault as concatenated plain text.")
            .addButton((cb) => cb
            .setButtonText("Copy snapshot")
            .setClass("mod-cta")
            .onClick(() => {
            new obsidian.Notice("Loading files...");
            let concatenated = "";
            // TODO Use Promise.all() / map / reduce
            this.app.vault.getMarkdownFiles().forEach((element) => {
                this.app.vault.cachedRead(element).then((res) => {
                    res = res
                        .replace(/^---[\s\S]*---\n*/g, "")
                        .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
                        .replace(/\[\[(.*)\]\]/g, "$1")
                        .replace(/```([^`])*```\n*/g, "")
                        .replace(/\$([^$])*\$*/g, "");
                    concatenated = concatenated.concat(res, "\n\n");
                });
            });
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                concatenated = concatenated.slice(0, 5000000);
                concatenated = Utils.removeMd(concatenated);
                Utils.copyStringToClipboard(concatenated);
                new obsidian.Notice("Snapshot successfully copied to clipboard!");
            });
        }));
        new obsidian.Setting(containerEl)
            .setName("2. Derive the essence.")
            .setDesc("After following the online instructions, extract 'essence.zip' in '.obsidian/plugins/Dual/'.")
            .addButton((cb) => cb
            .setButtonText("Start alignment")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://colab.research.google.com/drive/1CObehan5gmYO-TvyyYq973a3h-_EYr9_?usp=sharing");
        }));
        new obsidian.Setting(containerEl)
            .setName("3. Configure the skeleton.")
            .setDesc("Run 'python3 -m pip install -r requirements.txt' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("4. Run the skeleton after you configured the essence.")
            .setDesc("Run 'python3 server.py --path /path/to/your/vault/' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("5. Restart Obsidian.")
            .setDesc("Head over to the right side panel to talk with your Dual!");
        containerEl.createEl("h3", {
            text: "Congratulations on setting up your Dual!",
        });
        new obsidian.Setting(containerEl)
            .setName("Custom name")
            .setDesc("Customize your Dual's name using the input box. Reload Obsidian for this to take effect.")
            .addText((text) => text
            .setPlaceholder("Dual")
            .setValue("")
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.customName = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName("Get involved!")
            .addButton((cb) => cb
            .setButtonText("Report bugs")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://github.com/Psionica/Dual/issues");
        }))
            .addButton((cb) => cb
            .setButtonText("Join Psionica")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://psionica.org/");
        }));
    }
}

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInV0aWxzLnRzIiwibmV0d29yay50cyIsInNraWxscy50cyIsInZpZXcudHMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcclxuICAgICAgICB0b1tqXSA9IGZyb21baV07XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJpdmF0ZU1hcC5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlTWFwLnNldChyZWNlaXZlciwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiIsImV4cG9ydCBtb2R1bGUgVXRpbHMge1xuICBleHBvcnQgZnVuY3Rpb24gY29weVN0cmluZ1RvQ2xpcGJvYXJkKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICBlbC52YWx1ZSA9IGNvbnRlbnQ7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJcIik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgZWwuc2VsZWN0KCk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICB9XG5cbiAgaW50ZXJmYWNlIFJlbW92ZU1kT3B0aW9ucyB7XG4gICAgbGlzdFVuaWNvZGVDaGFyPzogc3RyaW5nO1xuICAgIHN0cmlwTGlzdExlYWRlcnM/OiBib29sZWFuO1xuICAgIGdmbT86IGJvb2xlYW47XG4gICAgdXNlSW1nQWx0VGV4dD86IGJvb2xlYW47XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlTWQoXG4gICAgbWQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBSZW1vdmVNZE9wdGlvbnMgPSB7XG4gICAgICBsaXN0VW5pY29kZUNoYXI6IFwiXCIsXG4gICAgICBzdHJpcExpc3RMZWFkZXJzOiB0cnVlLFxuICAgICAgZ2ZtOiB0cnVlLFxuICAgICAgdXNlSW1nQWx0VGV4dDogdHJ1ZSxcbiAgICB9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBtZFxuICAgICAgLnJlcGxhY2UoL14tLS1bXFxzXFxTXSotLS1cXG4qL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbW15cXHxcXFtcXF1dKlxcfChbXlxcfFxcW1xcXV0qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbKC4qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvYGBgKFteYF0pKmBgYFxcbiovZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXCQoW14kXSkqXFwkKi9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL14oLVxccyo/fFxcKlxccyo/fF9cXHMqPyl7Myx9XFxzKiQvZ20sIFwiXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyKVxuICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKFxuICAgICAgICAgICAgL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sXG4gICAgICAgICAgICBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciArIFwiICQxXCJcbiAgICAgICAgICApO1xuICAgICAgICBlbHNlIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCBcIiQxXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZ2ZtKSB7XG4gICAgICAgIG91dHB1dCA9IG91dHB1dFxuICAgICAgICAgIC8vIEhlYWRlclxuICAgICAgICAgIC5yZXBsYWNlKC9cXG49ezIsfS9nLCBcIlxcblwiKVxuICAgICAgICAgIC8vIEZlbmNlZCBjb2RlYmxvY2tzXG4gICAgICAgICAgLnJlcGxhY2UoL357M30uKlxcbi9nLCBcIlwiKVxuICAgICAgICAgIC8vIFN0cmlrZXRocm91Z2hcbiAgICAgICAgICAucmVwbGFjZSgvfn4vZywgXCJcIilcbiAgICAgICAgICAvLyBGZW5jZWQgY29kZWJsb2Nrc1xuICAgICAgICAgIC5yZXBsYWNlKC9gezN9LipcXG4vZywgXCJcIik7XG4gICAgICB9XG4gICAgICBvdXRwdXQgPSBvdXRwdXRcbiAgICAgICAgLy8gUmVtb3ZlIEhUTUwgdGFnc1xuICAgICAgICAucmVwbGFjZSgvPFtePl0qPi9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgc2V0ZXh0LXN0eWxlIGhlYWRlcnNcbiAgICAgICAgLnJlcGxhY2UoL15bPVxcLV17Mix9XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGZvb3Rub3Rlcz9cbiAgICAgICAgLnJlcGxhY2UoL1xcW1xcXi4rP1xcXShcXDogLio/JCk/L2csIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXHN7MCwyfVxcWy4qP1xcXTogLio/JC9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW1hZ2VzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9cXCFcXFsoLio/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZyxcbiAgICAgICAgICBvcHRpb25zLnVzZUltZ0FsdFRleHQgPyBcIiQxXCIgOiBcIlwiXG4gICAgICAgIClcbiAgICAgICAgLy8gUmVtb3ZlIGlubGluZSBsaW5rc1xuICAgICAgICAucmVwbGFjZSgvXFxbKC4qPylcXF1bXFxbXFwoXS4qP1tcXF1cXCldL2csIFwiJDFcIilcbiAgICAgICAgLy8gUmVtb3ZlIGJsb2NrcXVvdGVzXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzezAsM30+XFxzPy9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgcmVmZXJlbmNlLXN0eWxlIGxpbmtzP1xuICAgICAgICAucmVwbGFjZSgvXlxcc3sxLDJ9XFxbKC4qPylcXF06IChcXFMrKSggXCIuKj9cIik/XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGF0eC1zdHlsZSBoZWFkZXJzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9eKFxcbik/XFxzezAsfSN7MSw2fVxccyt8IHswLH0oXFxuKT9cXHN7MCx9I3swLH0gezAsfShcXG4pP1xcc3swLH0kL2dtLFxuICAgICAgICAgIFwiJDEkMiQzXCJcbiAgICAgICAgKVxuICAgICAgICAvLyBSZW1vdmUgZW1waGFzaXMgKHJlcGVhdCB0aGUgbGluZSB0byByZW1vdmUgZG91YmxlIGVtcGhhc2lzKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgY29kZSBibG9ja3NcbiAgICAgICAgLnJlcGxhY2UoLyhgezMsfSkoLio/KVxcMS9nbSwgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW5saW5lIGNvZGVcbiAgICAgICAgLnJlcGxhY2UoL2AoLis/KWAvZywgXCIkMVwiKVxuICAgICAgICAvLyBSZXBsYWNlIHR3byBvciBtb3JlIG5ld2xpbmVzIHdpdGggZXhhY3RseSB0d28/IE5vdCBlbnRpcmVseSBzdXJlIHRoaXMgYmVsb25ncyBoZXJlLi4uXG4gICAgICAgIC5yZXBsYWNlKC9cXG57Mix9L2csIFwiXFxuXFxuXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICByZXR1cm4gbWQ7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cbiIsImNvbnN0IERVQUxfVVJMID0gXCJodHRwOi8vMTI3LjAuMC4xOjMwMzBcIjtcblxuaW50ZXJmYWNlIElQb3N0Qm9keSB7XG4gIHByb21wdDogc3RyaW5nO1xuICBjb250ZXh0OiBzdHJpbmdbXTtcbiAgZ2VuZXJhdGVfcGFyYWdyYXBoczogbnVtYmVyO1xufVxuXG5jb25zdCBmZXRjaEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcsIGluaXQ/OiBSZXF1ZXN0SW5pdCkgPT5cbiAgZmV0Y2goRFVBTF9VUkwgKyBlbmRwb2ludCwgaW5pdCk7XG5cbmNvbnN0IGdldEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcpID0+IGZldGNoRW5kcG9pbnQoZW5kcG9pbnQpO1xuY29uc3QgcG9zdEVuZHBvaW50ID0gKGVuZHBvaW50OiBzdHJpbmcsIGJvZHk6IG9iamVjdCkgPT5cbiAgZmV0Y2hFbmRwb2ludChlbmRwb2ludCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGZldGNoUXVlcnkgPSAocXVlcnk6IHN0cmluZykgPT5cbiAgZ2V0RW5kcG9pbnQoXCIvcXVlcnlcIiArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuZXhwb3J0IGNvbnN0IGZldGNoR2VuZXJhdGUgPSAoYm9keTogSVBvc3RCb2R5KSA9PlxuICBwb3N0RW5kcG9pbnQoXCIvZ2VuZXJhdGVcIiwgYm9keSk7XG5leHBvcnQgY29uc3QgZmV0Y2hTZWFyY2ggPSAoYm9keTogSVBvc3RCb2R5KSA9PiBwb3N0RW5kcG9pbnQoXCIvc2VhcmNoXCIsIGJvZHkpO1xuIiwiaW1wb3J0IHsgQXBwLCBGcm9udE1hdHRlckNhY2hlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBmZXRjaEdlbmVyYXRlLCBmZXRjaFNlYXJjaCB9IGZyb20gXCIuL25ldHdvcmtcIjtcblxuZXhwb3J0IGNsYXNzIFNraWxsTWFuYWdlciB7XG4gIGFwcDogQXBwO1xuICBza2lsbE1ldGFkYXRhOiBGcm9udE1hdHRlckNhY2hlO1xuICBza2lsbENvbnRlbnRzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgfVxuXG4gIC8vIFJldHVybnMgcmVzdWx0IG9mIGZvbGxvd2luZyBhIGNvbW1hbmRcbiAgYXN5bmMgZm9sbG93Q29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICB2YXIgc2tpbGxQYXRoID0gYXdhaXQgdGhpcy5tYXRjaENvbW1hbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coXCJGT0xMT1dJTkdcIiwgY29tbWFuZCwgXCJVU0lOR1wiLCBza2lsbFBhdGgpO1xuICAgIHZhciByZXN1bHQgPSBcIm1laFwiOyAvL3RoaXMudXNlU2tpbGwoc2tpbGxQYXRoLCBjb21tYW5kKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBVc2VzIGEgc2tpbGwgd2hlbiBmb2xsb3dpbmcgYSBjb21tYW5kXG4gIGFzeW5jIHVzZVNraWxsKHNraWxsUGF0aDogc3RyaW5nLCBjb21tYW5kOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTa2lsbENvbnRlbnRzKHNraWxsUGF0aCk7XG4gICAgdGhpcy5sb2FkU2tpbGxNZXRhZGF0YShza2lsbFBhdGgpO1xuICAgIHRoaXMucmVtb3ZlRnJvbnRNYXR0ZXIoKTtcblxuICAgIHZhciBwYXJhbXM6IHN0cmluZ1tdID0gYXdhaXQgdGhpcy5nZXRQYXJhbXModGhpcy5za2lsbENvbnRlbnRzKTtcbiAgICB2YXIgYXJnczogc3RyaW5nW10gPSBhd2FpdCB0aGlzLmdldEFyZ3MoY29tbWFuZCwgcGFyYW1zKTtcbiAgICB0aGlzLnNraWxsQ29udGVudHMgPSB0aGlzLnJlc29sdmVQYXJhbXModGhpcy5za2lsbENvbnRlbnRzLCBwYXJhbXMsIGFyZ3MpO1xuXG4gICAgdmFyIGNvZGVCbG9ja3MgPSB0aGlzLmRldGVjdENvZGVCbG9ja3MoKTtcbiAgICB2YXIgW3NwbGl0QmxvY2tMaXN0LCBibG9ja1R5cGVzXSA9IHRoaXMuc3BsaXRCbG9ja3MoY29kZUJsb2Nrcyk7XG4gICAgdmFyIFtzcGxpdEJsb2NrTGlzdCwgdGV4dFNvRmFyXSA9IGF3YWl0IHRoaXMuaW50ZXJwcmV0QmxvY2tzKFxuICAgICAgc3BsaXRCbG9ja0xpc3QsXG4gICAgICBibG9ja1R5cGVzXG4gICAgKTtcblxuICAgIHZhciByZXN1bHQgPSB0aGlzLmdldExhc3RCbG9jayhzcGxpdEJsb2NrTGlzdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFdhbGsgdGhyb3VnaCBibG9ja3MgYW5kIHRha2UgYWN0aW9ucyBiYXNlZCBvbiB0aGVtXG4gIGFzeW5jIGludGVycHJldEJsb2NrcyhcbiAgICBzcGxpdEJsb2Nrczogc3RyaW5nW10sXG4gICAgYmxvY2tUeXBlczogc3RyaW5nW11cbiAgKTogUHJvbWlzZTxbc3RyaW5nW10sIHN0cmluZ10+IHtcbiAgICB2YXIgbmV3VGV4dCxcbiAgICAgIHRleHRTb0Zhcjogc3RyaW5nID0gXCJcIjtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzcGxpdEJsb2Nrcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIG5ld1RleHQgPSB0aGlzLnJlc29sdmVCb2R5UmVmZXJlbmNlcyhcbiAgICAgICAgc3BsaXRCbG9ja3MsXG4gICAgICAgIGJsb2NrVHlwZXMsXG4gICAgICAgIGluZGV4LFxuICAgICAgICB0ZXh0U29GYXJcbiAgICAgICk7XG4gICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBuZXdUZXh0O1xuXG4gICAgICBzd2l0Y2ggKGJsb2NrVHlwZXNbaW5kZXhdKSB7XG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgdGV4dFNvRmFyID0gdGV4dFNvRmFyLmNvbmNhdChuZXdUZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImpzXCI6XG4gICAgICAgICAgc3BsaXRCbG9ja3NbaW5kZXhdID0gYXdhaXQgdGhpcy53YWl0RXZhbChzcGxpdEJsb2Nrc1tpbmRleF0pO1xuICAgICAgICAgIHRleHRTb0ZhciA9IHRleHRTb0Zhci5jb25jYXQoc3BsaXRCbG9ja3NbaW5kZXhdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImR1YWxcIjpcbiAgICAgICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBhd2FpdCB0aGlzLmZvbGxvd0NvbW1hbmQobmV3VGV4dCk7XG4gICAgICAgICAgdGV4dFNvRmFyID0gdGV4dFNvRmFyLmNvbmNhdChzcGxpdEJsb2Nrc1tpbmRleF0gKyBcIiBcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtzcGxpdEJsb2NrcywgdGV4dFNvRmFyXTtcbiAgfVxuXG4gIC8vIFdhaXQgZm9yIGV2YWwgd3JhcHBlclxuICBhc3luYyB3YWl0RXZhbCh0b0V2YWw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIGV2YWwodG9FdmFsKTtcbiAgfVxuXG4gIC8vIEZpbGwgaW4gXCIjTlwiIHN0cnVjdHVyZXMgaW4gc2tpbGwgYm9keSBiYXNlZCBvbiByZWZlcmVuY2UgY29kZSBibG9jayByZXN1bHRcbiAgcmVzb2x2ZUJvZHlSZWZlcmVuY2VzKFxuICAgIHNwbGl0QmxvY2tzOiBzdHJpbmdbXSxcbiAgICBibG9ja1R5cGVzOiBzdHJpbmdbXSxcbiAgICByZWFjaGVkSW5kZXg6IG51bWJlcixcbiAgICB0ZXh0U29GYXI6IHN0cmluZ1xuICApIHtcbiAgICB2YXIgbmV3VGV4dCA9IHNwbGl0QmxvY2tzW3JlYWNoZWRJbmRleF07XG4gICAgbmV3VGV4dCA9IG5ld1RleHQucmVwbGFjZShcIiMwXCIsIHRleHRTb0Zhcik7XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IHJlZmVyZW5jZWRDb2RlQmxvY2sgPSAxO1xuICAgICAgcmVmZXJlbmNlZENvZGVCbG9jayA8PSByZWFjaGVkSW5kZXg7XG4gICAgICByZWZlcmVuY2VkQ29kZUJsb2NrKytcbiAgICApIHtcbiAgICAgIGlmIChuZXdUZXh0LmluY2x1ZGVzKFwiI1wiICsgcmVmZXJlbmNlZENvZGVCbG9jaykpIHtcbiAgICAgICAgdmFyIHJlbWFpbmluZ0NvZGVCbG9ja3MgPSByZWZlcmVuY2VkQ29kZUJsb2NrO1xuXG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGJsb2NrSW5kZXggPSAwO1xuICAgICAgICAgIGJsb2NrSW5kZXggPCBzcGxpdEJsb2Nrcy5sZW5ndGggJiYgcmVtYWluaW5nQ29kZUJsb2NrcyA+IDA7XG4gICAgICAgICAgYmxvY2tJbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdLnRvU3RyaW5nKCkudHJpbSgpICE9IFwiXCIgfHxcbiAgICAgICAgICAgIGJsb2NrVHlwZXNbYmxvY2tJbmRleF0gIT0gXCJ0ZXh0XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0NvZGVCbG9ja3MtLTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocmVtYWluaW5nQ29kZUJsb2NrcyA9PSAwKSB7XG4gICAgICAgICAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKFxuICAgICAgICAgICAgICBcIiNcIiArIHJlZmVyZW5jZWRDb2RlQmxvY2ssXG4gICAgICAgICAgICAgIHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdUZXh0O1xuICB9XG5cbiAgZ2V0TGFzdEJsb2NrKHNwbGl0QmxvY2tzOiBzdHJpbmdbXSkge1xuICAgIGZvciAoXG4gICAgICBsZXQgYmxvY2tJbmRleCA9IHNwbGl0QmxvY2tzLmxlbmd0aCAtIDE7XG4gICAgICBibG9ja0luZGV4ID49IDA7XG4gICAgICBibG9ja0luZGV4LS1cbiAgICApIHtcbiAgICAgIGlmIChzcGxpdEJsb2Nrc1tibG9ja0luZGV4XS50b1N0cmluZygpLnRyaW0oKSAhPSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBzcGxpdEJsb2Nrc1tibG9ja0luZGV4XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBHZXQgbGlzdCBvZiBhbGwgYmxvY2tzIHdpdGggdHlwZSBhbmQgY29udGVudHNcbiAgc3BsaXRCbG9ja3MoXG4gICAgY29kZUJsb2NrczogW1xuICAgICAgY29kZUJsb2NrOiB7IHR5cGU6IHN0cmluZzsgY29udGVudHM6IHN0cmluZzsgc3RhcnQ6IG51bWJlcjsgZW5kOiBudW1iZXIgfVxuICAgIF1cbiAgKSB7XG4gICAgdmFyIHNwbGl0QmxvY2tMaXN0ID0gW3RoaXMuc2tpbGxDb250ZW50c10sXG4gICAgICBibG9ja1R5cGVzID0gW1widGV4dFwiXTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb2RlQmxvY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgc3BsaXRCbG9ja0xpc3QucHVzaChjb2RlQmxvY2tzW2luZGV4XVtcImNvbnRlbnRzXCJdKTtcbiAgICAgIGJsb2NrVHlwZXMucHVzaChjb2RlQmxvY2tzW2luZGV4XVtcInR5cGVcIl0pO1xuXG4gICAgICBzcGxpdEJsb2NrTGlzdC5wdXNoKFxuICAgICAgICBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLnNsaWNlKGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdKVxuICAgICAgKTtcbiAgICAgIGJsb2NrVHlwZXMucHVzaChcInRleHRcIik7XG5cbiAgICAgIHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0gPSBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLnNsaWNlKFxuICAgICAgICAwLFxuICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcInN0YXJ0XCJdXG4gICAgICApO1xuXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgaW5kZXhGdXR1cmUgPSBpbmRleCArIDE7XG4gICAgICAgIGluZGV4RnV0dXJlIDwgY29kZUJsb2Nrcy5sZW5ndGg7XG4gICAgICAgIGluZGV4RnV0dXJlKytcbiAgICAgICkge1xuICAgICAgICBjb2RlQmxvY2tzW2luZGV4RnV0dXJlXVtcInN0YXJ0XCJdIC09XG4gICAgICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5sZW5ndGggK1xuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdIC1cbiAgICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcInN0YXJ0XCJdO1xuICAgICAgICBjb2RlQmxvY2tzW2luZGV4RnV0dXJlXVtcImVuZFwiXSAtPVxuICAgICAgICAgIHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0ubGVuZ3RoICtcbiAgICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcImVuZFwiXSAtXG4gICAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJzdGFydFwiXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3NwbGl0QmxvY2tMaXN0LCBibG9ja1R5cGVzXTtcbiAgfVxuXG4gIC8vIEdldCBhIGxpc3Qgb2YgY29kZSBibG9ja3Mgd2l0aCBkZXRhaWxzXG4gIGRldGVjdENvZGVCbG9ja3MoKSB7XG4gICAgbGV0IG0sXG4gICAgICByZXM6IGFueSA9IFtdO1xuICAgIGNvbnN0IHJlID0gUmVnRXhwKFxuICAgICAgL1xcYFxcYFxcYCg/PHR5cGU+XFx3KykoPzxjb250ZW50cz4oPzpcXGBbXlxcYF18W15cXGBdKSopXFxgXFxgXFxgLyxcbiAgICAgIFwiZ1wiXG4gICAgKTtcblxuICAgIGRvIHtcbiAgICAgIG0gPSByZS5leGVjKHRoaXMuc2tpbGxDb250ZW50cyk7XG4gICAgICBpZiAobSkge1xuICAgICAgICByZXMgPSByZXMuY29uY2F0KHtcbiAgICAgICAgICB0eXBlOiBtW1wiZ3JvdXBzXCJdW1widHlwZVwiXSxcbiAgICAgICAgICBjb250ZW50czogbVtcImdyb3Vwc1wiXVtcImNvbnRlbnRzXCJdLnRyaW0oKSxcbiAgICAgICAgICBzdGFydDogbVtcImluZGV4XCJdLFxuICAgICAgICAgIGVuZDogbVtcImluZGV4XCJdICsgbVswXS5sZW5ndGgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKG0pO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIHBhcmFtZXRlcnMgbWVudGlvbmVkIGluIGEgc2tpbGxcbiAgYXN5bmMgZ2V0UGFyYW1zKGRvY3VtZW50OiBzdHJpbmcpIHtcbiAgICB2YXIgcmUgPSAvXFwqW2EtekEtWjAtOVxcc10qXFwqL2c7XG4gICAgdmFyIHBhcmFtcyA9IGRvY3VtZW50Lm1hdGNoKHJlKTtcblxuICAgIGlmIChwYXJhbXMgIT0gbnVsbCkge1xuICAgICAgcGFyYW1zLmZvckVhY2goKHZhbCwgaW5kZXgsIHBhcmFtcykgPT4ge1xuICAgICAgICBwYXJhbXNbaW5kZXhdID0gdmFsLnN1YnN0cmluZygxLCB2YWwubGVuZ3RoIC0gMSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBQYXJzZSBhcmd1bWVudHMgZnJvbSB0aGUgY29tbWFuZFxuICBhc3luYyBnZXRBcmdzKGNvbW1hbmQ6IHN0cmluZywgcGFyYW1zOiBzdHJpbmdbXSkge1xuICAgIHZhciBhcmdzOiBzdHJpbmdbXSA9IFtdLFxuICAgICAgcmVzO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBhcmFtcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJlcyA9IGF3YWl0IHRoaXMuZ2V0QXJnKGNvbW1hbmQsIHBhcmFtc1tpbmRleF0pO1xuICAgICAgYXJncyA9IGFyZ3MuY29uY2F0KHJlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICAvLyBQYXJzZSBvbmUgYXJndW1lbnQgZnJvbSB0aGUgY29tbWFuZFxuICBhc3luYyBnZXRBcmcoY29tbWFuZDogc3RyaW5nLCBwYXJhbTogc3RyaW5nKSB7XG4gICAgaWYgKHBhcmFtID09IE9iamVjdC5rZXlzKHRoaXMuc2tpbGxNZXRhZGF0YVswXSlbMF0pIHtcbiAgICAgIHJldHVybiBjb21tYW5kO1xuICAgIH1cblxuICAgIHZhciBwcm9tcHQ6IHN0cmluZyA9IHRoaXMuZ2V0UGFyYW1Qcm9tcHQoY29tbWFuZCwgcGFyYW0pO1xuICAgIGNvbnN0IHJhd1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2hHZW5lcmF0ZSh7XG4gICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgIGNvbnRleHQ6IFtjb21tYW5kXSxcbiAgICAgIGdlbmVyYXRlX3BhcmFncmFwaHM6IDEsXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICBjb250ZW50ID0gY29udGVudFtcIm91dHB1dFwiXVswXS50cmltKCk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGdldFBhcmFtUHJvbXB0KGNvbW1hbmQ6IHN0cmluZywgcGFyYW06IHN0cmluZykge1xuICAgIHZhciBjb21tYW5kUGFyYW06IHN0cmluZztcbiAgICB2YXIgcHJvbXB0OiBzdHJpbmc7XG5cbiAgICAvLyBUT0RPIGRvIGFibGF0aW9uXG4gICAgcHJvbXB0ID0gXCJFeHRyYWN0IFwiICsgcGFyYW0gKyBcIiBmcm9tIHRoZSBmb2xsb3dpbmc6XFxuXFxuXCI7XG5cbiAgICBjb21tYW5kUGFyYW0gPSBPYmplY3Qua2V5cyh0aGlzLnNraWxsTWV0YWRhdGFbMF0pWzBdO1xuXG4gICAgdGhpcy5za2lsbE1ldGFkYXRhLmZvckVhY2goKHZhbDogYW55LCBpbmRleDogYW55LCBhcnJheTogYW55KSA9PiB7XG4gICAgICBpZiAoY29tbWFuZFBhcmFtIGluIHZhbCAmJiBwYXJhbSBpbiB2YWwpIHtcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPj0gMC42KSB7XG4gICAgICAgICAgcHJvbXB0ICs9IHZhbFtjb21tYW5kUGFyYW1dICsgXCIgPT4gXCIgKyB2YWxbcGFyYW1dICsgXCJcXG5cXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9tcHQgKz0gdmFsW2NvbW1hbmRQYXJhbV0gKyBcIiA9PiAgXCIgKyB2YWxbcGFyYW1dICsgXCJcXG5cXG5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcHJvbXB0ICs9IGNvbW1hbmQgKyBcIiA9PiBcIjtcbiAgICByZXR1cm4gcHJvbXB0O1xuICB9XG5cbiAgLy8gR2V0IHR3byBwYXJhbGxlbCBsaXN0cyBvZiBjb21tYW5kIGV4YW1wbGVzIGFuZCB0aGUgcGF0aHMgdGhleSBvcmlnaW5hdGUgZnJvbVxuICBnZXRDb21tYW5kRXhhbXBsZXMoKSB7XG4gICAgdmFyIGNvbW1hbmRFeGFtcGxlczogc3RyaW5nW10gPSBbXTtcbiAgICB2YXIgc2tpbGxQYXRoczogc3RyaW5nW10gPSBbXTtcbiAgICB2YXIgY29tbWFuZEV4YW1wbGVQYXJhbTogc3RyaW5nO1xuICAgIHZhciBuZXdDb21tYW5kRXhhbXBsZTogc3RyaW5nO1xuXG4gICAgdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChcInNraWxsc2V0XCIpKSB7XG4gICAgICAgIGNvbW1hbmRFeGFtcGxlUGFyYW0gPSBPYmplY3Qua2V5cyhcbiAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlclswXVxuICAgICAgICApWzBdO1xuXG4gICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAuZ2V0RmlsZUNhY2hlKGZpbGUpXG4gICAgICAgICAgLmZyb250bWF0dGVyLnNsaWNlKDAsIDIpXG4gICAgICAgICAgLmZvckVhY2goKHZhbDogYW55LCBpbmRleDogYW55LCBhcnJheTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZEV4YW1wbGVQYXJhbSBpbiB2YWwpIHtcbiAgICAgICAgICAgICAgbmV3Q29tbWFuZEV4YW1wbGUgPSB2YWxbY29tbWFuZEV4YW1wbGVQYXJhbV07XG5cbiAgICAgICAgICAgICAgY29tbWFuZEV4YW1wbGVzID0gY29tbWFuZEV4YW1wbGVzLmNvbmNhdChuZXdDb21tYW5kRXhhbXBsZSk7XG4gICAgICAgICAgICAgIHNraWxsUGF0aHMgPSBza2lsbFBhdGhzLmNvbmNhdChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFtjb21tYW5kRXhhbXBsZXMsIHNraWxsUGF0aHNdO1xuICB9XG5cbiAgLy8gR2V0IGNvbnRlbnRzIG9mIGEgc2tpbGwgYXQgYSBwYXRoXG4gIGFzeW5jIGxvYWRTa2lsbENvbnRlbnRzKHNraWxsUGF0aDogc3RyaW5nKSB7XG4gICAgdmFyIG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbWFya2Rvd25GaWxlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChtYXJrZG93bkZpbGVzW2luZGV4XS5wYXRoID09IHNraWxsUGF0aCkge1xuICAgICAgICB0aGlzLnNraWxsQ29udGVudHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKFxuICAgICAgICAgIG1hcmtkb3duRmlsZXNbaW5kZXhdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIEdldCBtZXRhZGF0YSBvZiBhIHNraWxsIGF0IGEgcGF0aFxuICBsb2FkU2tpbGxNZXRhZGF0YShza2lsbFBhdGg6IHN0cmluZykge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG1hcmtkb3duRmlsZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAobWFya2Rvd25GaWxlc1tpbmRleF0ucGF0aCA9PSBza2lsbFBhdGgpIHtcbiAgICAgICAgdGhpcy5za2lsbE1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoXG4gICAgICAgICAgbWFya2Rvd25GaWxlc1tpbmRleF1cbiAgICAgICAgKS5mcm9udG1hdHRlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIGNsb3Nlc3Qgc2tpbGwgdG8gYSBnaXZlbiBjb21tYW5kIHRocm91Z2ggZXhhbXBsZXNcbiAgYXN5bmMgbWF0Y2hDb21tYW5kKGNvbW1hbmQ6IHN0cmluZykge1xuICAgIC8vIEhpZGUgcXVvdGVkIGNvbnRlbnQgZnJvbSBjb21tYW5kIG1hdGNoaW5nXG4gICAgY29tbWFuZCA9IGNvbW1hbmQucmVwbGFjZSgvXCJbXFxzXFxTXSpcIi8sICdcIlwiJyk7XG4gICAgdmFyIGV4YW1wbGVQYXRoUGFpcnMgPSB0aGlzLmdldENvbW1hbmRFeGFtcGxlcygpO1xuICAgIHZhciBleGFtcGxlcyA9IGV4YW1wbGVQYXRoUGFpcnNbMF0ucmV2ZXJzZSgpLFxuICAgICAgcGF0aHMgPSBleGFtcGxlUGF0aFBhaXJzWzFdLnJldmVyc2UoKTtcbiAgICAvL3RoaXMuc2h1ZmZsZShleGFtcGxlcywgcGF0aHMpO1xuXG4gICAgdmFyIGZpbGVuYW1lcyA9IHBhdGhzLm1hcCgoZSkgPT4gZS5yZXBsYWNlKC9eLipbXFxcXFxcL10vLCBcIlwiKS5zbGljZSgwLCAtMykpLFxuICAgICAgc2VhcmNoUHJvbXB0ID0gXCJcIjtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBleGFtcGxlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHNlYXJjaFByb21wdCArPSBleGFtcGxlc1tpbmRleF0gKyBcIiA9PiBcIiArIGZpbGVuYW1lc1tpbmRleF0gKyBcIlxcblxcblwiO1xuICAgIH1cbiAgICBzZWFyY2hQcm9tcHQgKz0gY29tbWFuZCArIFwiID0+XCI7XG4gICAgY29uc29sZS5sb2coc2VhcmNoUHJvbXB0KTtcblxuICAgIC8vIFRPRE86IFJlZmFjdG9yIGludG8gbmV0d29ya1xuICAgIGNvbnN0IHJhd1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2hTZWFyY2goe1xuICAgICAgcHJvbXB0OiBzZWFyY2hQcm9tcHQsXG4gICAgICBjb250ZXh0OiBmaWxlbmFtZXMubWFwKChlKSA9PiBcIiBcIiArIGUgKyBcIlxcblxcblwiKSxcbiAgICAgIGdlbmVyYXRlX3BhcmFncmFwaHM6IDEsXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcGF0aHNbY29udGVudFtcIm91dHB1dFwiXVswXV07XG4gIH1cblxuICBzaHVmZmxlKG9iajE6IHN0cmluZ1tdLCBvYmoyOiBzdHJpbmdbXSkge1xuICAgIHZhciBpbmRleCA9IG9iajEubGVuZ3RoO1xuICAgIHZhciBybmQsIHRtcDEsIHRtcDI7XG5cbiAgICB3aGlsZSAoaW5kZXgpIHtcbiAgICAgIHJuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGluZGV4KTtcbiAgICAgIGluZGV4IC09IDE7XG4gICAgICB0bXAxID0gb2JqMVtpbmRleF07XG4gICAgICB0bXAyID0gb2JqMltpbmRleF07XG4gICAgICBvYmoxW2luZGV4XSA9IG9iajFbcm5kXTtcbiAgICAgIG9iajJbaW5kZXhdID0gb2JqMltybmRdO1xuICAgICAgb2JqMVtybmRdID0gdG1wMTtcbiAgICAgIG9iajJbcm5kXSA9IHRtcDI7XG4gICAgfVxuICB9XG5cbiAgLy8gU3Vic3RpdHV0ZSBwYXJhbWV0ZXJzIHdpdGggYXJndW1lbnRzIGluIGEgc2tpbGxcbiAgcmVzb2x2ZVBhcmFtcyhkb2N1bWVudDogc3RyaW5nLCBwYXJhbXM6IHN0cmluZ1tdLCBhcmdzOiBzdHJpbmdbXSkge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYXJhbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgcmUgPSBSZWdFeHAoXCJcXFxcKlwiICsgcGFyYW1zW2luZGV4XSArIFwiXFxcXCpcIiwgXCJnXCIpO1xuICAgICAgZG9jdW1lbnQgPSBkb2N1bWVudC5yZXBsYWNlKHJlLCBhcmdzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvY3VtZW50O1xuICB9XG5cbiAgcmVtb3ZlRnJvbnRNYXR0ZXIoKSB7XG4gICAgdGhpcy5za2lsbENvbnRlbnRzID0gdGhpcy5za2lsbENvbnRlbnRzLnJlcGxhY2UoLy0tLVtcXHNcXFNdKi0tLS9nLCBcIlwiKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5vdGVzKCkge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIHZhciBub3Rlczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKCFtYXJrZG93bkZpbGVzW2luZGV4XS5wYXRoLnN0YXJ0c1dpdGgoXCJza2lsbHNldFwiKSkge1xuICAgICAgICB2YXIgbm90ZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQobWFya2Rvd25GaWxlc1tpbmRleF0pO1xuICAgICAgICBub3RlID0gVXRpbHMucmVtb3ZlTWQobm90ZSk7XG4gICAgICAgIG5vdGVzLnB1c2gobm90ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGVzO1xuICB9XG59XG5cbi8qXG5hcmdtaW4gPT4gQXJnbWluXG5cbnJld2FyZCBzeXN0ZW1zID0+IG5ldXJhbCBzeXN0ZW1zIHdoaWNoIHJlZ3VsYXRlIHJld2FyZFxuXG5STk5zIGFuZCBiYWNrcHJvcGFnYXRpb24gPT4gYmFja3Byb3BhZ2F0aW9uIHRocm91Z2ggdGltZSB3aXRoIFJOTnNcblxubWV0YXBob3JzIG9mIGNvbmNlcHRzID0+IGNvbmNlcHRzIGFyZSBhc3NvY2lhdGVkIHdpdGggcm9vbXNcblxuTkNDID0+IG5ldXJhbCBjb3JyZWxhdGVzIG9mIGNvbnNjaW91c25lc3NcblxuKnRvcGljKiA9PlxuKi9cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blJlbmRlcmVyLCBDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNraWxsTWFuYWdlciB9IGZyb20gXCJza2lsbHNcIjtcbmltcG9ydCB7IGZldGNoUXVlcnkgfSBmcm9tIFwiLi9uZXR3b3JrXCI7XG5cbmNvbnN0IGNvbnRlbnRJZCA9IFwiZHVhbC1jb250ZW50XCI7XG5jb25zdCBzdGF0dXNJZCA9IFwiZHVhbC1zdGF0dXNcIjtcbmV4cG9ydCBjb25zdCBpbnB1dElkID0gXCJkdWFsLWlucHV0XCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGF0VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgY3VzdG9tTmFtZSA9IFwiXCI7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgY3VzdG9tTmFtZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5jdXN0b21OYW1lID0gY3VzdG9tTmFtZTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY2hhdFwiO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJEdWFsXCI7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiaW5mb1wiO1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dElkKTtcbiAgICBsZXQgcmVwbGllZCA9IGZhbHNlO1xuXG4gICAgaWYgKGlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICB0aGlzLmRyYXdNZXNzYWdlKGlucHV0LnZhbHVlLCBcInJpZ2h0XCIpO1xuXG4gICAgICBsZXQgdHlwaW5nUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApXG4gICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAocmVwbGllZCA9PSBmYWxzZSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKFwidHlwaW5nLi4uXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gVE9ETzogTW92ZSB0ZXh0IHNhbml0YXRpb24gY29kZSBvdXQgb2YgVmlld1xuICAgICAgdmFyIHNraWxsTWFuYWdlciA9IG5ldyBTa2lsbE1hbmFnZXIodGhpcy5hcHApO1xuICAgICAgc2tpbGxNYW5hZ2VyLmZvbGxvd0NvbW1hbmQoaW5wdXQudmFsdWUpLnRoZW4oKHJlc3BvbnNlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgIC5zcGxpdChcIlxcblxcblwiKVxuICAgICAgICAgIC5mb3JFYWNoKChyZXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy50cmltKCkgIT0gXCJcIikge1xuICAgICAgICAgICAgICB0aGlzLmRyYXdNZXNzYWdlKHJlcywgXCJsZWZ0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJlcGxpZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNldFN0YXR1cyhcIm9ubGluZVwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWFrZVJlcXVlc3QocXVlcnk6IHN0cmluZyk6IFByb21pc2U8SlNPTj4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hRdWVyeShxdWVyeSk7XG5cbiAgICBjb25zdCByZXNwb25zZUpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlSlNPTjtcbiAgfVxuXG4gIGxvYWQoKTogdm9pZCB7XG4gICAgc3VwZXIubG9hZCgpO1xuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cbiAgICAvLyBSb290IG5vZGVcbiAgICBjb25zdCByb290RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHJvb3RFbC5pZCA9IFwiZHVhbC1yb290XCI7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJEaXYgPSByb290RWwuY3JlYXRlRWwoXCJoZWFkZXJcIiwge1xuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWhlYWRlclwiIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUaXRsZSBhbmQgc3RhdHVzXG4gICAgaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgY2xzOiBcImR1YWwtaGVhZGVyLXRpdGxlXCIsXG4gICAgICB0ZXh0OiB0aGlzLmN1c3RvbU5hbWUsXG4gICAgfSk7XG4gICAgaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDZcIiwgeyB0ZXh0OiBcIk9ubGluZVwiLCBhdHRyOiB7IGlkOiBzdGF0dXNJZCB9IH0pO1xuXG4gICAgLy8gQ29udmVyc2F0aW9uIGNvbnRlbnRcbiAgICByb290RWwuY3JlYXRlRGl2KHsgYXR0cjogeyBpZDogY29udGVudElkIH0gfSk7XG5cbiAgICAvLyBGb290ZXJcbiAgICBjb25zdCBmb290ZXJEaXYgPSByb290RWwuY3JlYXRlRWwoXCJmb290ZXJcIiwge1xuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWZvb3RlclwiIH0sXG4gICAgfSk7XG5cbiAgICAvLyBJbnB1dCBlbGVtZW50XG4gICAgY29uc3QgaW5wdXQgPSBmb290ZXJEaXYuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIGF0dHI6IHsgaWQ6IGlucHV0SWQsIHNpemU6IDEgfSxcbiAgICB9KTtcblxuICAgIC8vIFNlbmQgYnV0dG9uXG4gICAgY29uc3QgYnV0dG9uID0gZm9vdGVyRGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHRleHQ6IFwiU2VuZFwiLFxuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWJ0bi1zZW5kXCIgfSxcbiAgICB9KTtcblxuICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChidXR0b24sIFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpKTtcbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoaW5wdXQsIFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm9vdEVsKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd01lc3NhZ2UoY29udGVudDogc3RyaW5nLCBzaWRlOiBcImxlZnRcIiB8IFwicmlnaHRcIik6IHZvaWQge1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvbkRpdiA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250ZW50SWQpO1xuICAgIGNvbnN0IG1zZyA9IGNvbnZlcnNhdGlvbkRpdi5jcmVhdGVEaXYoeyBjbHM6IGBkdWFsLW1zZyBkdWFsLW1zZy0ke3NpZGV9YCB9KTtcblxuICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXG4gICAgICBjb250ZW50LFxuICAgICAgbXNnLFxuICAgICAgdGhpcy5hcHAudmF1bHQuZ2V0Um9vdCgpLnBhdGgsXG4gICAgICBuZXcgQ29tcG9uZW50KClcbiAgICApO1xuXG4gICAgY29udmVyc2F0aW9uRGl2LnNjcm9sbEJ5KDAsIDEwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRTdGF0dXMoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgbGV0IHN0YXR1c1AgPSA8SFRNTFBhcmFncmFwaEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhdHVzSWQpO1xuICAgIHN0YXR1c1Auc2V0VGV4dChjb250ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQXBwLFxuICBOb3RpY2UsXG4gIFBsdWdpbixcbiAgUGx1Z2luU2V0dGluZ1RhYixcbiAgU2V0dGluZyxcbiAgV29ya3NwYWNlLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBDaGF0VmlldywgeyBpbnB1dElkIH0gZnJvbSBcInZpZXdcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcInV0aWxzXCI7XG5cbmludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcbiAgY3VzdG9tTmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuICBjdXN0b21OYW1lOiBcIkR1YWxcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcImNoYXRcIiwgKGxlYWYpID0+IHtcbiAgICAgIHJldHVybiBuZXcgQ2hhdFZpZXcobGVhZiwgdGhpcy5zZXR0aW5ncy5jdXN0b21OYW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5sYXlvdXRSZWFkeSAmJiB0aGlzLmluaXRMZWFmKHRoaXMuYXBwLndvcmtzcGFjZSk7XG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LXJlYWR5XCIsICgpID0+XG4gICAgICAgIHRoaXMuaW5pdExlYWYodGhpcy5hcHAud29ya3NwYWNlKVxuICAgICAgKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJmb2N1cy1kdWFsLWlucHV0XCIsXG4gICAgICBuYW1lOiBcIkZvY3VzIER1YWwgaW5wdXQgYm94XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJZCkuZm9jdXMoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGluaXRMZWFmKHdvcmtzcGFjZTogV29ya3NwYWNlKTogdm9pZCB7XG4gICAgaWYgKHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJjaGF0XCIpLmxlbmd0aCA9PSAwKSB7XG4gICAgICB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBcImNoYXRcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG59XG5cbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBNeVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICB0ZXh0OiBcIkZvbGxvdyB0aGVzZSBpbnN0cnVjdGlvbnMgdG8gc2V0IHVwIHlvdXIgRHVhbDpcIixcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJSRUNJUEUgVEVTVFwiKVxuICAgICAgLnNldERlc2MoXCJQcmVzcyB0aGUgYnV0dG9uIHRvIGhlYWQgb3ZlciB0byB0aGUgZG93bmxvYWQgcGFnZS5cIilcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiVEVTVFwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhbGVydChcIlRlc3RpbmdcIik7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMC4gSW5zdGFsbCBQeXRob24gKDMuOCspLlwiKVxuICAgICAgLnNldERlc2MoXCJQcmVzcyB0aGUgYnV0dG9uIHRvIGhlYWQgb3ZlciB0byB0aGUgZG93bmxvYWQgcGFnZS5cIilcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCBQeXRob25cIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5weXRob24ub3JnL2Rvd25sb2Fkcy9cIik7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMS4gQ29weSBzbmFwc2hvdC5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlByZXNzIHRoZSBidXR0b24gdG8gY29weSB0aGUgZW50aXJlIHZhdWx0IGFzIGNvbmNhdGVuYXRlZCBwbGFpbiB0ZXh0LlwiXG4gICAgICApXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvcHkgc25hcHNob3RcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkxvYWRpbmcgZmlsZXMuLi5cIik7XG5cbiAgICAgICAgICAgIGxldCBjb25jYXRlbmF0ZWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvLyBUT0RPIFVzZSBQcm9taXNlLmFsbCgpIC8gbWFwIC8gcmVkdWNlXG5cbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZWxlbWVudCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzID0gcmVzXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXi0tLVtcXHNcXFNdKi0tLVxcbiovZywgXCJcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFtbXlxcfFxcW1xcXV0qXFx8KFteXFx8XFxbXFxdXSopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtcXFsoLiopXFxdXFxdL2csIFwiJDFcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9gYGAoW15gXSkqYGBgXFxuKi9nLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcJChbXiRdKSpcXCQqL2csIFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gY29uY2F0ZW5hdGVkLmNvbmNhdChyZXMsIFwiXFxuXFxuXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgY29weVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKVxuICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gY29uY2F0ZW5hdGVkLnNsaWNlKDAsIDUwMDAwMDApO1xuICAgICAgICAgICAgICBjb25jYXRlbmF0ZWQgPSBVdGlscy5yZW1vdmVNZChjb25jYXRlbmF0ZWQpO1xuICAgICAgICAgICAgICBVdGlscy5jb3B5U3RyaW5nVG9DbGlwYm9hcmQoY29uY2F0ZW5hdGVkKTtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNuYXBzaG90IHN1Y2Nlc3NmdWxseSBjb3BpZWQgdG8gY2xpcGJvYXJkIVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjIuIERlcml2ZSB0aGUgZXNzZW5jZS5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIkFmdGVyIGZvbGxvd2luZyB0aGUgb25saW5lIGluc3RydWN0aW9ucywgZXh0cmFjdCAnZXNzZW5jZS56aXAnIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsLycuXCJcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiU3RhcnQgYWxpZ25tZW50XCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFxuICAgICAgICAgICAgICBcImh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9kcml2ZS8xQ09iZWhhbjVnbVlPLVR2eXlZcTk3M2EzaC1fRVlyOV8/dXNwPXNoYXJpbmdcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCIzLiBDb25maWd1cmUgdGhlIHNrZWxldG9uLlwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiUnVuICdweXRob24zIC1tIHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHQnIGluICcub2JzaWRpYW4vcGx1Z2lucy9EdWFsL3NrZWxldG9uLycuXCJcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiNC4gUnVuIHRoZSBza2VsZXRvbiBhZnRlciB5b3UgY29uZmlndXJlZCB0aGUgZXNzZW5jZS5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlJ1biAncHl0aG9uMyBzZXJ2ZXIucHkgLS1wYXRoIC9wYXRoL3RvL3lvdXIvdmF1bHQvJyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC9za2VsZXRvbi8nLlwiXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjUuIFJlc3RhcnQgT2JzaWRpYW4uXCIpXG4gICAgICAuc2V0RGVzYyhcIkhlYWQgb3ZlciB0byB0aGUgcmlnaHQgc2lkZSBwYW5lbCB0byB0YWxrIHdpdGggeW91ciBEdWFsIVwiKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgdGV4dDogXCJDb25ncmF0dWxhdGlvbnMgb24gc2V0dGluZyB1cCB5b3VyIER1YWwhXCIsXG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5hbWVcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIkN1c3RvbWl6ZSB5b3VyIER1YWwncyBuYW1lIHVzaW5nIHRoZSBpbnB1dCBib3guIFJlbG9hZCBPYnNpZGlhbiBmb3IgdGhpcyB0byB0YWtlIGVmZmVjdC5cIlxuICAgICAgKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJEdWFsXCIpXG4gICAgICAgICAgLnNldFZhbHVlKFwiXCIpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiR2V0IGludm9sdmVkIVwiKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJSZXBvcnQgYnVnc1wiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9Qc2lvbmljYS9EdWFsL2lzc3Vlc1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJKb2luIFBzaW9uaWNhXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9wc2lvbmljYS5vcmcvXCIpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiSXRlbVZpZXciLCJNYXJrZG93blJlbmRlcmVyIiwiQ29tcG9uZW50IiwiUGx1Z2luIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJOb3RpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ25HLFFBQVEsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ3RHLFFBQVEsU0FBUyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUks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
