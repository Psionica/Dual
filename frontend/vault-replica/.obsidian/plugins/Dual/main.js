/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var Utils;
(function (Utils) {
    function copyStringToClipboard(content) {
        var el = document.createElement("textarea");
        el.value = content;
        el.setAttribute("readonly", "");
        document.body.appendChild(el);
        el.select();
        document.execCommand("copy");
        document.body.removeChild(el);
    }
    Utils.copyStringToClipboard = copyStringToClipboard;
    function removeMd(md, options = {
        listUnicodeChar: "",
        stripListLeaders: true,
        gfm: true,
        useImgAltText: true,
    }) {
        let output = md
            .replace(/^---[\s\S]*---\n*/g, "")
            .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
            .replace(/\[\[(.*)\]\]/g, "$1")
            .replace(/```([^`])*```\n*/g, "")
            .replace(/\$([^$])*\$*/g, "")
            .replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, "");
        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
                else
                    output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
            }
            if (options.gfm) {
                output = output
                    // Header
                    .replace(/\n={2,}/g, "\n")
                    // Fenced codeblocks
                    .replace(/~{3}.*\n/g, "")
                    // Strikethrough
                    .replace(/~~/g, "")
                    // Fenced codeblocks
                    .replace(/`{3}.*\n/g, "");
            }
            output = output
                // Remove HTML tags
                .replace(/<[^>]*>/g, "")
                // Remove setext-style headers
                .replace(/^[=\-]{2,}\s*$/g, "")
                // Remove footnotes?
                .replace(/\[\^.+?\](\: .*?$)?/g, "")
                .replace(/\s{0,2}\[.*?\]: .*?$/g, "")
                // Remove images
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "")
                // Remove inline links
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, "$1")
                // Remove blockquotes
                .replace(/^\s{0,3}>\s?/g, "")
                // Remove reference-style links?
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "")
                // Remove atx-style headers
                .replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm, "$1$2$3")
                // Remove emphasis (repeat the line to remove double emphasis)
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                // Remove code blocks
                .replace(/(`{3,})(.*?)\1/gm, "$2")
                // Remove inline code
                .replace(/`(.+?)`/g, "$1")
                // Replace two or more newlines with exactly two? Not entirely sure this belongs here...
                .replace(/\n{2,}/g, "\n\n");
        }
        catch (e) {
            console.error(e);
            return md;
        }
        return output;
    }
    Utils.removeMd = removeMd;
})(Utils || (Utils = {}));

class SkillManager {
    constructor(app) {
        this.app = app;
    }
    // Returns result of following a command
    followCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            var skillPath = yield this.matchCommand(command);
            console.log("FOLLOWING", command, "USING", skillPath);
            var result = this.useSkill(skillPath, command);
            return result;
        });
    }
    // Uses a skill when following a command
    useSkill(skillPath, command) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSkillContents(skillPath);
            this.loadSkillMetadata(skillPath);
            this.removeFrontMatter();
            var params = yield this.getParams(this.skillContents);
            var args = yield this.getArgs(command, params);
            console.log("ARGS", args);
            this.skillContents = this.resolveParams(this.skillContents, params, args);
            var codeBlocks = this.detectCodeBlocks();
            var [splitBlockList, blockTypes] = this.splitBlocks(codeBlocks);
            var [splitBlockList, textSoFar] = yield this.interpretBlocks(splitBlockList, blockTypes);
            var result = this.getLastBlock(splitBlockList);
            return result;
        });
    }
    // Walk through blocks and take actions based on them
    interpretBlocks(splitBlocks, blockTypes) {
        return __awaiter(this, void 0, void 0, function* () {
            var newText, textSoFar = "";
            for (let index = 0; index < splitBlocks.length; index++) {
                newText = this.resolveBodyReferences(splitBlocks, blockTypes, index, textSoFar);
                splitBlocks[index] = newText;
                switch (blockTypes[index]) {
                    case "text":
                        textSoFar = textSoFar.concat(newText);
                        break;
                    case "js":
                        splitBlocks[index] = yield this.waitEval(splitBlocks[index]);
                        textSoFar = textSoFar.concat(splitBlocks[index]);
                        break;
                    case "dual":
                        splitBlocks[index] = yield this.followCommand(newText);
                        textSoFar = textSoFar.concat(splitBlocks[index] + " ");
                }
            }
            return [splitBlocks, textSoFar];
        });
    }
    // Wait for eval wrapper
    waitEval(toEval) {
        return __awaiter(this, void 0, void 0, function* () {
            return eval(toEval);
        });
    }
    // Fill in "#N" structures in skill body based on reference code block result
    resolveBodyReferences(splitBlocks, blockTypes, reachedIndex, textSoFar) {
        var newText = splitBlocks[reachedIndex];
        newText = newText.replace("#0", textSoFar);
        for (let referencedCodeBlock = 1; referencedCodeBlock <= reachedIndex; referencedCodeBlock++) {
            if (newText.includes("#" + referencedCodeBlock)) {
                var remainingCodeBlocks = referencedCodeBlock;
                for (let blockIndex = 0; blockIndex < splitBlocks.length && remainingCodeBlocks > 0; blockIndex++) {
                    if (splitBlocks[blockIndex].toString().trim() != "" ||
                        blockTypes[blockIndex] != "text") {
                        remainingCodeBlocks--;
                    }
                    if (remainingCodeBlocks == 0) {
                        newText = newText.replace("#" + referencedCodeBlock, splitBlocks[blockIndex]);
                    }
                }
            }
        }
        return newText;
    }
    getLastBlock(splitBlocks) {
        for (let blockIndex = splitBlocks.length - 1; blockIndex >= 0; blockIndex--) {
            if (splitBlocks[blockIndex].toString().trim() != "") {
                return splitBlocks[blockIndex];
            }
        }
    }
    // Get list of all blocks with type and contents
    splitBlocks(codeBlocks) {
        var splitBlockList = [this.skillContents], blockTypes = ["text"];
        for (let index = 0; index < codeBlocks.length; index++) {
            splitBlockList.push(codeBlocks[index]["contents"]);
            blockTypes.push(codeBlocks[index]["type"]);
            splitBlockList.push(splitBlockList[2 * index].slice(codeBlocks[index]["end"]));
            blockTypes.push("text");
            splitBlockList[2 * index] = splitBlockList[2 * index].slice(0, codeBlocks[index]["start"]);
            for (let indexFuture = index + 1; indexFuture < codeBlocks.length; indexFuture++) {
                codeBlocks[indexFuture]["start"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
                codeBlocks[indexFuture]["end"] -=
                    splitBlockList[2 * index].length +
                        codeBlocks[index]["end"] -
                        codeBlocks[index]["start"];
            }
        }
        return [splitBlockList, blockTypes];
    }
    // Get a list of code blocks with details
    detectCodeBlocks() {
        let m, res = [];
        const re = RegExp(/\`\`\`(?<type>\w+)(?<contents>(?:\`[^\`]|[^\`])*)\`\`\`/, "g");
        do {
            m = re.exec(this.skillContents);
            if (m) {
                res = res.concat({
                    type: m["groups"]["type"],
                    contents: m["groups"]["contents"].trim(),
                    start: m["index"],
                    end: m["index"] + m[0].length,
                });
            }
        } while (m);
        return res;
    }
    // Get list of parameters mentioned in a skill
    getParams(document) {
        return __awaiter(this, void 0, void 0, function* () {
            var re = /\*[a-zA-Z0-9\s]*\*/g;
            var params = document.match(re);
            if (params != null) {
                params.forEach((val, index, params) => {
                    params[index] = val.substring(1, val.length - 1);
                });
                return params;
            }
            return [];
        });
    }
    // Parse arguments from the command
    getArgs(command, params) {
        return __awaiter(this, void 0, void 0, function* () {
            var args = [], res;
            for (let index = 0; index < params.length; index++) {
                res = yield this.getArg(command, params[index]);
                args = args.concat(res);
            }
            return args;
        });
    }
    // Parse one argument from the command
    getArg(command, param) {
        return __awaiter(this, void 0, void 0, function* () {
            if (param == Object.keys(this.skillMetadata[0])[0]) {
                return command;
            }
            var prompt = this.getParamPrompt(command, param);
            console.log("prompt for", param, prompt);
            const rawResponse = yield fetch("http://127.0.0.1:3030/generate/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: prompt,
                    context: [command],
                    generate_paragraphs: 1,
                }),
            });
            var content = yield rawResponse.json();
            content = content["output"][0].trim();
            return content;
        });
    }
    getParamPrompt(command, param) {
        var commandParam;
        var prompt;
        // TODO do ablation
        prompt = "Extract " + param + " from the following:\n\n";
        commandParam = Object.keys(this.skillMetadata[0])[0];
        this.skillMetadata.forEach((val, index, array) => {
            if (commandParam in val && param in val) {
                if (Math.random() >= 0.6) {
                    prompt += val[commandParam] + " => " + val[param] + "\n\n";
                }
                else {
                    prompt += val[commandParam] + " =>  " + val[param] + "\n\n";
                }
            }
        });
        prompt += command + " => ";
        return prompt;
    }
    // Get two parallel lists of command examples and the paths they originate from
    getCommandExamples() {
        var commandExamples = [];
        var skillPaths = [];
        var commandExampleParam;
        var newCommandExample;
        this.app.vault.getMarkdownFiles().forEach((file) => {
            if (file.path.startsWith("skillset")) {
                commandExampleParam = Object.keys(this.app.metadataCache.getFileCache(file).frontmatter[0])[0];
                this.app.metadataCache
                    .getFileCache(file)
                    .frontmatter.forEach((val, index, array) => {
                    if (commandExampleParam in val) {
                        newCommandExample = val[commandExampleParam];
                        Object.entries(val).forEach((field, fieldIndex, fieldArray) => {
                            if (fieldIndex > 0) {
                                newCommandExample = newCommandExample.replace(field[1], "");
                            }
                        });
                        commandExamples = commandExamples.concat(newCommandExample);
                        skillPaths = skillPaths.concat(file.path);
                    }
                });
            }
        });
        return [commandExamples, skillPaths];
    }
    // Get contents of a skill at a path
    loadSkillContents(skillPath) {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            for (let index = 0; index < markdownFiles.length; index++) {
                if (markdownFiles[index].path == skillPath) {
                    this.skillContents = yield this.app.vault.cachedRead(markdownFiles[index]);
                }
            }
        });
    }
    // Get metadata of a skill at a path
    loadSkillMetadata(skillPath) {
        var markdownFiles = this.app.vault.getMarkdownFiles();
        for (let index = 0; index < markdownFiles.length; index++) {
            if (markdownFiles[index].path == skillPath) {
                this.skillMetadata = this.app.metadataCache.getFileCache(markdownFiles[index]).frontmatter;
            }
        }
    }
    // Find closest skill to a given command through examples
    matchCommand(command) {
        return __awaiter(this, void 0, void 0, function* () {
            // Hide quoted content from command matching
            command = command.replace(/"[\s\S]*"/, '""');
            var examplePathPairs = this.getCommandExamples();
            var examples = examplePathPairs[0], paths = examplePathPairs[1];
            this.shuffle(examples, paths);
            var filenames = paths.map((e) => e.replace(/^.*[\\\/]/, "").slice(0, -3)), searchPrompt = "";
            for (let index = 0; index < examples.length; index++) {
                searchPrompt += examples[index] + " => " + filenames[index] + "\\n\\n";
            }
            searchPrompt += command + " =>";
            console.log(searchPrompt);
            console.log(filenames.map((e) => {
                return " " + e + "\n\n";
            }));
            /*
            var searchPrompt =
              examples
                .map((e) => {
                  return e + " => " + e + "\n\n";
                })
                .join("") +
              command +
              " =>";
              */
            const rawResponse = yield fetch("http://127.0.0.1:3030/search/", {
                method: "POST",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: searchPrompt.slice(-800, searchPrompt.length),
                    context: filenames.map((e) => {
                        return " " + e + "\n\n";
                    }),
                    generate_paragraphs: 1,
                }),
            });
            var content = yield rawResponse.json();
            return paths[content["output"][0]];
        });
    }
    shuffle(obj1, obj2) {
        var index = obj1.length;
        var rnd, tmp1, tmp2;
        while (index) {
            rnd = Math.floor(Math.random() * index);
            index -= 1;
            tmp1 = obj1[index];
            tmp2 = obj2[index];
            obj1[index] = obj1[rnd];
            obj2[index] = obj2[rnd];
            obj1[rnd] = tmp1;
            obj2[rnd] = tmp2;
        }
    }
    // Substitute parameters with arguments in a skill
    resolveParams(document, params, args) {
        for (let index = 0; index < params.length; index++) {
            var re = RegExp("\\*" + params[index] + "\\*", "g");
            document = document.replace(re, args[index]);
        }
        return document;
    }
    removeFrontMatter() {
        this.skillContents = this.skillContents.replace(/---[\s\S]*---/g, "");
    }
    getNotes() {
        return __awaiter(this, void 0, void 0, function* () {
            var markdownFiles = this.app.vault.getMarkdownFiles();
            var notes = [];
            for (let index = 0; index < markdownFiles.length; index++) {
                if (!markdownFiles[index].path.startsWith("skillset")) {
                    var note = yield this.app.vault.cachedRead(markdownFiles[index]);
                    note = Utils.removeMd(note);
                    notes.push(note);
                }
            }
            return notes;
        });
    }
}
/*
searchPrompt =
      `Please calculate 3*7  => Determine what's  ___

Now determine what concepts does evolution rely on? => What are some of the concepts on which  ___  is based on?

Go look through Wikipedia for the director of Interstellar.  => Search Wikipedia for the  ___  of  ___

I'm learning about multi-threading. Quiz me on it. => Test me on  ___ .

Hey, search for one note on virtual assistants! => Find a note on  ___ .

Get me one note about dynamics, please. => Search for a note about  ___ .

Determine what's (85*7) next => Compute  ___

Find a handful of notes on temporal attention, will you? => Search for personal notes on  ___ .

It would be nice if you could suggest me a research question on sustainability. => Suggest me an RQ on ___

Complete the following: The answer is... => Formulate one sentence starting with " ___ "

Test me on  ___  => Ask me something about  ___

Hey you, what does Rust depend on? => List the dependencies of  ___

Enumerate the dependencies of analogy, please. => List the dependencies of  ___

Ask me stuff about topology now => Test me on stuff about  ___

Search Wikipedia for the designer of Python!  => Search Wikipedia for the  ___  of  ___

` +
      command +
      " =>";
*/

const contentId = "dual-content";
const statusId = "dual-status";
const inputId = "dual-input";
class ChatView extends obsidian.ItemView {
    constructor(leaf, customName) {
        super(leaf);
        this.customName = "";
        this.customName = customName;
    }
    getViewType() {
        return "chat";
    }
    getDisplayText() {
        return "Dual";
    }
    getIcon() {
        return "info";
    }
    sendMessage() {
        const input = document.getElementById(inputId);
        let replied = false;
        if (input.value !== "") {
            this.drawMessage(input.value, "right");
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                if (replied == false) {
                    this.setStatus("typing...");
                }
            });
            // TODO: Move text sanitation code out of View
            var skillManager = new SkillManager(this.app);
            skillManager.followCommand(input.value).then((response) => {
                response
                    .toString()
                    .split("\n\n")
                    .forEach((res) => {
                    if (res.trim() != "") {
                        this.drawMessage(res, "left");
                    }
                });
                replied = true;
                this.setStatus("online");
            });
            input.value = "";
        }
    }
    makeRequest(query) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch("http://127.0.0.1:5000/query/" + encodeURIComponent(query));
            const responseJSON = yield response.json();
            return responseJSON;
        });
    }
    load() {
        super.load();
        this.draw();
    }
    draw() {
        const container = this.containerEl.children[1];
        // Root node
        const rootEl = document.createElement("div");
        rootEl.id = "dual-root";
        // Header
        const headerDiv = rootEl.createEl("header", {
            attr: { id: "dual-header" },
        });
        // Title and status
        headerDiv.createEl("h3", {
            cls: "dual-header-title",
            text: this.customName,
        });
        headerDiv.createEl("h6", { text: "Online", attr: { id: statusId } });
        // Conversation content
        rootEl.createDiv({ attr: { id: contentId } });
        // Footer
        const footerDiv = rootEl.createEl("footer", {
            attr: { id: "dual-footer" },
        });
        // Input element
        const input = footerDiv.createEl("input", {
            type: "text",
            attr: { id: inputId },
        });
        // Send button
        const button = footerDiv.createEl("button", {
            text: "Send",
            attr: { id: "dual-btn-send" },
        });
        this.registerDomEvent(button, "click", () => this.sendMessage());
        this.registerDomEvent(input, "keydown", (event) => {
            if (event.key === "Enter") {
                this.sendMessage();
            }
        });
        container.empty();
        container.appendChild(rootEl);
    }
    drawMessage(content, side) {
        const conversationDiv = document.getElementById(contentId);
        const msg = conversationDiv.createDiv({ cls: `dual-msg dual-msg-${side}` });
        obsidian.MarkdownRenderer.renderMarkdown(content, msg, this.app.vault.getRoot().path, new obsidian.Component());
        conversationDiv.scrollBy(0, 1000);
    }
    setStatus(content) {
        let statusP = document.getElementById(statusId);
        statusP.setText(content);
    }
}

const DEFAULT_SETTINGS = {
    customName: "Dual",
};
class MyPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.registerView("chat", (leaf) => {
                return new ChatView(leaf, this.settings.customName);
            });
            this.app.workspace.layoutReady && this.initLeaf(this.app.workspace);
            this.registerEvent(this.app.workspace.on("layout-ready", () => this.initLeaf(this.app.workspace)));
            this.addSettingTab(new SampleSettingTab(this.app, this));
            this.addCommand({
                id: "focus-dual-input",
                name: "Focus Dual input box",
                callback: () => {
                    document.getElementById("dual-input-box").focus();
                },
            });
        });
    }
    initLeaf(workspace) {
        if (workspace.getLeavesOfType("chat").length == 0) {
            workspace.getRightLeaf(false).setViewState({
                type: "chat",
            });
        }
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.app = app;
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl("h3", {
            text: "Follow these instructions to set up your Dual:",
        });
        new obsidian.Setting(containerEl)
            .setName("RECIPE TEST")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("TEST")
            .setClass("mod-cta")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            alert("Testing");
        })));
        new obsidian.Setting(containerEl)
            .setName("0. Install Python (3.8+).")
            .setDesc("Press the button to head over to the download page.")
            .addButton((cb) => cb
            .setButtonText("Install Python")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://www.python.org/downloads/");
        }));
        new obsidian.Setting(containerEl)
            .setName("1. Copy snapshot.")
            .setDesc("Press the button to copy the entire vault as concatenated plain text.")
            .addButton((cb) => cb
            .setButtonText("Copy snapshot")
            .setClass("mod-cta")
            .onClick(() => {
            new obsidian.Notice("Loading files...");
            let concatenated = "";
            // TODO Use Promise.all() / map / reduce
            this.app.vault.getMarkdownFiles().forEach((element) => {
                this.app.vault.cachedRead(element).then((res) => {
                    res = res
                        .replace(/^---[\s\S]*---\n*/g, "")
                        .replace(/\[\[[^\|\[\]]*\|([^\|\[\]]*)\]\]/g, "$1")
                        .replace(/\[\[(.*)\]\]/g, "$1")
                        .replace(/```([^`])*```\n*/g, "")
                        .replace(/\$([^$])*\$*/g, "");
                    concatenated = concatenated.concat(res, "\n\n");
                });
            });
            new Promise((resolve) => setTimeout(resolve, 3000)).then(() => {
                concatenated = concatenated.slice(0, 5000000);
                concatenated = Utils.removeMd(concatenated);
                Utils.copyStringToClipboard(concatenated);
                new obsidian.Notice("Snapshot successfully copied to clipboard!");
            });
        }));
        new obsidian.Setting(containerEl)
            .setName("2. Derive the essence.")
            .setDesc("After following the online instructions, extract 'essence.zip' in '.obsidian/plugins/Dual/'.")
            .addButton((cb) => cb
            .setButtonText("Start alignment")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://colab.research.google.com/drive/1CObehan5gmYO-TvyyYq973a3h-_EYr9_?usp=sharing");
        }));
        new obsidian.Setting(containerEl)
            .setName("3. Configure the skeleton.")
            .setDesc("Run 'python3 -m pip install -r requirements.txt' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("4. Run the skeleton after you configured the essence.")
            .setDesc("Run 'python3 server.py --path /path/to/your/vault/' in '.obsidian/plugins/Dual/skeleton/'.");
        new obsidian.Setting(containerEl)
            .setName("5. Restart Obsidian.")
            .setDesc("Head over to the right side panel to talk with your Dual!");
        containerEl.createEl("h3", {
            text: "Congratulations on setting up your Dual!",
        });
        new obsidian.Setting(containerEl)
            .setName("Custom name")
            .setDesc("Customize your Dual's name using the input box. Reload Obsidian for this to take effect.")
            .addText((text) => text
            .setPlaceholder("Dual")
            .setValue("")
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.customName = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName("Get involved!")
            .addButton((cb) => cb
            .setButtonText("Report bugs")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://github.com/Psionica/Dual/issues");
        }))
            .addButton((cb) => cb
            .setButtonText("Join Psionica")
            .setClass("mod-cta")
            .onClick(() => {
            window.open("https://psionica.org/");
        }));
    }
}

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzLy5wbnBtL0Byb2xsdXArcGx1Z2luLXR5cGVzY3JpcHRANi4xLjBfZjk4YTg3NjJmZmU3ZTZjZWEzNTc0ODc3NjIzZDE5YTYvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInV0aWxzLnRzIiwic2tpbGxzLnRzIiwidmlldy50cyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBmcm9tKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImV4cG9ydCBtb2R1bGUgVXRpbHMge1xuICBleHBvcnQgZnVuY3Rpb24gY29weVN0cmluZ1RvQ2xpcGJvYXJkKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICBlbC52YWx1ZSA9IGNvbnRlbnQ7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJcIik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgZWwuc2VsZWN0KCk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICB9XG5cbiAgaW50ZXJmYWNlIFJlbW92ZU1kT3B0aW9ucyB7XG4gICAgbGlzdFVuaWNvZGVDaGFyPzogc3RyaW5nO1xuICAgIHN0cmlwTGlzdExlYWRlcnM/OiBib29sZWFuO1xuICAgIGdmbT86IGJvb2xlYW47XG4gICAgdXNlSW1nQWx0VGV4dD86IGJvb2xlYW47XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlTWQoXG4gICAgbWQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBSZW1vdmVNZE9wdGlvbnMgPSB7XG4gICAgICBsaXN0VW5pY29kZUNoYXI6IFwiXCIsXG4gICAgICBzdHJpcExpc3RMZWFkZXJzOiB0cnVlLFxuICAgICAgZ2ZtOiB0cnVlLFxuICAgICAgdXNlSW1nQWx0VGV4dDogdHJ1ZSxcbiAgICB9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBtZFxuICAgICAgLnJlcGxhY2UoL14tLS1bXFxzXFxTXSotLS1cXG4qL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbW15cXHxcXFtcXF1dKlxcfChbXlxcfFxcW1xcXV0qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvXFxbXFxbKC4qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAucmVwbGFjZSgvYGBgKFteYF0pKmBgYFxcbiovZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXCQoW14kXSkqXFwkKi9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL14oLVxccyo/fFxcKlxccyo/fF9cXHMqPyl7Myx9XFxzKiQvZ20sIFwiXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyKVxuICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKFxuICAgICAgICAgICAgL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sXG4gICAgICAgICAgICBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciArIFwiICQxXCJcbiAgICAgICAgICApO1xuICAgICAgICBlbHNlIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCBcIiQxXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZ2ZtKSB7XG4gICAgICAgIG91dHB1dCA9IG91dHB1dFxuICAgICAgICAgIC8vIEhlYWRlclxuICAgICAgICAgIC5yZXBsYWNlKC9cXG49ezIsfS9nLCBcIlxcblwiKVxuICAgICAgICAgIC8vIEZlbmNlZCBjb2RlYmxvY2tzXG4gICAgICAgICAgLnJlcGxhY2UoL357M30uKlxcbi9nLCBcIlwiKVxuICAgICAgICAgIC8vIFN0cmlrZXRocm91Z2hcbiAgICAgICAgICAucmVwbGFjZSgvfn4vZywgXCJcIilcbiAgICAgICAgICAvLyBGZW5jZWQgY29kZWJsb2Nrc1xuICAgICAgICAgIC5yZXBsYWNlKC9gezN9LipcXG4vZywgXCJcIik7XG4gICAgICB9XG4gICAgICBvdXRwdXQgPSBvdXRwdXRcbiAgICAgICAgLy8gUmVtb3ZlIEhUTUwgdGFnc1xuICAgICAgICAucmVwbGFjZSgvPFtePl0qPi9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgc2V0ZXh0LXN0eWxlIGhlYWRlcnNcbiAgICAgICAgLnJlcGxhY2UoL15bPVxcLV17Mix9XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGZvb3Rub3Rlcz9cbiAgICAgICAgLnJlcGxhY2UoL1xcW1xcXi4rP1xcXShcXDogLio/JCk/L2csIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXHN7MCwyfVxcWy4qP1xcXTogLio/JC9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW1hZ2VzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9cXCFcXFsoLio/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZyxcbiAgICAgICAgICBvcHRpb25zLnVzZUltZ0FsdFRleHQgPyBcIiQxXCIgOiBcIlwiXG4gICAgICAgIClcbiAgICAgICAgLy8gUmVtb3ZlIGlubGluZSBsaW5rc1xuICAgICAgICAucmVwbGFjZSgvXFxbKC4qPylcXF1bXFxbXFwoXS4qP1tcXF1cXCldL2csIFwiJDFcIilcbiAgICAgICAgLy8gUmVtb3ZlIGJsb2NrcXVvdGVzXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzezAsM30+XFxzPy9nLCBcIlwiKVxuICAgICAgICAvLyBSZW1vdmUgcmVmZXJlbmNlLXN0eWxlIGxpbmtzP1xuICAgICAgICAucmVwbGFjZSgvXlxcc3sxLDJ9XFxbKC4qPylcXF06IChcXFMrKSggXCIuKj9cIik/XFxzKiQvZywgXCJcIilcbiAgICAgICAgLy8gUmVtb3ZlIGF0eC1zdHlsZSBoZWFkZXJzXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC9eKFxcbik/XFxzezAsfSN7MSw2fVxccyt8IHswLH0oXFxuKT9cXHN7MCx9I3swLH0gezAsfShcXG4pP1xcc3swLH0kL2dtLFxuICAgICAgICAgIFwiJDEkMiQzXCJcbiAgICAgICAgKVxuICAgICAgICAvLyBSZW1vdmUgZW1waGFzaXMgKHJlcGVhdCB0aGUgbGluZSB0byByZW1vdmUgZG91YmxlIGVtcGhhc2lzKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAucmVwbGFjZSgvKFtcXCpfXXsxLDN9KShcXFMuKj9cXFN7MCwxfSlcXDEvZywgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgY29kZSBibG9ja3NcbiAgICAgICAgLnJlcGxhY2UoLyhgezMsfSkoLio/KVxcMS9nbSwgXCIkMlwiKVxuICAgICAgICAvLyBSZW1vdmUgaW5saW5lIGNvZGVcbiAgICAgICAgLnJlcGxhY2UoL2AoLis/KWAvZywgXCIkMVwiKVxuICAgICAgICAvLyBSZXBsYWNlIHR3byBvciBtb3JlIG5ld2xpbmVzIHdpdGggZXhhY3RseSB0d28/IE5vdCBlbnRpcmVseSBzdXJlIHRoaXMgYmVsb25ncyBoZXJlLi4uXG4gICAgICAgIC5yZXBsYWNlKC9cXG57Mix9L2csIFwiXFxuXFxuXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICByZXR1cm4gbWQ7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCwgRnJvbnRNYXR0ZXJDYWNoZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwidXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFNraWxsTWFuYWdlciB7XG4gIGFwcDogQXBwO1xuICBza2lsbE1ldGFkYXRhOiBGcm9udE1hdHRlckNhY2hlO1xuICBza2lsbENvbnRlbnRzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgfVxuXG4gIC8vIFJldHVybnMgcmVzdWx0IG9mIGZvbGxvd2luZyBhIGNvbW1hbmRcbiAgYXN5bmMgZm9sbG93Q29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICB2YXIgc2tpbGxQYXRoID0gYXdhaXQgdGhpcy5tYXRjaENvbW1hbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coXCJGT0xMT1dJTkdcIiwgY29tbWFuZCwgXCJVU0lOR1wiLCBza2lsbFBhdGgpO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnVzZVNraWxsKHNraWxsUGF0aCwgY29tbWFuZCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gVXNlcyBhIHNraWxsIHdoZW4gZm9sbG93aW5nIGEgY29tbWFuZFxuICBhc3luYyB1c2VTa2lsbChza2lsbFBhdGg6IHN0cmluZywgY29tbWFuZDogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2tpbGxDb250ZW50cyhza2lsbFBhdGgpO1xuICAgIHRoaXMubG9hZFNraWxsTWV0YWRhdGEoc2tpbGxQYXRoKTtcbiAgICB0aGlzLnJlbW92ZUZyb250TWF0dGVyKCk7XG5cbiAgICB2YXIgcGFyYW1zOiBzdHJpbmdbXSA9IGF3YWl0IHRoaXMuZ2V0UGFyYW1zKHRoaXMuc2tpbGxDb250ZW50cyk7XG4gICAgdmFyIGFyZ3M6IHN0cmluZ1tdID0gYXdhaXQgdGhpcy5nZXRBcmdzKGNvbW1hbmQsIHBhcmFtcyk7XG4gICAgY29uc29sZS5sb2coXCJBUkdTXCIsIGFyZ3MpO1xuICAgIHRoaXMuc2tpbGxDb250ZW50cyA9IHRoaXMucmVzb2x2ZVBhcmFtcyh0aGlzLnNraWxsQ29udGVudHMsIHBhcmFtcywgYXJncyk7XG5cbiAgICB2YXIgY29kZUJsb2NrcyA9IHRoaXMuZGV0ZWN0Q29kZUJsb2NrcygpO1xuICAgIHZhciBbc3BsaXRCbG9ja0xpc3QsIGJsb2NrVHlwZXNdID0gdGhpcy5zcGxpdEJsb2Nrcyhjb2RlQmxvY2tzKTtcbiAgICB2YXIgW3NwbGl0QmxvY2tMaXN0LCB0ZXh0U29GYXJdID0gYXdhaXQgdGhpcy5pbnRlcnByZXRCbG9ja3MoXG4gICAgICBzcGxpdEJsb2NrTGlzdCxcbiAgICAgIGJsb2NrVHlwZXNcbiAgICApO1xuXG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0TGFzdEJsb2NrKHNwbGl0QmxvY2tMaXN0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gV2FsayB0aHJvdWdoIGJsb2NrcyBhbmQgdGFrZSBhY3Rpb25zIGJhc2VkIG9uIHRoZW1cbiAgYXN5bmMgaW50ZXJwcmV0QmxvY2tzKFxuICAgIHNwbGl0QmxvY2tzOiBzdHJpbmdbXSxcbiAgICBibG9ja1R5cGVzOiBzdHJpbmdbXVxuICApOiBQcm9taXNlPFtzdHJpbmdbXSwgc3RyaW5nXT4ge1xuICAgIHZhciBuZXdUZXh0LFxuICAgICAgdGV4dFNvRmFyOiBzdHJpbmcgPSBcIlwiO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNwbGl0QmxvY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbmV3VGV4dCA9IHRoaXMucmVzb2x2ZUJvZHlSZWZlcmVuY2VzKFxuICAgICAgICBzcGxpdEJsb2NrcyxcbiAgICAgICAgYmxvY2tUeXBlcyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHRleHRTb0ZhclxuICAgICAgKTtcbiAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IG5ld1RleHQ7XG5cbiAgICAgIHN3aXRjaCAoYmxvY2tUeXBlc1tpbmRleF0pIHtcbiAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KG5ld1RleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwianNcIjpcbiAgICAgICAgICBzcGxpdEJsb2Nrc1tpbmRleF0gPSBhd2FpdCB0aGlzLndhaXRFdmFsKHNwbGl0QmxvY2tzW2luZGV4XSk7XG4gICAgICAgICAgdGV4dFNvRmFyID0gdGV4dFNvRmFyLmNvbmNhdChzcGxpdEJsb2Nrc1tpbmRleF0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZHVhbFwiOlxuICAgICAgICAgIHNwbGl0QmxvY2tzW2luZGV4XSA9IGF3YWl0IHRoaXMuZm9sbG93Q29tbWFuZChuZXdUZXh0KTtcbiAgICAgICAgICB0ZXh0U29GYXIgPSB0ZXh0U29GYXIuY29uY2F0KHNwbGl0QmxvY2tzW2luZGV4XSArIFwiIFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3NwbGl0QmxvY2tzLCB0ZXh0U29GYXJdO1xuICB9XG5cbiAgLy8gV2FpdCBmb3IgZXZhbCB3cmFwcGVyXG4gIGFzeW5jIHdhaXRFdmFsKHRvRXZhbDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gZXZhbCh0b0V2YWwpO1xuICB9XG5cbiAgLy8gRmlsbCBpbiBcIiNOXCIgc3RydWN0dXJlcyBpbiBza2lsbCBib2R5IGJhc2VkIG9uIHJlZmVyZW5jZSBjb2RlIGJsb2NrIHJlc3VsdFxuICByZXNvbHZlQm9keVJlZmVyZW5jZXMoXG4gICAgc3BsaXRCbG9ja3M6IHN0cmluZ1tdLFxuICAgIGJsb2NrVHlwZXM6IHN0cmluZ1tdLFxuICAgIHJlYWNoZWRJbmRleDogbnVtYmVyLFxuICAgIHRleHRTb0Zhcjogc3RyaW5nXG4gICkge1xuICAgIHZhciBuZXdUZXh0ID0gc3BsaXRCbG9ja3NbcmVhY2hlZEluZGV4XTtcbiAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKFwiIzBcIiwgdGV4dFNvRmFyKTtcblxuICAgIGZvciAoXG4gICAgICBsZXQgcmVmZXJlbmNlZENvZGVCbG9jayA9IDE7XG4gICAgICByZWZlcmVuY2VkQ29kZUJsb2NrIDw9IHJlYWNoZWRJbmRleDtcbiAgICAgIHJlZmVyZW5jZWRDb2RlQmxvY2srK1xuICAgICkge1xuICAgICAgaWYgKG5ld1RleHQuaW5jbHVkZXMoXCIjXCIgKyByZWZlcmVuY2VkQ29kZUJsb2NrKSkge1xuICAgICAgICB2YXIgcmVtYWluaW5nQ29kZUJsb2NrcyA9IHJlZmVyZW5jZWRDb2RlQmxvY2s7XG5cbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgYmxvY2tJbmRleCA9IDA7XG4gICAgICAgICAgYmxvY2tJbmRleCA8IHNwbGl0QmxvY2tzLmxlbmd0aCAmJiByZW1haW5pbmdDb2RlQmxvY2tzID4gMDtcbiAgICAgICAgICBibG9ja0luZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3BsaXRCbG9ja3NbYmxvY2tJbmRleF0udG9TdHJpbmcoKS50cmltKCkgIT0gXCJcIiB8fFxuICAgICAgICAgICAgYmxvY2tUeXBlc1tibG9ja0luZGV4XSAhPSBcInRleHRcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVtYWluaW5nQ29kZUJsb2Nrcy0tO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZW1haW5pbmdDb2RlQmxvY2tzID09IDApIHtcbiAgICAgICAgICAgIG5ld1RleHQgPSBuZXdUZXh0LnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiI1wiICsgcmVmZXJlbmNlZENvZGVCbG9jayxcbiAgICAgICAgICAgICAgc3BsaXRCbG9ja3NbYmxvY2tJbmRleF1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld1RleHQ7XG4gIH1cblxuICBnZXRMYXN0QmxvY2soc3BsaXRCbG9ja3M6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChcbiAgICAgIGxldCBibG9ja0luZGV4ID0gc3BsaXRCbG9ja3MubGVuZ3RoIC0gMTtcbiAgICAgIGJsb2NrSW5kZXggPj0gMDtcbiAgICAgIGJsb2NrSW5kZXgtLVxuICAgICkge1xuICAgICAgaWYgKHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdLnRvU3RyaW5nKCkudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHNwbGl0QmxvY2tzW2Jsb2NrSW5kZXhdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIGFsbCBibG9ja3Mgd2l0aCB0eXBlIGFuZCBjb250ZW50c1xuICBzcGxpdEJsb2NrcyhcbiAgICBjb2RlQmxvY2tzOiBbXG4gICAgICBjb2RlQmxvY2s6IHsgdHlwZTogc3RyaW5nOyBjb250ZW50czogc3RyaW5nOyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9XG4gICAgXVxuICApIHtcbiAgICB2YXIgc3BsaXRCbG9ja0xpc3QgPSBbdGhpcy5za2lsbENvbnRlbnRzXSxcbiAgICAgIGJsb2NrVHlwZXMgPSBbXCJ0ZXh0XCJdO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvZGVCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBzcGxpdEJsb2NrTGlzdC5wdXNoKGNvZGVCbG9ja3NbaW5kZXhdW1wiY29udGVudHNcIl0pO1xuICAgICAgYmxvY2tUeXBlcy5wdXNoKGNvZGVCbG9ja3NbaW5kZXhdW1widHlwZVwiXSk7XG5cbiAgICAgIHNwbGl0QmxvY2tMaXN0LnB1c2goXG4gICAgICAgIHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0uc2xpY2UoY29kZUJsb2Nrc1tpbmRleF1bXCJlbmRcIl0pXG4gICAgICApO1xuICAgICAgYmxvY2tUeXBlcy5wdXNoKFwidGV4dFwiKTtcblxuICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XSA9IHNwbGl0QmxvY2tMaXN0WzIgKiBpbmRleF0uc2xpY2UoXG4gICAgICAgIDAsXG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl1cbiAgICAgICk7XG5cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleEZ1dHVyZSA9IGluZGV4ICsgMTtcbiAgICAgICAgaW5kZXhGdXR1cmUgPCBjb2RlQmxvY2tzLmxlbmd0aDtcbiAgICAgICAgaW5kZXhGdXR1cmUrK1xuICAgICAgKSB7XG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhGdXR1cmVdW1wic3RhcnRcIl0gLT1cbiAgICAgICAgICBzcGxpdEJsb2NrTGlzdFsyICogaW5kZXhdLmxlbmd0aCArXG4gICAgICAgICAgY29kZUJsb2Nrc1tpbmRleF1bXCJlbmRcIl0gLVxuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wic3RhcnRcIl07XG4gICAgICAgIGNvZGVCbG9ja3NbaW5kZXhGdXR1cmVdW1wiZW5kXCJdIC09XG4gICAgICAgICAgc3BsaXRCbG9ja0xpc3RbMiAqIGluZGV4XS5sZW5ndGggK1xuICAgICAgICAgIGNvZGVCbG9ja3NbaW5kZXhdW1wiZW5kXCJdIC1cbiAgICAgICAgICBjb2RlQmxvY2tzW2luZGV4XVtcInN0YXJ0XCJdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbc3BsaXRCbG9ja0xpc3QsIGJsb2NrVHlwZXNdO1xuICB9XG5cbiAgLy8gR2V0IGEgbGlzdCBvZiBjb2RlIGJsb2NrcyB3aXRoIGRldGFpbHNcbiAgZGV0ZWN0Q29kZUJsb2NrcygpIHtcbiAgICBsZXQgbSxcbiAgICAgIHJlczogYW55ID0gW107XG4gICAgY29uc3QgcmUgPSBSZWdFeHAoXG4gICAgICAvXFxgXFxgXFxgKD88dHlwZT5cXHcrKSg/PGNvbnRlbnRzPig/OlxcYFteXFxgXXxbXlxcYF0pKilcXGBcXGBcXGAvLFxuICAgICAgXCJnXCJcbiAgICApO1xuXG4gICAgZG8ge1xuICAgICAgbSA9IHJlLmV4ZWModGhpcy5za2lsbENvbnRlbnRzKTtcbiAgICAgIGlmIChtKSB7XG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoe1xuICAgICAgICAgIHR5cGU6IG1bXCJncm91cHNcIl1bXCJ0eXBlXCJdLFxuICAgICAgICAgIGNvbnRlbnRzOiBtW1wiZ3JvdXBzXCJdW1wiY29udGVudHNcIl0udHJpbSgpLFxuICAgICAgICAgIHN0YXJ0OiBtW1wiaW5kZXhcIl0sXG4gICAgICAgICAgZW5kOiBtW1wiaW5kZXhcIl0gKyBtWzBdLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobSk7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLy8gR2V0IGxpc3Qgb2YgcGFyYW1ldGVycyBtZW50aW9uZWQgaW4gYSBza2lsbFxuICBhc3luYyBnZXRQYXJhbXMoZG9jdW1lbnQ6IHN0cmluZykge1xuICAgIHZhciByZSA9IC9cXCpbYS16QS1aMC05XFxzXSpcXCovZztcbiAgICB2YXIgcGFyYW1zID0gZG9jdW1lbnQubWF0Y2gocmUpO1xuXG4gICAgaWYgKHBhcmFtcyAhPSBudWxsKSB7XG4gICAgICBwYXJhbXMuZm9yRWFjaCgodmFsLCBpbmRleCwgcGFyYW1zKSA9PiB7XG4gICAgICAgIHBhcmFtc1tpbmRleF0gPSB2YWwuc3Vic3RyaW5nKDEsIHZhbC5sZW5ndGggLSAxKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8vIFBhcnNlIGFyZ3VtZW50cyBmcm9tIHRoZSBjb21tYW5kXG4gIGFzeW5jIGdldEFyZ3MoY29tbWFuZDogc3RyaW5nLCBwYXJhbXM6IHN0cmluZ1tdKSB7XG4gICAgdmFyIGFyZ3M6IHN0cmluZ1tdID0gW10sXG4gICAgICByZXM7XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGFyYW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzID0gYXdhaXQgdGhpcy5nZXRBcmcoY29tbWFuZCwgcGFyYW1zW2luZGV4XSk7XG4gICAgICBhcmdzID0gYXJncy5jb25jYXQocmVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIC8vIFBhcnNlIG9uZSBhcmd1bWVudCBmcm9tIHRoZSBjb21tYW5kXG4gIGFzeW5jIGdldEFyZyhjb21tYW5kOiBzdHJpbmcsIHBhcmFtOiBzdHJpbmcpIHtcbiAgICBpZiAocGFyYW0gPT0gT2JqZWN0LmtleXModGhpcy5za2lsbE1ldGFkYXRhWzBdKVswXSkge1xuICAgICAgcmV0dXJuIGNvbW1hbmQ7XG4gICAgfVxuXG4gICAgdmFyIHByb21wdDogc3RyaW5nID0gdGhpcy5nZXRQYXJhbVByb21wdChjb21tYW5kLCBwYXJhbSk7XG4gICAgY29uc29sZS5sb2coXCJwcm9tcHQgZm9yXCIsIHBhcmFtLCBwcm9tcHQpO1xuXG4gICAgY29uc3QgcmF3UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly8xMjcuMC4wLjE6MzAzMC9nZW5lcmF0ZS9cIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgICAgY29udGV4dDogW2NvbW1hbmRdLFxuICAgICAgICBnZW5lcmF0ZV9wYXJhZ3JhcGhzOiAxLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICBjb250ZW50ID0gY29udGVudFtcIm91dHB1dFwiXVswXS50cmltKCk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGdldFBhcmFtUHJvbXB0KGNvbW1hbmQ6IHN0cmluZywgcGFyYW06IHN0cmluZykge1xuICAgIHZhciBjb21tYW5kUGFyYW06IHN0cmluZztcbiAgICB2YXIgcHJvbXB0OiBzdHJpbmc7XG5cbiAgICAvLyBUT0RPIGRvIGFibGF0aW9uXG4gICAgcHJvbXB0ID0gXCJFeHRyYWN0IFwiICsgcGFyYW0gKyBcIiBmcm9tIHRoZSBmb2xsb3dpbmc6XFxuXFxuXCI7XG5cbiAgICBjb21tYW5kUGFyYW0gPSBPYmplY3Qua2V5cyh0aGlzLnNraWxsTWV0YWRhdGFbMF0pWzBdO1xuXG4gICAgdGhpcy5za2lsbE1ldGFkYXRhLmZvckVhY2goKHZhbDogYW55LCBpbmRleDogYW55LCBhcnJheTogYW55KSA9PiB7XG4gICAgICBpZiAoY29tbWFuZFBhcmFtIGluIHZhbCAmJiBwYXJhbSBpbiB2YWwpIHtcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPj0gMC42KSB7XG4gICAgICAgICAgcHJvbXB0ICs9IHZhbFtjb21tYW5kUGFyYW1dICsgXCIgPT4gXCIgKyB2YWxbcGFyYW1dICsgXCJcXG5cXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9tcHQgKz0gdmFsW2NvbW1hbmRQYXJhbV0gKyBcIiA9PiAgXCIgKyB2YWxbcGFyYW1dICsgXCJcXG5cXG5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcHJvbXB0ICs9IGNvbW1hbmQgKyBcIiA9PiBcIjtcbiAgICByZXR1cm4gcHJvbXB0O1xuICB9XG5cbiAgLy8gR2V0IHR3byBwYXJhbGxlbCBsaXN0cyBvZiBjb21tYW5kIGV4YW1wbGVzIGFuZCB0aGUgcGF0aHMgdGhleSBvcmlnaW5hdGUgZnJvbVxuICBnZXRDb21tYW5kRXhhbXBsZXMoKSB7XG4gICAgdmFyIGNvbW1hbmRFeGFtcGxlczogc3RyaW5nW10gPSBbXTtcbiAgICB2YXIgc2tpbGxQYXRoczogc3RyaW5nW10gPSBbXTtcbiAgICB2YXIgY29tbWFuZEV4YW1wbGVQYXJhbTogc3RyaW5nO1xuICAgIHZhciBuZXdDb21tYW5kRXhhbXBsZTogc3RyaW5nO1xuXG4gICAgdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChcInNraWxsc2V0XCIpKSB7XG4gICAgICAgIGNvbW1hbmRFeGFtcGxlUGFyYW0gPSBPYmplY3Qua2V5cyhcbiAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlclswXVxuICAgICAgICApWzBdO1xuXG4gICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAuZ2V0RmlsZUNhY2hlKGZpbGUpXG4gICAgICAgICAgLmZyb250bWF0dGVyLmZvckVhY2goKHZhbDogYW55LCBpbmRleDogYW55LCBhcnJheTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZEV4YW1wbGVQYXJhbSBpbiB2YWwpIHtcbiAgICAgICAgICAgICAgbmV3Q29tbWFuZEV4YW1wbGUgPSB2YWxbY29tbWFuZEV4YW1wbGVQYXJhbV07XG5cbiAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModmFsKS5mb3JFYWNoKChmaWVsZCwgZmllbGRJbmRleCwgZmllbGRBcnJheSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgbmV3Q29tbWFuZEV4YW1wbGUgPSBuZXdDb21tYW5kRXhhbXBsZS5yZXBsYWNlKGZpZWxkWzFdLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNvbW1hbmRFeGFtcGxlcyA9IGNvbW1hbmRFeGFtcGxlcy5jb25jYXQobmV3Q29tbWFuZEV4YW1wbGUpO1xuICAgICAgICAgICAgICBza2lsbFBhdGhzID0gc2tpbGxQYXRocy5jb25jYXQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBbY29tbWFuZEV4YW1wbGVzLCBza2lsbFBhdGhzXTtcbiAgfVxuXG4gIC8vIEdldCBjb250ZW50cyBvZiBhIHNraWxsIGF0IGEgcGF0aFxuICBhc3luYyBsb2FkU2tpbGxDb250ZW50cyhza2lsbFBhdGg6IHN0cmluZykge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG1hcmtkb3duRmlsZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAobWFya2Rvd25GaWxlc1tpbmRleF0ucGF0aCA9PSBza2lsbFBhdGgpIHtcbiAgICAgICAgdGhpcy5za2lsbENvbnRlbnRzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChcbiAgICAgICAgICBtYXJrZG93bkZpbGVzW2luZGV4XVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBHZXQgbWV0YWRhdGEgb2YgYSBza2lsbCBhdCBhIHBhdGhcbiAgbG9hZFNraWxsTWV0YWRhdGEoc2tpbGxQYXRoOiBzdHJpbmcpIHtcbiAgICB2YXIgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKG1hcmtkb3duRmlsZXNbaW5kZXhdLnBhdGggPT0gc2tpbGxQYXRoKSB7XG4gICAgICAgIHRoaXMuc2tpbGxNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKFxuICAgICAgICAgIG1hcmtkb3duRmlsZXNbaW5kZXhdXG4gICAgICAgICkuZnJvbnRtYXR0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCBjbG9zZXN0IHNraWxsIHRvIGEgZ2l2ZW4gY29tbWFuZCB0aHJvdWdoIGV4YW1wbGVzXG4gIGFzeW5jIG1hdGNoQ29tbWFuZChjb21tYW5kOiBzdHJpbmcpIHtcbiAgICAvLyBIaWRlIHF1b3RlZCBjb250ZW50IGZyb20gY29tbWFuZCBtYXRjaGluZ1xuICAgIGNvbW1hbmQgPSBjb21tYW5kLnJlcGxhY2UoL1wiW1xcc1xcU10qXCIvLCAnXCJcIicpO1xuICAgIHZhciBleGFtcGxlUGF0aFBhaXJzID0gdGhpcy5nZXRDb21tYW5kRXhhbXBsZXMoKTtcbiAgICB2YXIgZXhhbXBsZXMgPSBleGFtcGxlUGF0aFBhaXJzWzBdLFxuICAgICAgcGF0aHMgPSBleGFtcGxlUGF0aFBhaXJzWzFdO1xuICAgIHRoaXMuc2h1ZmZsZShleGFtcGxlcywgcGF0aHMpO1xuXG4gICAgdmFyIGZpbGVuYW1lcyA9IHBhdGhzLm1hcCgoZSkgPT4gZS5yZXBsYWNlKC9eLipbXFxcXFxcL10vLCBcIlwiKS5zbGljZSgwLCAtMykpLFxuICAgICAgc2VhcmNoUHJvbXB0ID0gXCJcIjtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBleGFtcGxlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHNlYXJjaFByb21wdCArPSBleGFtcGxlc1tpbmRleF0gKyBcIiA9PiBcIiArIGZpbGVuYW1lc1tpbmRleF0gKyBcIlxcXFxuXFxcXG5cIjtcbiAgICB9XG4gICAgc2VhcmNoUHJvbXB0ICs9IGNvbW1hbmQgKyBcIiA9PlwiO1xuXG4gICAgY29uc29sZS5sb2coc2VhcmNoUHJvbXB0KTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGZpbGVuYW1lcy5tYXAoKGUpID0+IHtcbiAgICAgICAgcmV0dXJuIFwiIFwiICsgZSArIFwiXFxuXFxuXCI7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvKlxuICAgIHZhciBzZWFyY2hQcm9tcHQgPVxuICAgICAgZXhhbXBsZXNcbiAgICAgICAgLm1hcCgoZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBlICsgXCIgPT4gXCIgKyBlICsgXCJcXG5cXG5cIjtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oXCJcIikgK1xuICAgICAgY29tbWFuZCArXG4gICAgICBcIiA9PlwiO1xuICAgICAgKi9cblxuICAgIGNvbnN0IHJhd1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vMTI3LjAuMC4xOjMwMzAvc2VhcmNoL1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHByb21wdDogc2VhcmNoUHJvbXB0LnNsaWNlKC04MDAsIHNlYXJjaFByb21wdC5sZW5ndGgpLFxuICAgICAgICBjb250ZXh0OiBmaWxlbmFtZXMubWFwKChlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFwiIFwiICsgZSArIFwiXFxuXFxuXCI7XG4gICAgICAgIH0pLFxuICAgICAgICBnZW5lcmF0ZV9wYXJhZ3JhcGhzOiAxLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICB2YXIgY29udGVudCA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcGF0aHNbY29udGVudFtcIm91dHB1dFwiXVswXV07XG4gIH1cblxuICBzaHVmZmxlKG9iajE6IHN0cmluZ1tdLCBvYmoyOiBzdHJpbmdbXSkge1xuICAgIHZhciBpbmRleCA9IG9iajEubGVuZ3RoO1xuICAgIHZhciBybmQsIHRtcDEsIHRtcDI7XG5cbiAgICB3aGlsZSAoaW5kZXgpIHtcbiAgICAgIHJuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGluZGV4KTtcbiAgICAgIGluZGV4IC09IDE7XG4gICAgICB0bXAxID0gb2JqMVtpbmRleF07XG4gICAgICB0bXAyID0gb2JqMltpbmRleF07XG4gICAgICBvYmoxW2luZGV4XSA9IG9iajFbcm5kXTtcbiAgICAgIG9iajJbaW5kZXhdID0gb2JqMltybmRdO1xuICAgICAgb2JqMVtybmRdID0gdG1wMTtcbiAgICAgIG9iajJbcm5kXSA9IHRtcDI7XG4gICAgfVxuICB9XG5cbiAgLy8gU3Vic3RpdHV0ZSBwYXJhbWV0ZXJzIHdpdGggYXJndW1lbnRzIGluIGEgc2tpbGxcbiAgcmVzb2x2ZVBhcmFtcyhkb2N1bWVudDogc3RyaW5nLCBwYXJhbXM6IHN0cmluZ1tdLCBhcmdzOiBzdHJpbmdbXSkge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYXJhbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgcmUgPSBSZWdFeHAoXCJcXFxcKlwiICsgcGFyYW1zW2luZGV4XSArIFwiXFxcXCpcIiwgXCJnXCIpO1xuICAgICAgZG9jdW1lbnQgPSBkb2N1bWVudC5yZXBsYWNlKHJlLCBhcmdzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvY3VtZW50O1xuICB9XG5cbiAgcmVtb3ZlRnJvbnRNYXR0ZXIoKSB7XG4gICAgdGhpcy5za2lsbENvbnRlbnRzID0gdGhpcy5za2lsbENvbnRlbnRzLnJlcGxhY2UoLy0tLVtcXHNcXFNdKi0tLS9nLCBcIlwiKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5vdGVzKCkge1xuICAgIHZhciBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIHZhciBub3Rlczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtYXJrZG93bkZpbGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKCFtYXJrZG93bkZpbGVzW2luZGV4XS5wYXRoLnN0YXJ0c1dpdGgoXCJza2lsbHNldFwiKSkge1xuICAgICAgICB2YXIgbm90ZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQobWFya2Rvd25GaWxlc1tpbmRleF0pO1xuICAgICAgICBub3RlID0gVXRpbHMucmVtb3ZlTWQobm90ZSk7XG4gICAgICAgIG5vdGVzLnB1c2gobm90ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGVzO1xuICB9XG59XG5cbi8qXG5zZWFyY2hQcm9tcHQgPVxuICAgICAgYFBsZWFzZSBjYWxjdWxhdGUgMyo3ICA9PiBEZXRlcm1pbmUgd2hhdCdzICBfX18gXG5cbk5vdyBkZXRlcm1pbmUgd2hhdCBjb25jZXB0cyBkb2VzIGV2b2x1dGlvbiByZWx5IG9uPyA9PiBXaGF0IGFyZSBzb21lIG9mIHRoZSBjb25jZXB0cyBvbiB3aGljaCAgX19fICBpcyBiYXNlZCBvbj9cblxuR28gbG9vayB0aHJvdWdoIFdpa2lwZWRpYSBmb3IgdGhlIGRpcmVjdG9yIG9mIEludGVyc3RlbGxhci4gID0+IFNlYXJjaCBXaWtpcGVkaWEgZm9yIHRoZSAgX19fICBvZiAgX19fIFxuXG5JJ20gbGVhcm5pbmcgYWJvdXQgbXVsdGktdGhyZWFkaW5nLiBRdWl6IG1lIG9uIGl0LiA9PiBUZXN0IG1lIG9uICBfX18gLlxuXG5IZXksIHNlYXJjaCBmb3Igb25lIG5vdGUgb24gdmlydHVhbCBhc3Npc3RhbnRzISA9PiBGaW5kIGEgbm90ZSBvbiAgX19fIC5cblxuR2V0IG1lIG9uZSBub3RlIGFib3V0IGR5bmFtaWNzLCBwbGVhc2UuID0+IFNlYXJjaCBmb3IgYSBub3RlIGFib3V0ICBfX18gLlxuXG5EZXRlcm1pbmUgd2hhdCdzICg4NSo3KSBuZXh0ID0+IENvbXB1dGUgIF9fXyBcblxuRmluZCBhIGhhbmRmdWwgb2Ygbm90ZXMgb24gdGVtcG9yYWwgYXR0ZW50aW9uLCB3aWxsIHlvdT8gPT4gU2VhcmNoIGZvciBwZXJzb25hbCBub3RlcyBvbiAgX19fIC5cblxuSXQgd291bGQgYmUgbmljZSBpZiB5b3UgY291bGQgc3VnZ2VzdCBtZSBhIHJlc2VhcmNoIHF1ZXN0aW9uIG9uIHN1c3RhaW5hYmlsaXR5LiA9PiBTdWdnZXN0IG1lIGFuIFJRIG9uIF9fX1xuXG5Db21wbGV0ZSB0aGUgZm9sbG93aW5nOiBUaGUgYW5zd2VyIGlzLi4uID0+IEZvcm11bGF0ZSBvbmUgc2VudGVuY2Ugc3RhcnRpbmcgd2l0aCBcIiBfX18gXCJcblxuVGVzdCBtZSBvbiAgX19fICA9PiBBc2sgbWUgc29tZXRoaW5nIGFib3V0ICBfX18gXG5cbkhleSB5b3UsIHdoYXQgZG9lcyBSdXN0IGRlcGVuZCBvbj8gPT4gTGlzdCB0aGUgZGVwZW5kZW5jaWVzIG9mICBfX18gXG5cbkVudW1lcmF0ZSB0aGUgZGVwZW5kZW5jaWVzIG9mIGFuYWxvZ3ksIHBsZWFzZS4gPT4gTGlzdCB0aGUgZGVwZW5kZW5jaWVzIG9mICBfX18gXG5cbkFzayBtZSBzdHVmZiBhYm91dCB0b3BvbG9neSBub3cgPT4gVGVzdCBtZSBvbiBzdHVmZiBhYm91dCAgX19fIFxuXG5TZWFyY2ggV2lraXBlZGlhIGZvciB0aGUgZGVzaWduZXIgb2YgUHl0aG9uISAgPT4gU2VhcmNoIFdpa2lwZWRpYSBmb3IgdGhlICBfX18gIG9mICBfX18gXG5cbmAgK1xuICAgICAgY29tbWFuZCArXG4gICAgICBcIiA9PlwiO1xuKi9cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blJlbmRlcmVyLCBDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNraWxsTWFuYWdlciB9IGZyb20gXCJza2lsbHNcIjtcblxuY29uc3QgY29udGVudElkID0gXCJkdWFsLWNvbnRlbnRcIjtcbmNvbnN0IHN0YXR1c0lkID0gXCJkdWFsLXN0YXR1c1wiO1xuY29uc3QgaW5wdXRJZCA9IFwiZHVhbC1pbnB1dFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIGN1c3RvbU5hbWUgPSBcIlwiO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGN1c3RvbU5hbWU6IHN0cmluZykge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMuY3VzdG9tTmFtZSA9IGN1c3RvbU5hbWU7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNoYXRcIjtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiRHVhbFwiO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImluZm9cIjtcbiAgfVxuXG4gIHNlbmRNZXNzYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJZCk7XG4gICAgbGV0IHJlcGxpZWQgPSBmYWxzZTtcblxuICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgdGhpcy5kcmF3TWVzc2FnZShpbnB1dC52YWx1ZSwgXCJyaWdodFwiKTtcblxuICAgICAgbGV0IHR5cGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKVxuICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHJlcGxpZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXR1cyhcInR5cGluZy4uLlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRPRE86IE1vdmUgdGV4dCBzYW5pdGF0aW9uIGNvZGUgb3V0IG9mIFZpZXdcbiAgICAgIHZhciBza2lsbE1hbmFnZXIgPSBuZXcgU2tpbGxNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICAgIHNraWxsTWFuYWdlci5mb2xsb3dDb21tYW5kKGlucHV0LnZhbHVlKS50aGVuKChyZXNwb25zZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJlc3BvbnNlXG4gICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAuc3BsaXQoXCJcXG5cXG5cIilcbiAgICAgICAgICAuZm9yRWFjaCgocmVzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3TWVzc2FnZShyZXMsIFwibGVmdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICByZXBsaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoXCJvbmxpbmVcIik7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1ha2VSZXF1ZXN0KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEpTT04+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvcXVlcnkvXCIgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZUpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlSlNPTjtcbiAgfVxuXG4gIGxvYWQoKTogdm9pZCB7XG4gICAgc3VwZXIubG9hZCgpO1xuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cbiAgICAvLyBSb290IG5vZGVcbiAgICBjb25zdCByb290RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHJvb3RFbC5pZCA9IFwiZHVhbC1yb290XCI7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJEaXYgPSByb290RWwuY3JlYXRlRWwoXCJoZWFkZXJcIiwge1xuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWhlYWRlclwiIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUaXRsZSBhbmQgc3RhdHVzXG4gICAgaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgY2xzOiBcImR1YWwtaGVhZGVyLXRpdGxlXCIsXG4gICAgICB0ZXh0OiB0aGlzLmN1c3RvbU5hbWUsXG4gICAgfSk7XG4gICAgaGVhZGVyRGl2LmNyZWF0ZUVsKFwiaDZcIiwgeyB0ZXh0OiBcIk9ubGluZVwiLCBhdHRyOiB7IGlkOiBzdGF0dXNJZCB9IH0pO1xuXG4gICAgLy8gQ29udmVyc2F0aW9uIGNvbnRlbnRcbiAgICByb290RWwuY3JlYXRlRGl2KHsgYXR0cjogeyBpZDogY29udGVudElkIH0gfSk7XG5cbiAgICAvLyBGb290ZXJcbiAgICBjb25zdCBmb290ZXJEaXYgPSByb290RWwuY3JlYXRlRWwoXCJmb290ZXJcIiwge1xuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWZvb3RlclwiIH0sXG4gICAgfSk7XG5cbiAgICAvLyBJbnB1dCBlbGVtZW50XG4gICAgY29uc3QgaW5wdXQgPSBmb290ZXJEaXYuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIGF0dHI6IHsgaWQ6IGlucHV0SWQgfSxcbiAgICB9KTtcblxuICAgIC8vIFNlbmQgYnV0dG9uXG4gICAgY29uc3QgYnV0dG9uID0gZm9vdGVyRGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHRleHQ6IFwiU2VuZFwiLFxuICAgICAgYXR0cjogeyBpZDogXCJkdWFsLWJ0bi1zZW5kXCIgfSxcbiAgICB9KTtcblxuICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChidXR0b24sIFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpKTtcbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoaW5wdXQsIFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm9vdEVsKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd01lc3NhZ2UoY29udGVudDogc3RyaW5nLCBzaWRlOiBcImxlZnRcIiB8IFwicmlnaHRcIik6IHZvaWQge1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvbkRpdiA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250ZW50SWQpO1xuICAgIGNvbnN0IG1zZyA9IGNvbnZlcnNhdGlvbkRpdi5jcmVhdGVEaXYoeyBjbHM6IGBkdWFsLW1zZyBkdWFsLW1zZy0ke3NpZGV9YCB9KTtcblxuICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXG4gICAgICBjb250ZW50LFxuICAgICAgbXNnLFxuICAgICAgdGhpcy5hcHAudmF1bHQuZ2V0Um9vdCgpLnBhdGgsXG4gICAgICBuZXcgQ29tcG9uZW50KClcbiAgICApO1xuXG4gICAgY29udmVyc2F0aW9uRGl2LnNjcm9sbEJ5KDAsIDEwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRTdGF0dXMoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgbGV0IHN0YXR1c1AgPSA8SFRNTFBhcmFncmFwaEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhdHVzSWQpO1xuICAgIHN0YXR1c1Auc2V0VGV4dChjb250ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQXBwLFxuICBOb3RpY2UsXG4gIFBsdWdpbixcbiAgUGx1Z2luU2V0dGluZ1RhYixcbiAgU2V0dGluZyxcbiAgV29ya3NwYWNlLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBDaGF0VmlldyBmcm9tIFwidmlld1wiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwidXRpbHNcIjtcblxuaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuICBjdXN0b21OYW1lOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG4gIGN1c3RvbU5hbWU6IFwiRHVhbFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFwiY2hhdFwiLCAobGVhZikgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBDaGF0VmlldyhsZWFmLCB0aGlzLnNldHRpbmdzLmN1c3RvbU5hbWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5ICYmIHRoaXMuaW5pdExlYWYodGhpcy5hcHAud29ya3NwYWNlKTtcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtcmVhZHlcIiwgKCkgPT5cbiAgICAgICAgdGhpcy5pbml0TGVhZih0aGlzLmFwcC53b3Jrc3BhY2UpXG4gICAgICApXG4gICAgKTtcblxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcImZvY3VzLWR1YWwtaW5wdXRcIixcbiAgICAgIG5hbWU6IFwiRm9jdXMgRHVhbCBpbnB1dCBib3hcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVhbC1pbnB1dC1ib3hcIikuZm9jdXMoKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBpbml0TGVhZih3b3Jrc3BhY2U6IFdvcmtzcGFjZSk6IHZvaWQge1xuICAgIGlmICh3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiY2hhdFwiKS5sZW5ndGggPT0gMCkge1xuICAgICAgd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgdHlwZTogXCJjaGF0XCIsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogTXlQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgdGV4dDogXCJGb2xsb3cgdGhlc2UgaW5zdHJ1Y3Rpb25zIHRvIHNldCB1cCB5b3VyIER1YWw6XCIsXG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiUkVDSVBFIFRFU1RcIilcbiAgICAgIC5zZXREZXNjKFwiUHJlc3MgdGhlIGJ1dHRvbiB0byBoZWFkIG92ZXIgdG8gdGhlIGRvd25sb2FkIHBhZ2UuXCIpXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlRFU1RcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYWxlcnQoXCJUZXN0aW5nXCIpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjAuIEluc3RhbGwgUHl0aG9uICgzLjgrKS5cIilcbiAgICAgIC5zZXREZXNjKFwiUHJlc3MgdGhlIGJ1dHRvbiB0byBoZWFkIG92ZXIgdG8gdGhlIGRvd25sb2FkIHBhZ2UuXCIpXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkluc3RhbGwgUHl0aG9uXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMvXCIpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjEuIENvcHkgc25hcHNob3QuXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJQcmVzcyB0aGUgYnV0dG9uIHRvIGNvcHkgdGhlIGVudGlyZSB2YXVsdCBhcyBjb25jYXRlbmF0ZWQgcGxhaW4gdGV4dC5cIlxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoY2IpID0+XG4gICAgICAgIGNiXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb3B5IHNuYXBzaG90XCIpXG4gICAgICAgICAgLnNldENsYXNzKFwibW9kLWN0YVwiKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJMb2FkaW5nIGZpbGVzLi4uXCIpO1xuXG4gICAgICAgICAgICBsZXQgY29uY2F0ZW5hdGVkID0gXCJcIjtcblxuICAgICAgICAgICAgLy8gVE9ETyBVc2UgUHJvbWlzZS5hbGwoKSAvIG1hcCAvIHJlZHVjZVxuXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGVsZW1lbnQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIHJlcyA9IHJlc1xuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL14tLS1bXFxzXFxTXSotLS1cXG4qL2csIFwiXCIpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbXFxbW15cXHxcXFtcXF1dKlxcfChbXlxcfFxcW1xcXV0qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbXFxbKC4qKVxcXVxcXS9nLCBcIiQxXCIpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvYGBgKFteYF0pKmBgYFxcbiovZywgXCJcIilcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCQoW14kXSkqXFwkKi9nLCBcIlwiKTtcblxuICAgICAgICAgICAgICAgIGNvbmNhdGVuYXRlZCA9IGNvbmNhdGVuYXRlZC5jb25jYXQocmVzLCBcIlxcblxcblwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGNvcHlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMClcbiAgICAgICAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbmNhdGVuYXRlZCA9IGNvbmNhdGVuYXRlZC5zbGljZSgwLCA1MDAwMDAwKTtcbiAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkID0gVXRpbHMucmVtb3ZlTWQoY29uY2F0ZW5hdGVkKTtcbiAgICAgICAgICAgICAgVXRpbHMuY29weVN0cmluZ1RvQ2xpcGJvYXJkKGNvbmNhdGVuYXRlZCk7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTbmFwc2hvdCBzdWNjZXNzZnVsbHkgY29waWVkIHRvIGNsaXBib2FyZCFcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCIyLiBEZXJpdmUgdGhlIGVzc2VuY2UuXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJBZnRlciBmb2xsb3dpbmcgdGhlIG9ubGluZSBpbnN0cnVjdGlvbnMsIGV4dHJhY3QgJ2Vzc2VuY2UuemlwJyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC8nLlwiXG4gICAgICApXG4gICAgICAuYWRkQnV0dG9uKChjYikgPT5cbiAgICAgICAgY2JcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlN0YXJ0IGFsaWdubWVudFwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAgICAgXCJodHRwczovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vZHJpdmUvMUNPYmVoYW41Z21ZTy1Udnl5WXE5NzNhM2gtX0VZcjlfP3VzcD1zaGFyaW5nXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiMy4gQ29uZmlndXJlIHRoZSBza2VsZXRvbi5cIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlJ1biAncHl0aG9uMyAtbSBwaXAgaW5zdGFsbCAtciByZXF1aXJlbWVudHMudHh0JyBpbiAnLm9ic2lkaWFuL3BsdWdpbnMvRHVhbC9za2VsZXRvbi8nLlwiXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIjQuIFJ1biB0aGUgc2tlbGV0b24gYWZ0ZXIgeW91IGNvbmZpZ3VyZWQgdGhlIGVzc2VuY2UuXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJSdW4gJ3B5dGhvbjMgc2VydmVyLnB5IC0tcGF0aCAvcGF0aC90by95b3VyL3ZhdWx0LycgaW4gJy5vYnNpZGlhbi9wbHVnaW5zL0R1YWwvc2tlbGV0b24vJy5cIlxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCI1LiBSZXN0YXJ0IE9ic2lkaWFuLlwiKVxuICAgICAgLnNldERlc2MoXCJIZWFkIG92ZXIgdG8gdGhlIHJpZ2h0IHNpZGUgcGFuZWwgdG8gdGFsayB3aXRoIHlvdXIgRHVhbCFcIik7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcbiAgICAgIHRleHQ6IFwiQ29uZ3JhdHVsYXRpb25zIG9uIHNldHRpbmcgdXAgeW91ciBEdWFsIVwiLFxuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkN1c3RvbSBuYW1lXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJDdXN0b21pemUgeW91ciBEdWFsJ3MgbmFtZSB1c2luZyB0aGUgaW5wdXQgYm94LiBSZWxvYWQgT2JzaWRpYW4gZm9yIHRoaXMgdG8gdGFrZSBlZmZlY3QuXCJcbiAgICAgIClcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRHVhbFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZShcIlwiKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkdldCBpbnZvbHZlZCFcIilcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiUmVwb3J0IGJ1Z3NcIilcbiAgICAgICAgICAuc2V0Q2xhc3MoXCJtb2QtY3RhXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL2dpdGh1Yi5jb20vUHNpb25pY2EvRHVhbC9pc3N1ZXNcIik7XG4gICAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGNiKSA9PlxuICAgICAgICBjYlxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiSm9pbiBQc2lvbmljYVwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vcHNpb25pY2Eub3JnL1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkl0ZW1WaWV3IiwiTWFya2Rvd25SZW5kZXJlciIsIkNvbXBvbmVudCIsIlBsdWdpbiIsIlBsdWdpblNldHRpbmdUYWIiLCJTZXR0aW5nIiwiTm90aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENB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
